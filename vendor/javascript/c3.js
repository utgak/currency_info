import t from"d3";var e="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global;var n={};
/* @license C3.js v0.7.20 | (c) C3 Team and other contributors | http://c3js.org/ */(function(t,e){n=e()})(n,(function(){function ChartInternal(n){var r=this||e;r.d3=window.d3?window.d3:t;r.api=n;r.config=r.getDefaultConfig();r.data={};r.cache={};r.axes={}}function Chart(t){(this||e).internal=new ChartInternal(this||e);(this||e).internal.loadConfig(t);(this||e).internal.beforeInit(t);(this||e).internal.init();(this||e).internal.afterInit(t);(function bindThis(t,e,n){Object.keys(t).forEach((function(r){e[r]=t[r].bind(n);Object.keys(t[r]).length>0&&bindThis(t[r],e[r],n)}))})(Chart.prototype,this||e,this||e)}var asHalfPixel=function(t){return Math.ceil(t)+.5};var ceil10=function(t){return 10*Math.ceil(t/10)};var diffDomain=function(t){return t[1]-t[0]};var getOption=function(t,e,n){return isDefined(t[e])?t[e]:n};var getPathBox=function(t){var e=getBBox(t),n=[t.pathSegList.getItem(0),t.pathSegList.getItem(1)],r=n[0].x,i=Math.min(n[0].y,n[1].y);return{x:r,y:i,width:e.width,height:e.height}};var getBBox=function(t){try{return t.getBBox()}catch(t){return{x:0,y:0,width:0,height:0}}};var hasValue=function(t,e){var n=false;Object.keys(t).forEach((function(r){t[r]===e&&(n=true)}));return n};var isArray=function(t){return Array.isArray(t)};var isDefined=function(t){return"undefined"!==typeof t};var isEmpty=function(t){return"undefined"===typeof t||null===t||isString(t)&&0===t.length||"object"===typeof t&&0===Object.keys(t).length};var isFunction=function(t){return"function"===typeof t};var isNumber=function(t){return"number"===typeof t};var isString=function(t){return"string"===typeof t};var isUndefined=function(t){return"undefined"===typeof t};var isValue=function(t){return t||0===t};var notEmpty=function(t){return!isEmpty(t)};var sanitise=function(t){return"string"===typeof t?t.replace(/</g,"&lt;").replace(/>/g,"&gt;"):t};var flattenArray=function(t){return Array.isArray(t)?[].concat.apply([],t):[]};
/**
   * Returns whether the point is within the given box.
   *
   * @param {Array} point An [x,y] coordinate
   * @param {Object} box An object with {x, y, width, height} keys
   * @param {Number} sensitivity An offset to ease check on very small boxes
   */var isWithinBox=function(t,e,n){void 0===n&&(n=0);var r=e.x-n;var i=e.x+e.width+n;var a=e.y+e.height+n;var o=e.y-n;return r<t[0]&&t[0]<i&&o<t[1]&&t[1]<a};
/**
   * Returns Internet Explorer version number (or false if no Internet Explorer used).
   *
   * @param string agent Optional parameter to specify user agent
   */var getIEVersion=function(t){"undefined"===typeof t&&(t=window.navigator.userAgent);var e=t.indexOf("MSIE ");if(e>0)return parseInt(t.substring(e+5,t.indexOf(".",e)),10);e=t.indexOf("Trident/");if(e>0){e=t.indexOf("rv:");return parseInt(t.substring(e+3,t.indexOf(".",e)),10)}return false};
/**
   * Returns whether the used browser is Internet Explorer.
   *
   * @param version Optional parameter to specify IE version
   */var isIE=function(t){var e=getIEVersion();return"undefined"===typeof t?!!e:t===e};function AxisInternal(t,n){var r=this||e;r.component=t;r.params=n||{};r.d3=t.d3;r.scale=r.d3.scaleLinear();r.range;r.orient="bottom";r.innerTickSize=6;r.outerTickSize=(this||e).params.withOuterTick?6:0;r.tickPadding=3;r.tickValues=null;r.tickFormat;r.tickArguments;r.tickOffset=0;r.tickCulling=true;r.tickCentered;r.tickTextCharSize;r.tickTextRotate=r.params.tickTextRotate;r.tickLength;r.axis=r.generateAxis()}AxisInternal.prototype.axisX=function(t,e,n){t.attr("transform",(function(t){return"translate("+Math.ceil(e(t)+n)+", 0)"}))};AxisInternal.prototype.axisY=function(t,e){t.attr("transform",(function(t){return"translate(0,"+Math.ceil(e(t))+")"}))};AxisInternal.prototype.scaleExtent=function(t){var e=t[0],n=t[t.length-1];return e<n?[e,n]:[n,e]};AxisInternal.prototype.generateTicks=function(t){var n=this||e;var r,i,a=[];if(t.ticks)return t.ticks.apply(t,n.tickArguments);i=t.domain();for(r=Math.ceil(i[0]);r<i[1];r++)a.push(r);a.length>0&&a[0]>0&&a.unshift(a[0]-(a[1]-a[0]));return a};AxisInternal.prototype.copyScale=function(){var t=this||e;var n=t.scale.copy(),r;if(t.params.isCategory){r=t.scale.domain();n.domain([r[0],r[1]-1])}return n};AxisInternal.prototype.textFormatted=function(t){var n=this||e,r=n.tickFormat?n.tickFormat(t):t;return"undefined"!==typeof r?r:""};AxisInternal.prototype.updateRange=function(){var t=this||e;t.range=t.scale.rangeExtent?t.scale.rangeExtent():t.scaleExtent(t.scale.range());return t.range};AxisInternal.prototype.updateTickTextCharSize=function(t){var n=this||e;if(n.tickTextCharSize)return n.tickTextCharSize;var r={h:11.5,w:5.5};t.select("text").text((function(t){return n.textFormatted(t)})).each((function(t){var i=getBBox(this||e),a=n.textFormatted(t),o=i.height,s=a?i.width/a.length:void 0;if(o&&s){r.h=o;r.w=s}})).text("");n.tickTextCharSize=r;return r};AxisInternal.prototype.isVertical=function(){return"left"===(this||e).orient||"right"===(this||e).orient};AxisInternal.prototype.tspanData=function(t,n,r){var i=this||e;var a=i.params.tickMultiline?i.splitTickText(t,r):[].concat(i.textFormatted(t));i.params.tickMultiline&&i.params.tickMultilineMax>0&&(a=i.ellipsify(a,i.params.tickMultilineMax));return a.map((function(t){return{index:n,splitted:t,length:a.length}}))};AxisInternal.prototype.splitTickText=function(t,n){var r=this||e,i=r.textFormatted(t),a=r.params.tickWidth,o,s,l,c=[];if("[object Array]"===Object.prototype.toString.call(i))return i;(!a||a<=0)&&(a=r.isVertical()?95:r.params.isCategory?Math.ceil(n(1)-n(0))-12:110);function split(t,e){s=void 0;for(var n=1;n<e.length;n++){" "===e.charAt(n)&&(s=n);o=e.substr(0,n+1);l=r.tickTextCharSize.w*o.length;if(a<l)return split(t.concat(e.substr(0,s||n)),e.slice(s?s+1:n))}return t.concat(e)}return split(c,i+"")};AxisInternal.prototype.ellipsify=function(t,e){if(t.length<=e)return t;var n=t.slice(0,e);var r=3;for(var i=e-1;i>=0;i--){var a=n[i].length;n[i]=n[i].substr(0,a-r).padEnd(a,".");r-=a;if(r<=0)break}return n};AxisInternal.prototype.updateTickLength=function(){var t=this||e;t.tickLength=Math.max(t.innerTickSize,0)+t.tickPadding};AxisInternal.prototype.lineY2=function(t){var n=this||e,r=n.scale(t)+(n.tickCentered?0:n.tickOffset);return n.range[0]<r&&r<n.range[1]?n.innerTickSize:0};AxisInternal.prototype.textY=function(){var t=this||e,n=t.tickTextRotate;return n?11.5-2.5*(n/15)*(n>0?1:-1):t.tickLength};AxisInternal.prototype.textTransform=function(){var t=this||e,n=t.tickTextRotate;return n?"rotate("+n+")":""};AxisInternal.prototype.textTextAnchor=function(){var t=this||e,n=t.tickTextRotate;return n?n>0?"start":"end":"middle"};AxisInternal.prototype.tspanDx=function(){var t=this||e,n=t.tickTextRotate;return n?8*Math.sin(Math.PI*(n/180)):0};AxisInternal.prototype.tspanDy=function(t,n){var r=this||e,i=r.tickTextCharSize.h;0===n&&(i=r.isVertical()?-((t.length-1)*(r.tickTextCharSize.h/2)-3):".71em");return i};AxisInternal.prototype.generateAxis=function(){var t=this||e,n=t.d3,r=t.params;function axis(i,a){var o;i.each((function(){var i=axis.g=n.select(this||e);var s=(this||e).__chart__||t.scale,l=(this||e).__chart__=t.copyScale();var c=t.tickValues?t.tickValues:t.generateTicks(l),d=i.selectAll(".tick").data(c,l),u=d.enter().insert("g",".domain").attr("class","tick").style("opacity",1e-6),h=d.exit().remove(),g=d.merge(u),p,x,_;if(r.isCategory){t.tickOffset=Math.ceil((l(1)-l(0))/2);x=t.tickCentered?0:t.tickOffset;_=t.tickCentered?t.tickOffset:0}else t.tickOffset=x=0;t.updateRange();t.updateTickLength();t.updateTickTextCharSize(i.select(".tick"));var y=g.select("line").merge(u.append("line")),m=g.select("text").merge(u.append("text"));var v=g.selectAll("text").selectAll("tspan").data((function(e,n){return t.tspanData(e,n,l)})),S=v.enter().append("tspan"),w=S.merge(v).text((function(t){return t.splitted}));v.exit().remove();var b=i.selectAll(".domain").data([0]),C=b.enter().append("path").merge(b).attr("class","domain");switch(t.orient){case"bottom":p=t.axisX;y.attr("x1",x).attr("x2",x).attr("y2",(function(e,n){return t.lineY2(e,n)}));m.attr("x",0).attr("y",(function(e,n){return t.textY(e,n)})).attr("transform",(function(e,n){return t.textTransform(e,n)})).style("text-anchor",(function(e,n){return t.textTextAnchor(e,n)}));w.attr("x",0).attr("dy",(function(e,n){return t.tspanDy(e,n)})).attr("dx",(function(e,n){return t.tspanDx(e,n)}));C.attr("d","M"+t.range[0]+","+t.outerTickSize+"V0H"+t.range[1]+"V"+t.outerTickSize);break;case"top":p=t.axisX;y.attr("x1",x).attr("x2",x).attr("y2",(function(e,n){return-1*t.lineY2(e,n)}));m.attr("x",0).attr("y",(function(e,n){return-1*t.textY(e,n)-(r.isCategory?2:t.tickLength-2)})).attr("transform",(function(e,n){return t.textTransform(e,n)})).style("text-anchor",(function(e,n){return t.textTextAnchor(e,n)}));w.attr("x",0).attr("dy",(function(e,n){return t.tspanDy(e,n)})).attr("dx",(function(e,n){return t.tspanDx(e,n)}));C.attr("d","M"+t.range[0]+","+-t.outerTickSize+"V0H"+t.range[1]+"V"+-t.outerTickSize);break;case"left":p=t.axisY;y.attr("x2",-t.innerTickSize).attr("y1",_).attr("y2",_);m.attr("x",-t.tickLength).attr("y",t.tickOffset).style("text-anchor","end");w.attr("x",-t.tickLength).attr("dy",(function(e,n){return t.tspanDy(e,n)}));C.attr("d","M"+-t.outerTickSize+","+t.range[0]+"H0V"+t.range[1]+"H"+-t.outerTickSize);break;case"right":p=t.axisY;y.attr("x2",t.innerTickSize).attr("y1",_).attr("y2",_);m.attr("x",t.tickLength).attr("y",t.tickOffset).style("text-anchor","start");w.attr("x",t.tickLength).attr("dy",(function(e,n){return t.tspanDy(e,n)}));C.attr("d","M"+t.outerTickSize+","+t.range[0]+"H0V"+t.range[1]+"H"+t.outerTickSize);break}if(l.rangeBand){var T=l,A=T.rangeBand()/2;s=l=function(t){return T(t)+A}}else s.rangeBand?s=l:h.call(p,l,t.tickOffset);u.call(p,s,t.tickOffset);o=(a?g.transition(a):g).style("opacity",1).call(p,l,t.tickOffset)}));return o}axis.scale=function(e){if(!arguments.length)return t.scale;t.scale=e;return axis};axis.orient=function(e){if(!arguments.length)return t.orient;t.orient=e in{top:1,right:1,bottom:1,left:1}?e+"":"bottom";return axis};axis.tickFormat=function(e){if(!arguments.length)return t.tickFormat;t.tickFormat=e;return axis};axis.tickCentered=function(e){if(!arguments.length)return t.tickCentered;t.tickCentered=e;return axis};axis.tickOffset=function(){return t.tickOffset};axis.tickInterval=function(){var e,n;if(r.isCategory)e=2*t.tickOffset;else{n=axis.g.select("path.domain").node().getTotalLength()-2*t.outerTickSize;e=n/axis.g.selectAll("line").size()}return Infinity===e?0:e};axis.ticks=function(){if(!arguments.length)return t.tickArguments;t.tickArguments=arguments;return axis};axis.tickCulling=function(e){if(!arguments.length)return t.tickCulling;t.tickCulling=e;return axis};axis.tickValues=function(e){if("function"===typeof e)t.tickValues=function(){return e(t.scale.domain())};else{if(!arguments.length)return t.tickValues;t.tickValues=e}return axis};return axis};var n={target:"c3-target",chart:"c3-chart",chartLine:"c3-chart-line",chartLines:"c3-chart-lines",chartBar:"c3-chart-bar",chartBars:"c3-chart-bars",chartText:"c3-chart-text",chartTexts:"c3-chart-texts",chartArc:"c3-chart-arc",chartArcs:"c3-chart-arcs",chartArcsTitle:"c3-chart-arcs-title",chartArcsBackground:"c3-chart-arcs-background",chartArcsGaugeUnit:"c3-chart-arcs-gauge-unit",chartArcsGaugeMax:"c3-chart-arcs-gauge-max",chartArcsGaugeMin:"c3-chart-arcs-gauge-min",selectedCircle:"c3-selected-circle",selectedCircles:"c3-selected-circles",eventRect:"c3-event-rect",eventRects:"c3-event-rects",eventRectsSingle:"c3-event-rects-single",eventRectsMultiple:"c3-event-rects-multiple",zoomRect:"c3-zoom-rect",brush:"c3-brush",dragZoom:"c3-drag-zoom",focused:"c3-focused",defocused:"c3-defocused",region:"c3-region",regions:"c3-regions",title:"c3-title",tooltipContainer:"c3-tooltip-container",tooltip:"c3-tooltip",tooltipName:"c3-tooltip-name",shape:"c3-shape",shapes:"c3-shapes",line:"c3-line",lines:"c3-lines",bar:"c3-bar",bars:"c3-bars",circle:"c3-circle",circles:"c3-circles",arc:"c3-arc",arcLabelLine:"c3-arc-label-line",arcs:"c3-arcs",area:"c3-area",areas:"c3-areas",empty:"c3-empty",text:"c3-text",texts:"c3-texts",gaugeValue:"c3-gauge-value",grid:"c3-grid",gridLines:"c3-grid-lines",xgrid:"c3-xgrid",xgrids:"c3-xgrids",xgridLine:"c3-xgrid-line",xgridLines:"c3-xgrid-lines",xgridFocus:"c3-xgrid-focus",ygrid:"c3-ygrid",ygrids:"c3-ygrids",ygridLine:"c3-ygrid-line",ygridLines:"c3-ygrid-lines",colorScale:"c3-colorscale",stanfordElements:"c3-stanford-elements",stanfordLine:"c3-stanford-line",stanfordLines:"c3-stanford-lines",stanfordRegion:"c3-stanford-region",stanfordRegions:"c3-stanford-regions",stanfordText:"c3-stanford-text",stanfordTexts:"c3-stanford-texts",axis:"c3-axis",axisX:"c3-axis-x",axisXLabel:"c3-axis-x-label",axisY:"c3-axis-y",axisYLabel:"c3-axis-y-label",axisY2:"c3-axis-y2",axisY2Label:"c3-axis-y2-label",legendBackground:"c3-legend-background",legendItem:"c3-legend-item",legendItemEvent:"c3-legend-item-event",legendItemTile:"c3-legend-item-tile",legendItemHidden:"c3-legend-item-hidden",legendItemFocused:"c3-legend-item-focused",dragarea:"c3-dragarea",EXPANDED:"_expanded_",SELECTED:"_selected_",INCLUDED:"_included_"};var r=function(){function AxisClass(t){(this||e).owner=t;(this||e).d3=t.d3;(this||e).internal=AxisInternal}return AxisClass}();var i=r;i.prototype.init=function init(){var t=(this||e).owner,r=t.config,i=t.main;t.axes.x=i.append("g").attr("class",n.axis+" "+n.axisX).attr("clip-path",r.axis_x_inner?"":t.clipPathForXAxis).attr("transform",t.getTranslate("x")).style("visibility",r.axis_x_show?"visible":"hidden");t.axes.x.append("text").attr("class",n.axisXLabel).attr("transform",r.axis_rotated?"rotate(-90)":"").style("text-anchor",(this||e).textAnchorForXAxisLabel.bind(this||e));t.axes.y=i.append("g").attr("class",n.axis+" "+n.axisY).attr("clip-path",r.axis_y_inner?"":t.clipPathForYAxis).attr("transform",t.getTranslate("y")).style("visibility",r.axis_y_show?"visible":"hidden");t.axes.y.append("text").attr("class",n.axisYLabel).attr("transform",r.axis_rotated?"":"rotate(-90)").style("text-anchor",(this||e).textAnchorForYAxisLabel.bind(this||e));t.axes.y2=i.append("g").attr("class",n.axis+" "+n.axisY2).attr("transform",t.getTranslate("y2")).style("visibility",r.axis_y2_show?"visible":"hidden");t.axes.y2.append("text").attr("class",n.axisY2Label).attr("transform",r.axis_rotated?"":"rotate(-90)").style("text-anchor",(this||e).textAnchorForY2AxisLabel.bind(this||e))};i.prototype.getXAxis=function getXAxis(t,n,r,i,a,o,s){var l=(this||e).owner,c=l.config,d={isCategory:l.isCategorized(),withOuterTick:a,tickMultiline:c.axis_x_tick_multiline,tickMultilineMax:c.axis_x_tick_multiline?Number(c.axis_x_tick_multilineMax):0,tickWidth:c.axis_x_tick_width,tickTextRotate:s?0:c.axis_x_tick_rotate,withoutTransition:o},u=new(this||e).internal(this||e,d).axis.scale(t).orient(n);l.isTimeSeries()&&i&&"function"!==typeof i&&(i=i.map((function(t){return l.parseDate(t)})));u.tickFormat(r).tickValues(i);if(l.isCategorized()){u.tickCentered(c.axis_x_tick_centered);isEmpty(c.axis_x_tick_culling)&&(c.axis_x_tick_culling=false)}return u};i.prototype.updateXAxisTickValues=function updateXAxisTickValues(t,n){var r=(this||e).owner,i=r.config,a;(i.axis_x_tick_fit||i.axis_x_tick_count)&&(a=this.generateTickValues(r.mapTargetsToUniqueXs(t),i.axis_x_tick_count,r.isTimeSeries()));if(n)n.tickValues(a);else{r.xAxis.tickValues(a);r.subXAxis.tickValues(a)}return a};i.prototype.getYAxis=function getYAxis(t,n,r,i,a,o,s){var l=(this||e).owner;var c=l.config;var d=c["axis_"+t+"_tick_format"];!d&&l.isAxisNormalized(t)&&(d=function(t){return t+"%"});var u=new(this||e).internal(this||e,{withOuterTick:a,withoutTransition:o,tickTextRotate:s?0:c.axis_y_tick_rotate}).axis.scale(n).orient(r);d&&u.tickFormat(d);l.isTimeSeriesY()?u.ticks(c.axis_y_tick_time_type,c.axis_y_tick_time_interval):u.tickValues(i);return u};i.prototype.getId=function getId(t){var n=(this||e).owner.config;return t in n.data_axes?n.data_axes[t]:"y"};i.prototype.getXAxisTickFormat=function getXAxisTickFormat(){var t=(this||e).owner,n=t.config;var r=t.isTimeSeries()?t.defaultAxisTimeFormat:t.isCategorized()?t.categoryName:function(t){return t};n.axis_x_tick_format&&(isFunction(n.axis_x_tick_format)?r=n.axis_x_tick_format:t.isTimeSeries()&&(r=function(e){return e?t.axisTimeFormat(n.axis_x_tick_format)(e):""}));return isFunction(r)?function(e){return r.call(t,e)}:r};i.prototype.getTickValues=function getTickValues(t,e){return t||(e?e.tickValues():void 0)};i.prototype.getXAxisTickValues=function getXAxisTickValues(){return this.getTickValues((this||e).owner.config.axis_x_tick_values,(this||e).owner.xAxis)};i.prototype.getYAxisTickValues=function getYAxisTickValues(){return this.getTickValues((this||e).owner.config.axis_y_tick_values,(this||e).owner.yAxis)};i.prototype.getY2AxisTickValues=function getY2AxisTickValues(){return this.getTickValues((this||e).owner.config.axis_y2_tick_values,(this||e).owner.y2Axis)};i.prototype.getLabelOptionByAxisId=function getLabelOptionByAxisId(t){var n=(this||e).owner,r=n.config,i;"y"===t?i=r.axis_y_label:"y2"===t?i=r.axis_y2_label:"x"===t&&(i=r.axis_x_label);return i};i.prototype.getLabelText=function getLabelText(t){var e=this.getLabelOptionByAxisId(t);return isString(e)?e:e?e.text:null};i.prototype.setLabelText=function setLabelText(t,n){var r=(this||e).owner,i=r.config,a=this.getLabelOptionByAxisId(t);isString(a)?"y"===t?i.axis_y_label=n:"y2"===t?i.axis_y2_label=n:"x"===t&&(i.axis_x_label=n):a&&(a.text=n)};i.prototype.getLabelPosition=function getLabelPosition(t,e){var n=this.getLabelOptionByAxisId(t),r=n&&"object"===typeof n&&n.position?n.position:e;return{isInner:r.indexOf("inner")>=0,isOuter:r.indexOf("outer")>=0,isLeft:r.indexOf("left")>=0,isCenter:r.indexOf("center")>=0,isRight:r.indexOf("right")>=0,isTop:r.indexOf("top")>=0,isMiddle:r.indexOf("middle")>=0,isBottom:r.indexOf("bottom")>=0}};i.prototype.getXAxisLabelPosition=function getXAxisLabelPosition(){return this.getLabelPosition("x",(this||e).owner.config.axis_rotated?"inner-top":"inner-right")};i.prototype.getYAxisLabelPosition=function getYAxisLabelPosition(){return this.getLabelPosition("y",(this||e).owner.config.axis_rotated?"inner-right":"inner-top")};i.prototype.getY2AxisLabelPosition=function getY2AxisLabelPosition(){return this.getLabelPosition("y2",(this||e).owner.config.axis_rotated?"inner-right":"inner-top")};i.prototype.getLabelPositionById=function getLabelPositionById(t){return"y2"===t?this.getY2AxisLabelPosition():"y"===t?this.getYAxisLabelPosition():this.getXAxisLabelPosition()};i.prototype.textForXAxisLabel=function textForXAxisLabel(){return this.getLabelText("x")};i.prototype.textForYAxisLabel=function textForYAxisLabel(){return this.getLabelText("y")};i.prototype.textForY2AxisLabel=function textForY2AxisLabel(){return this.getLabelText("y2")};i.prototype.xForAxisLabel=function xForAxisLabel(t,n){var r=(this||e).owner;return t?n.isLeft?0:n.isCenter?r.width/2:r.width:n.isBottom?-r.height:n.isMiddle?-r.height/2:0};i.prototype.dxForAxisLabel=function dxForAxisLabel(t,e){return t?e.isLeft?"0.5em":e.isRight?"-0.5em":"0":e.isTop?"-0.5em":e.isBottom?"0.5em":"0"};i.prototype.textAnchorForAxisLabel=function textAnchorForAxisLabel(t,e){return t?e.isLeft?"start":e.isCenter?"middle":"end":e.isBottom?"start":e.isMiddle?"middle":"end"};i.prototype.xForXAxisLabel=function xForXAxisLabel(){return this.xForAxisLabel(!(this||e).owner.config.axis_rotated,this.getXAxisLabelPosition())};i.prototype.xForYAxisLabel=function xForYAxisLabel(){return this.xForAxisLabel((this||e).owner.config.axis_rotated,this.getYAxisLabelPosition())};i.prototype.xForY2AxisLabel=function xForY2AxisLabel(){return this.xForAxisLabel((this||e).owner.config.axis_rotated,this.getY2AxisLabelPosition())};i.prototype.dxForXAxisLabel=function dxForXAxisLabel(){return this.dxForAxisLabel(!(this||e).owner.config.axis_rotated,this.getXAxisLabelPosition())};i.prototype.dxForYAxisLabel=function dxForYAxisLabel(){return this.dxForAxisLabel((this||e).owner.config.axis_rotated,this.getYAxisLabelPosition())};i.prototype.dxForY2AxisLabel=function dxForY2AxisLabel(){return this.dxForAxisLabel((this||e).owner.config.axis_rotated,this.getY2AxisLabelPosition())};i.prototype.dyForXAxisLabel=function dyForXAxisLabel(){var t=(this||e).owner,n=t.config,r=this.getXAxisLabelPosition();return n.axis_rotated?r.isInner?"1.2em":-25-(t.config.axis_x_inner?0:this.getMaxTickWidth("x")):r.isInner?"-0.5em":t.getHorizontalAxisHeight("x")-10};i.prototype.dyForYAxisLabel=function dyForYAxisLabel(){var t=(this||e).owner,n=this.getYAxisLabelPosition();return t.config.axis_rotated?n.isInner?"-0.5em":"3em":n.isInner?"1.2em":-10-(t.config.axis_y_inner?0:this.getMaxTickWidth("y")+10)};i.prototype.dyForY2AxisLabel=function dyForY2AxisLabel(){var t=(this||e).owner,n=this.getY2AxisLabelPosition();return t.config.axis_rotated?n.isInner?"1.2em":"-2.2em":n.isInner?"-0.5em":15+(t.config.axis_y2_inner?0:this.getMaxTickWidth("y2")+15)};i.prototype.textAnchorForXAxisLabel=function textAnchorForXAxisLabel(){var t=(this||e).owner;return this.textAnchorForAxisLabel(!t.config.axis_rotated,this.getXAxisLabelPosition())};i.prototype.textAnchorForYAxisLabel=function textAnchorForYAxisLabel(){var t=(this||e).owner;return this.textAnchorForAxisLabel(t.config.axis_rotated,this.getYAxisLabelPosition())};i.prototype.textAnchorForY2AxisLabel=function textAnchorForY2AxisLabel(){var t=(this||e).owner;return this.textAnchorForAxisLabel(t.config.axis_rotated,this.getY2AxisLabelPosition())};i.prototype.getMaxTickWidth=function getMaxTickWidth(t,n){var r=(this||e).owner,i=0,a,o,s,l,c;if(n&&r.currentMaxTickWidths[t])return r.currentMaxTickWidths[t];if(r.svg){a=r.filterTargetsToShow(r.data.targets);if("y"===t){o=r.y.copy().domain(r.getYDomain(a,"y"));s=this.getYAxis(t,o,r.yOrient,r.yAxisTickValues,false,true,true)}else if("y2"===t){o=r.y2.copy().domain(r.getYDomain(a,"y2"));s=this.getYAxis(t,o,r.y2Orient,r.y2AxisTickValues,false,true,true)}else{o=r.x.copy().domain(r.getXDomain(a));s=this.getXAxis(o,r.xOrient,r.xAxisTickFormat,r.xAxisTickValues,false,true,true);this.updateXAxisTickValues(a,s)}l=r.d3.select("body").append("div").classed("c3",true);c=l.append("svg").style("visibility","hidden").style("position","fixed").style("top",0).style("left",0),c.append("g").call(s).each((function(){r.d3.select(this||e).selectAll("text").each((function(){var t=getBBox(this||e);i<t.width&&(i=t.width)}));l.remove()}))}r.currentMaxTickWidths[t]=i<=0?r.currentMaxTickWidths[t]:i;return r.currentMaxTickWidths[t]};i.prototype.updateLabels=function updateLabels(t){var r=(this||e).owner;var i=r.main.select("."+n.axisX+" ."+n.axisXLabel),a=r.main.select("."+n.axisY+" ."+n.axisYLabel),o=r.main.select("."+n.axisY2+" ."+n.axisY2Label);(t?i.transition():i).attr("x",(this||e).xForXAxisLabel.bind(this||e)).attr("dx",(this||e).dxForXAxisLabel.bind(this||e)).attr("dy",(this||e).dyForXAxisLabel.bind(this||e)).text((this||e).textForXAxisLabel.bind(this||e));(t?a.transition():a).attr("x",(this||e).xForYAxisLabel.bind(this||e)).attr("dx",(this||e).dxForYAxisLabel.bind(this||e)).attr("dy",(this||e).dyForYAxisLabel.bind(this||e)).text((this||e).textForYAxisLabel.bind(this||e));(t?o.transition():o).attr("x",(this||e).xForY2AxisLabel.bind(this||e)).attr("dx",(this||e).dxForY2AxisLabel.bind(this||e)).attr("dy",(this||e).dyForY2AxisLabel.bind(this||e)).text((this||e).textForY2AxisLabel.bind(this||e))};i.prototype.getPadding=function getPadding(t,e,n,r){var i="number"===typeof t?t:t[e];return isValue(i)?"ratio"===t.unit?t[e]*r:this.convertPixelsToAxisPadding(i,r):n};i.prototype.convertPixelsToAxisPadding=function convertPixelsToAxisPadding(t,n){var r=(this||e).owner,i=r.config.axis_rotated?r.width:r.height;return n*(t/i)};i.prototype.generateTickValues=function generateTickValues(t,e,n){var r=t,i,a,o,s,l,c,d;if(e){i=isFunction(e)?e():e;if(1===i)r=[t[0]];else if(2===i)r=[t[0],t[t.length-1]];else if(i>2){s=i-2;a=t[0];o=t[t.length-1];l=(o-a)/(s+1);r=[a];for(c=0;c<s;c++){d=+a+l*(c+1);r.push(n?new Date(d):d)}r.push(o)}}n||(r=r.sort((function(t,e){return t-e})));return r};i.prototype.generateTransitions=function generateTransitions(t){var n=(this||e).owner,r=n.axes;return{axisX:t?r.x.transition().duration(t):r.x,axisY:t?r.y.transition().duration(t):r.y,axisY2:t?r.y2.transition().duration(t):r.y2,axisSubX:t?r.subx.transition().duration(t):r.subx}};i.prototype.redraw=function redraw(t,n){var r=(this||e).owner,i=t?r.d3.transition().duration(t):null;r.axes.x.style("opacity",n?0:1).call(r.xAxis,i);r.axes.y.style("opacity",n?0:1).call(r.yAxis,i);r.axes.y2.style("opacity",n?0:1).call(r.y2Axis,i);r.axes.subx.style("opacity",n?0:1).call(r.subXAxis,i)};var a={version:"0.7.20",chart:{fn:Chart.prototype,internal:{fn:ChartInternal.prototype,axis:{fn:r.prototype,internal:{fn:AxisInternal.prototype}}}},generate:function(t){return new Chart(t)}};ChartInternal.prototype.beforeInit=function(){};ChartInternal.prototype.afterInit=function(){};ChartInternal.prototype.init=function(){var t=this||e,n=t.config;t.initParams();if(n.data_url)t.convertUrlToData(n.data_url,n.data_mimeType,n.data_headers,n.data_keys,t.initWithData);else if(n.data_json)t.initWithData(t.convertJsonToData(n.data_json,n.data_keys));else if(n.data_rows)t.initWithData(t.convertRowsToData(n.data_rows));else{if(!n.data_columns)throw Error("url or json or rows or columns is required.");t.initWithData(t.convertColumnsToData(n.data_columns))}};ChartInternal.prototype.initParams=function(){var t=this||e,n=t.d3,r=t.config;t.clipId="c3-"+(new Date).valueOf()+"-clip";t.clipIdForXAxis=t.clipId+"-xaxis";t.clipIdForYAxis=t.clipId+"-yaxis";t.clipIdForGrid=t.clipId+"-grid";t.clipIdForSubchart=t.clipId+"-subchart";t.clipPath=t.getClipPath(t.clipId);t.clipPathForXAxis=t.getClipPath(t.clipIdForXAxis);t.clipPathForYAxis=t.getClipPath(t.clipIdForYAxis);t.clipPathForGrid=t.getClipPath(t.clipIdForGrid);t.clipPathForSubchart=t.getClipPath(t.clipIdForSubchart);t.dragStart=null;t.dragging=false;t.flowing=false;t.cancelClick=false;t.mouseover=void 0;t.transiting=false;t.color=t.generateColor();t.levelColor=t.generateLevelColor();t.dataTimeParse=(r.data_xLocaltime?n.timeParse:n.utcParse)(t.config.data_xFormat);t.axisTimeFormat=r.axis_x_localtime?n.timeFormat:n.utcFormat;t.defaultAxisTimeFormat=function(t){return t.getMilliseconds()?n.timeFormat(".%L")(t):t.getSeconds()?n.timeFormat(":%S")(t):t.getMinutes()?n.timeFormat("%I:%M")(t):t.getHours()?n.timeFormat("%I %p")(t):t.getDay()&&1!==t.getDate()||1!==t.getDate()||t.getMonth()?n.timeFormat("%-m/%-d")(t):n.timeFormat("%Y/%-m/%-d")(t)};t.hiddenTargetIds=[];t.hiddenLegendIds=[];t.focusedTargetIds=[];t.defocusedTargetIds=[];t.xOrient=r.axis_rotated?r.axis_x_inner?"right":"left":r.axis_x_inner?"top":"bottom";t.yOrient=r.axis_rotated?r.axis_y_inner?"top":"bottom":r.axis_y_inner?"right":"left";t.y2Orient=r.axis_rotated?r.axis_y2_inner?"bottom":"top":r.axis_y2_inner?"left":"right";t.subXOrient=r.axis_rotated?"left":"bottom";t.isLegendRight="right"===r.legend_position;t.isLegendInset="inset"===r.legend_position;t.isLegendTop="top-left"===r.legend_inset_anchor||"top-right"===r.legend_inset_anchor;t.isLegendLeft="top-left"===r.legend_inset_anchor||"bottom-left"===r.legend_inset_anchor;t.legendStep=0;t.legendItemWidth=0;t.legendItemHeight=0;t.currentMaxTickWidths={x:0,y:0,y2:0};t.rotated_padding_left=30;t.rotated_padding_right=r.axis_rotated&&!r.axis_x_show?0:30;t.rotated_padding_top=5;t.withoutFadeIn={};t.intervalForObserveInserted=void 0;t.axes.subx=n.selectAll([])};ChartInternal.prototype.initChartElements=function(){(this||e).initBar&&this.initBar();(this||e).initLine&&this.initLine();(this||e).initArc&&this.initArc();(this||e).initGauge&&this.initGauge();(this||e).initText&&this.initText()};ChartInternal.prototype.initWithData=function(t){var i=this||e,a=i.d3,o=i.config;var s,l,c=true;i.axis=new r(i);o.bindto?"function"===typeof o.bindto.node?i.selectChart=o.bindto:i.selectChart=a.select(o.bindto):i.selectChart=a.selectAll([]);if(i.selectChart.empty()){i.selectChart=a.select(document.createElement("div")).style("opacity",0);i.observeInserted(i.selectChart);c=false}i.selectChart.html("").classed("c3",true);i.data.xs={};i.data.targets=i.convertDataToTargets(t);o.data_filter&&(i.data.targets=i.data.targets.filter(o.data_filter));o.data_hide&&i.addHiddenTargetIds(true===o.data_hide?i.mapToIds(i.data.targets):o.data_hide);o.legend_hide&&i.addHiddenLegendIds(true===o.legend_hide?i.mapToIds(i.data.targets):o.legend_hide);i.isStanfordGraphType()&&i.initStanfordData();i.updateSizes();i.updateScales();i.x.domain(a.extent(i.getXDomain(i.data.targets)));i.y.domain(i.getYDomain(i.data.targets,"y"));i.y2.domain(i.getYDomain(i.data.targets,"y2"));i.subX.domain(i.x.domain());i.subY.domain(i.y.domain());i.subY2.domain(i.y2.domain());i.orgXDomain=i.x.domain();i.svg=i.selectChart.append("svg").style("overflow","hidden").on("mouseenter",(function(){return o.onmouseover.call(i)})).on("mouseleave",(function(){return o.onmouseout.call(i)}));i.config.svg_classname&&i.svg.attr("class",i.config.svg_classname);s=i.svg.append("defs");i.clipChart=i.appendClip(s,i.clipId);i.clipXAxis=i.appendClip(s,i.clipIdForXAxis);i.clipYAxis=i.appendClip(s,i.clipIdForYAxis);i.clipGrid=i.appendClip(s,i.clipIdForGrid);i.clipSubchart=i.appendClip(s,i.clipIdForSubchart);i.updateSvgSize();l=i.main=i.svg.append("g").attr("transform",i.getTranslate("main"));i.initPie&&i.initPie();i.initDragZoom&&i.initDragZoom();o.subchart_show&&i.initSubchart&&i.initSubchart();i.initTooltip&&i.initTooltip();i.initLegend&&i.initLegend();i.initTitle&&i.initTitle();i.initZoom&&i.initZoom();i.isStanfordGraphType()&&i.drawColorScale();o.subchart_show&&i.initSubchartBrush&&i.initSubchartBrush();l.append("text").attr("class",n.text+" "+n.empty).attr("text-anchor","middle").attr("dominant-baseline","middle");i.initRegion();i.initGrid();l.append("g").attr("clip-path",i.clipPath).attr("class",n.chart);o.grid_lines_front&&i.initGridLines();i.initStanfordElements();i.initEventRect();i.initChartElements();i.axis.init();i.updateTargets(i.data.targets);o.axis_x_selection&&i.brush.selectionAsValue(i.getDefaultSelection());if(c){i.updateDimension();i.config.oninit.call(i);i.redraw({withTransition:false,withTransform:true,withUpdateXDomain:true,withUpdateOrgXDomain:true,withTransitionForAxis:false})}i.bindResize();i.bindWindowFocus();i.api.element=i.selectChart.node()};ChartInternal.prototype.smoothLines=function(t,n){var r=this||e;"grid"===n&&t.each((function(){var t=r.d3.select(this||e),n=t.attr("x1"),i=t.attr("x2"),a=t.attr("y1"),o=t.attr("y2");t.attr({x1:Math.ceil(n),x2:Math.ceil(i),y1:Math.ceil(a),y2:Math.ceil(o)})}))};ChartInternal.prototype.updateSizes=function(){var t=this||e,n=t.config;var r=t.legend?t.getLegendHeight():0,i=t.legend?t.getLegendWidth():0,a=t.isLegendRight||t.isLegendInset?0:r,o=t.hasArcType(),s=n.axis_rotated||o?0:t.getHorizontalAxisHeight("x"),l=n.axis_rotated||o?0:t.getHorizontalAxisHeight("x",true),c=n.subchart_show&&!o?n.subchart_size_height+l:0;t.currentWidth=t.getCurrentWidth();t.currentHeight=t.getCurrentHeight();t.margin=n.axis_rotated?{top:t.getHorizontalAxisHeight("y2")+t.getCurrentPaddingTop(),right:o?0:t.getCurrentPaddingRight(),bottom:t.getHorizontalAxisHeight("y")+a+t.getCurrentPaddingBottom(),left:c+(o?0:t.getCurrentPaddingLeft())}:{top:4+t.getCurrentPaddingTop(),right:o?0:t.getCurrentPaddingRight(),bottom:s+c+a+t.getCurrentPaddingBottom(),left:o?0:t.getCurrentPaddingLeft()};t.margin2=n.axis_rotated?{top:t.margin.top,right:NaN,bottom:20+a,left:t.rotated_padding_left}:{top:t.currentHeight-c-a,right:NaN,bottom:l+a,left:t.margin.left};t.margin3={top:0,right:NaN,bottom:0,left:0};t.updateSizeForLegend&&t.updateSizeForLegend(r,i);t.width=t.currentWidth-t.margin.left-t.margin.right;t.height=t.currentHeight-t.margin.top-t.margin.bottom;t.width<0&&(t.width=0);t.height<0&&(t.height=0);t.width2=n.axis_rotated?t.margin.left-t.rotated_padding_left-t.rotated_padding_right:t.width;t.height2=n.axis_rotated?t.height:t.currentHeight-t.margin2.top-t.margin2.bottom;t.width2<0&&(t.width2=0);t.height2<0&&(t.height2=0);t.arcWidth=t.width-(t.isLegendRight?i+10:0);t.arcHeight=t.height-(t.isLegendRight?0:10);t.hasType("gauge")&&!n.gauge_fullCircle&&(t.arcHeight+=t.height-t.getGaugeLabelHeight());t.updateRadius&&t.updateRadius();t.isLegendRight&&o&&(t.margin3.left=t.arcWidth/2+1.1*t.radiusExpanded)};ChartInternal.prototype.updateTargets=function(t){var n=this||e,r=n.config;n.updateTargetsForText(t);n.updateTargetsForBar(t);n.updateTargetsForLine(t);n.hasArcType()&&n.updateTargetsForArc&&n.updateTargetsForArc(t);r.subchart_show&&n.updateTargetsForSubchart&&n.updateTargetsForSubchart(t);n.showTargets()};ChartInternal.prototype.showTargets=function(){var t=this||e;t.svg.selectAll("."+n.target).filter((function(e){return t.isTargetToShow(e.id)})).transition().duration(t.config.transition_duration).style("opacity",1)};ChartInternal.prototype.redraw=function(t,r){var i=this||e,a=i.main,o=i.d3,s=i.config;var l=i.getShapeIndices(i.isAreaType),c=i.getShapeIndices(i.isBarType),d=i.getShapeIndices(i.isLineType);var u,h,g,p,x,_,y,m,v,S,w,b,C;var T=i.hasArcType();var A,I,P,L,V;var G,E,O;var R,k,F,D;var X=i.filterTargetsToShow(i.data.targets),M,z,H,N;var Y=i.xv.bind(i),B,j;t=t||{};u=getOption(t,"withY",true);h=getOption(t,"withSubchart",true);g=getOption(t,"withTransition",true);_=getOption(t,"withTransform",false);y=getOption(t,"withUpdateXDomain",false);m=getOption(t,"withUpdateOrgXDomain",false);v=getOption(t,"withTrimXDomain",true);C=getOption(t,"withUpdateXAxis",y);S=getOption(t,"withLegend",false);w=getOption(t,"withEventRect",true);b=getOption(t,"withDimension",true);p=getOption(t,"withTransitionForExit",g);x=getOption(t,"withTransitionForAxis",g);G=g?s.transition_duration:0;E=p?G:0;O=x?G:0;r=r||i.axis.generateTransitions(O);S&&s.legend_show?i.updateLegend(i.mapToIds(i.data.targets),t,r):b&&i.updateDimension(true);i.isCategorized()&&0===X.length&&i.x.domain([0,i.axes.x.selectAll(".tick").size()]);if(X.length){i.updateXDomain(X,y,m,v);s.axis_x_tick_values||(M=i.axis.updateXAxisTickValues(X))}else{i.xAxis.tickValues([]);i.subXAxis.tickValues([])}s.zoom_rescale&&!t.flow&&(N=i.x.orgDomain());i.y.domain(i.getYDomain(X,"y",N));i.y2.domain(i.getYDomain(X,"y2",N));!s.axis_y_tick_values&&s.axis_y_tick_count&&i.yAxis.tickValues(i.axis.generateTickValues(i.y.domain(),s.axis_y_tick_count));!s.axis_y2_tick_values&&s.axis_y2_tick_count&&i.y2Axis.tickValues(i.axis.generateTickValues(i.y2.domain(),s.axis_y2_tick_count));i.axis.redraw(O,T);i.axis.updateLabels(g);if((y||C)&&X.length)if(s.axis_x_tick_culling&&M){for(z=1;z<M.length;z++)if(M.length/z<s.axis_x_tick_culling_max){H=z;break}i.svg.selectAll("."+n.axisX+" .tick text").each((function(t){var n=M.indexOf(t);n>=0&&o.select(this||e).style("display",n%H?"none":"block")}))}else i.svg.selectAll("."+n.axisX+" .tick text").style("display","block");A=i.generateDrawArea?i.generateDrawArea(l,false):void 0;I=i.generateDrawBar?i.generateDrawBar(c):void 0;P=i.generateDrawLine?i.generateDrawLine(d,false):void 0;L=i.generateXYForText(l,c,d,true);V=i.generateXYForText(l,c,d,false);i.updateCircleY();B=(i.config.axis_rotated?i.circleY:i.circleX).bind(i);j=(i.config.axis_rotated?i.circleX:i.circleY).bind(i);if(u){i.subY.domain(i.getYDomain(X,"y"));i.subY2.domain(i.getYDomain(X,"y2"))}i.updateXgridFocus();a.select("text."+n.text+"."+n.empty).attr("x",i.width/2).attr("y",i.height/2).text(s.data_empty_label_text).transition().style("opacity",X.length?0:1);w&&i.redrawEventRect();i.updateGrid(G);i.updateStanfordElements(G);i.updateRegion(G);i.updateBar(E);i.updateLine(E);i.updateArea(E);i.updateCircle(B,j);i.hasDataLabel()&&i.updateText(L,V,E);i.redrawTitle&&i.redrawTitle();i.redrawArc&&i.redrawArc(G,E,_);s.subchart_show&&i.redrawSubchart&&i.redrawSubchart(h,r,G,E,l,c,d);i.isStanfordGraphType()&&i.drawColorScale();a.selectAll("."+n.selectedCircles).filter(i.isBarType.bind(i)).selectAll("circle").remove();t.flow&&(F=i.generateFlow({targets:X,flow:t.flow,duration:t.flow.duration,drawBar:I,drawLine:P,drawArea:A,cx:B,cy:j,xv:Y,xForText:L,yForText:V}));if(G&&i.isTabVisible()){D=o.transition().duration(G);R=[];[i.redrawBar(I,true,D),i.redrawLine(P,true,D),i.redrawArea(A,true,D),i.redrawCircle(B,j,true,D),i.redrawText(L,V,t.flow,true,D),i.redrawRegion(true,D),i.redrawGrid(true,D)].forEach((function(t){t.forEach((function(t){R.push(t)}))}));k=i.generateWait();R.forEach((function(t){k.add(t)}));k((function(){F&&F();s.onrendered&&s.onrendered.call(i)}))}else{i.redrawBar(I);i.redrawLine(P);i.redrawArea(A);i.redrawCircle(B,j);i.redrawText(L,V,t.flow);i.redrawRegion();i.redrawGrid();F&&F();s.onrendered&&s.onrendered.call(i)}i.mapToIds(i.data.targets).forEach((function(t){i.withoutFadeIn[t]=true}))};ChartInternal.prototype.updateAndRedraw=function(t){var n=this||e,r=n.config,i;t=t||{};t.withTransition=getOption(t,"withTransition",true);t.withTransform=getOption(t,"withTransform",false);t.withLegend=getOption(t,"withLegend",false);t.withUpdateXDomain=getOption(t,"withUpdateXDomain",true);t.withUpdateOrgXDomain=getOption(t,"withUpdateOrgXDomain",true);t.withTransitionForExit=false;t.withTransitionForTransform=getOption(t,"withTransitionForTransform",t.withTransition);n.updateSizes();if(!(t.withLegend&&r.legend_show)){i=n.axis.generateTransitions(t.withTransitionForAxis?r.transition_duration:0);n.updateScales();n.updateSvgSize();n.transformAll(t.withTransitionForTransform,i)}n.redraw(t,i)};ChartInternal.prototype.redrawWithoutRescale=function(){this.redraw({withY:false,withSubchart:false,withEventRect:false,withTransitionForAxis:false})};ChartInternal.prototype.isTimeSeries=function(){return"timeseries"===(this||e).config.axis_x_type};ChartInternal.prototype.isCategorized=function(){return(this||e).config.axis_x_type.indexOf("categor")>=0};ChartInternal.prototype.isCustomX=function(){var t=this||e,n=t.config;return!t.isTimeSeries()&&(n.data_x||notEmpty(n.data_xs))};ChartInternal.prototype.isTimeSeriesY=function(){return"timeseries"===(this||e).config.axis_y_type};ChartInternal.prototype.getTranslate=function(t){var n=this||e,r=n.config,i,a;if("main"===t){i=asHalfPixel(n.margin.left);a=asHalfPixel(n.margin.top)}else if("context"===t){i=asHalfPixel(n.margin2.left);a=asHalfPixel(n.margin2.top)}else if("legend"===t){i=n.margin3.left;a=n.margin3.top}else if("x"===t){i=0;a=r.axis_rotated?0:n.height}else if("y"===t){i=0;a=r.axis_rotated?n.height:0}else if("y2"===t){i=r.axis_rotated?0:n.width;a=r.axis_rotated?1:0}else if("subx"===t){i=0;a=r.axis_rotated?0:n.height2}else if("arc"===t){i=n.arcWidth/2;a=n.arcHeight/2-(n.hasType("gauge")?6:0)}return"translate("+i+","+a+")"};ChartInternal.prototype.initialOpacity=function(t){return null!==t.value&&(this||e).withoutFadeIn[t.id]?1:0};ChartInternal.prototype.initialOpacityForCircle=function(t){return null!==t.value&&(this||e).withoutFadeIn[t.id]?this.opacityForCircle(t):0};ChartInternal.prototype.opacityForCircle=function(t){var n=isFunction((this||e).config.point_show)?(this||e).config.point_show(t):(this||e).config.point_show;var r=n||this.isStanfordType(t)?1:0;return isValue(t.value)?this.isScatterType(t)?.5:r:0};ChartInternal.prototype.opacityForText=function(){return this.hasDataLabel()?1:0};ChartInternal.prototype.xx=function(t){return t?this.x(t.x):null};ChartInternal.prototype.xvCustom=function(t,n){var r=this||e,i=n?t[n]:t.value;r.isTimeSeries()?i=r.parseDate(t.value):r.isCategorized()&&"string"===typeof t.value&&(i=r.config.axis_x_categories.indexOf(t.value));return Math.ceil(r.x(i))};ChartInternal.prototype.yvCustom=function(t,n){var r=this||e,i=t.axis&&"y2"===t.axis?r.y2:r.y,a=n?t[n]:t.value;return Math.ceil(i(a))};ChartInternal.prototype.xv=function(t){var n=this||e,r=t.value;n.isTimeSeries()?r=n.parseDate(t.value):n.isCategorized()&&"string"===typeof t.value&&(r=n.config.axis_x_categories.indexOf(t.value));return Math.ceil(n.x(r))};ChartInternal.prototype.yv=function(t){var n=this||e,r=t.axis&&"y2"===t.axis?n.y2:n.y;return Math.ceil(r(t.value))};ChartInternal.prototype.subxx=function(t){return t?this.subX(t.x):null};ChartInternal.prototype.transformMain=function(t,r){var i=this||e,a,o,s;if(r&&r.axisX)a=r.axisX;else{a=i.main.select("."+n.axisX);t&&(a=a.transition())}if(r&&r.axisY)o=r.axisY;else{o=i.main.select("."+n.axisY);t&&(o=o.transition())}if(r&&r.axisY2)s=r.axisY2;else{s=i.main.select("."+n.axisY2);t&&(s=s.transition())}(t?i.main.transition():i.main).attr("transform",i.getTranslate("main"));a.attr("transform",i.getTranslate("x"));o.attr("transform",i.getTranslate("y"));s.attr("transform",i.getTranslate("y2"));i.main.select("."+n.chartArcs).attr("transform",i.getTranslate("arc"))};ChartInternal.prototype.transformAll=function(t,n){var r=this||e;r.transformMain(t,n);r.config.subchart_show&&r.transformContext(t,n);r.legend&&r.transformLegend(t)};ChartInternal.prototype.updateSvgSize=function(){var t=this||e,r=t.svg.select("."+n.brush+" .overlay");t.svg.attr("width",t.currentWidth).attr("height",t.currentHeight);t.svg.selectAll(["#"+t.clipId,"#"+t.clipIdForGrid]).select("rect").attr("width",t.width).attr("height",t.height);t.svg.select("#"+t.clipIdForXAxis).select("rect").attr("x",t.getXAxisClipX.bind(t)).attr("y",t.getXAxisClipY.bind(t)).attr("width",t.getXAxisClipWidth.bind(t)).attr("height",t.getXAxisClipHeight.bind(t));t.svg.select("#"+t.clipIdForYAxis).select("rect").attr("x",t.getYAxisClipX.bind(t)).attr("y",t.getYAxisClipY.bind(t)).attr("width",t.getYAxisClipWidth.bind(t)).attr("height",t.getYAxisClipHeight.bind(t));t.svg.select("#"+t.clipIdForSubchart).select("rect").attr("width",t.width).attr("height",r.size()&&r.attr("height")||0);t.selectChart.style("max-height",t.currentHeight+"px")};ChartInternal.prototype.updateDimension=function(t){var n=this||e;if(!t)if(n.config.axis_rotated){n.axes.x.call(n.xAxis);n.axes.subx.call(n.subXAxis)}else{n.axes.y.call(n.yAxis);n.axes.y2.call(n.y2Axis)}n.updateSizes();n.updateScales();n.updateSvgSize();n.transformAll(false)};ChartInternal.prototype.observeInserted=function(t){var n=this||e,r;if("undefined"!==typeof MutationObserver){r=new MutationObserver((function(e){e.forEach((function(e){if("childList"===e.type&&e.previousSibling){r.disconnect();n.intervalForObserveInserted=window.setInterval((function(){if(t.node().parentNode){window.clearInterval(n.intervalForObserveInserted);n.updateDimension();n.brush&&n.brush.update();n.config.oninit.call(n);n.redraw({withTransform:true,withUpdateXDomain:true,withUpdateOrgXDomain:true,withTransition:false,withTransitionForTransform:false,withLegend:true});t.transition().style("opacity",1)}}),10)}}))}));r.observe(t.node(),{attributes:true,childList:true,characterData:true})}else window.console.error("MutationObserver not defined.")};ChartInternal.prototype.bindResize=function(){var t=this||e,n=t.config;t.resizeFunction=t.generateResize();t.resizeFunction.add((function(){n.onresize.call(t)}));n.resize_auto&&t.resizeFunction.add((function(){void 0!==t.resizeTimeout&&window.clearTimeout(t.resizeTimeout);t.resizeTimeout=window.setTimeout((function(){delete t.resizeTimeout;t.updateAndRedraw({withUpdateXDomain:false,withUpdateOrgXDomain:false,withTransition:false,withTransitionForTransform:false,withLegend:true});t.brush&&t.brush.update()}),100)}));t.resizeFunction.add((function(){n.onresized.call(t)}));t.resizeIfElementDisplayed=function(){null!=t.api&&t.api.element.offsetParent&&t.resizeFunction()};window.addEventListener("resize",t.resizeIfElementDisplayed,false)};ChartInternal.prototype.bindWindowFocus=function(){var t=this||e;if(!(this||e).windowFocusHandler){(this||e).windowFocusHandler=function(){t.redraw()};window.addEventListener("focus",(this||e).windowFocusHandler)}};ChartInternal.prototype.unbindWindowFocus=function(){window.removeEventListener("focus",(this||e).windowFocusHandler);delete(this||e).windowFocusHandler};ChartInternal.prototype.generateResize=function(){var t=[];function callResizeFunctions(){t.forEach((function(t){t()}))}callResizeFunctions.add=function(e){t.push(e)};callResizeFunctions.remove=function(e){for(var n=0;n<t.length;n++)if(t[n]===e){t.splice(n,1);break}};return callResizeFunctions};ChartInternal.prototype.endall=function(t,n){var r=0;t.each((function(){++r})).on("end",(function(){--r||n.apply(this||e,arguments)}))};ChartInternal.prototype.generateWait=function(){var t=this||e;var n=[],f=function(e){var r=setInterval((function(){if(t.isTabVisible()){var i=0;n.forEach((function(t){if(t.empty())i+=1;else try{t.transition()}catch(t){i+=1}}));if(i===n.length){clearInterval(r);e&&e()}}}),50)};f.add=function(t){n.push(t)};return f};ChartInternal.prototype.parseDate=function(t){var n=this||e,r;t instanceof Date?r=t:"string"===typeof t?r=n.dataTimeParse(t):"object"===typeof t?r=new Date(+t):"number"!==typeof t||isNaN(t)||(r=new Date(+t));r&&!isNaN(+r)||window.console.error("Failed to parse x '"+t+"' to Date object");return r};ChartInternal.prototype.isTabVisible=function(){return!document.hidden};ChartInternal.prototype.getPathBox=getPathBox;ChartInternal.prototype.CLASS=n;(function(){if(!("SVGPathSeg"in window)){window.SVGPathSeg=function(t,n,r){(this||e).pathSegType=t;(this||e).pathSegTypeAsLetter=n;(this||e)._owningPathSegList=r};window.SVGPathSeg.prototype.classname="SVGPathSeg";window.SVGPathSeg.PATHSEG_UNKNOWN=0;window.SVGPathSeg.PATHSEG_CLOSEPATH=1;window.SVGPathSeg.PATHSEG_MOVETO_ABS=2;window.SVGPathSeg.PATHSEG_MOVETO_REL=3;window.SVGPathSeg.PATHSEG_LINETO_ABS=4;window.SVGPathSeg.PATHSEG_LINETO_REL=5;window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_ABS=6;window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_REL=7;window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_ABS=8;window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_REL=9;window.SVGPathSeg.PATHSEG_ARC_ABS=10;window.SVGPathSeg.PATHSEG_ARC_REL=11;window.SVGPathSeg.PATHSEG_LINETO_HORIZONTAL_ABS=12;window.SVGPathSeg.PATHSEG_LINETO_HORIZONTAL_REL=13;window.SVGPathSeg.PATHSEG_LINETO_VERTICAL_ABS=14;window.SVGPathSeg.PATHSEG_LINETO_VERTICAL_REL=15;window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_SMOOTH_ABS=16;window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_SMOOTH_REL=17;window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_SMOOTH_ABS=18;window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_SMOOTH_REL=19;window.SVGPathSeg.prototype._segmentChanged=function(){(this||e)._owningPathSegList&&(this||e)._owningPathSegList.segmentChanged(this||e)};window.SVGPathSegClosePath=function(t){window.SVGPathSeg.call(this||e,window.SVGPathSeg.PATHSEG_CLOSEPATH,"z",t)};window.SVGPathSegClosePath.prototype=Object.create(window.SVGPathSeg.prototype);window.SVGPathSegClosePath.prototype.toString=function(){return"[object SVGPathSegClosePath]"};window.SVGPathSegClosePath.prototype._asPathString=function(){return(this||e).pathSegTypeAsLetter};window.SVGPathSegClosePath.prototype.clone=function(){return new window.SVGPathSegClosePath(void 0)};window.SVGPathSegMovetoAbs=function(t,n,r){window.SVGPathSeg.call(this||e,window.SVGPathSeg.PATHSEG_MOVETO_ABS,"M",t);(this||e)._x=n;(this||e)._y=r};window.SVGPathSegMovetoAbs.prototype=Object.create(window.SVGPathSeg.prototype);window.SVGPathSegMovetoAbs.prototype.toString=function(){return"[object SVGPathSegMovetoAbs]"};window.SVGPathSegMovetoAbs.prototype._asPathString=function(){return(this||e).pathSegTypeAsLetter+" "+(this||e)._x+" "+(this||e)._y};window.SVGPathSegMovetoAbs.prototype.clone=function(){return new window.SVGPathSegMovetoAbs(void 0,(this||e)._x,(this||e)._y)};Object.defineProperty(window.SVGPathSegMovetoAbs.prototype,"x",{get:function(){return(this||e)._x},set:function(t){(this||e)._x=t;this._segmentChanged()},enumerable:true});Object.defineProperty(window.SVGPathSegMovetoAbs.prototype,"y",{get:function(){return(this||e)._y},set:function(t){(this||e)._y=t;this._segmentChanged()},enumerable:true});window.SVGPathSegMovetoRel=function(t,n,r){window.SVGPathSeg.call(this||e,window.SVGPathSeg.PATHSEG_MOVETO_REL,"m",t);(this||e)._x=n;(this||e)._y=r};window.SVGPathSegMovetoRel.prototype=Object.create(window.SVGPathSeg.prototype);window.SVGPathSegMovetoRel.prototype.toString=function(){return"[object SVGPathSegMovetoRel]"};window.SVGPathSegMovetoRel.prototype._asPathString=function(){return(this||e).pathSegTypeAsLetter+" "+(this||e)._x+" "+(this||e)._y};window.SVGPathSegMovetoRel.prototype.clone=function(){return new window.SVGPathSegMovetoRel(void 0,(this||e)._x,(this||e)._y)};Object.defineProperty(window.SVGPathSegMovetoRel.prototype,"x",{get:function(){return(this||e)._x},set:function(t){(this||e)._x=t;this._segmentChanged()},enumerable:true});Object.defineProperty(window.SVGPathSegMovetoRel.prototype,"y",{get:function(){return(this||e)._y},set:function(t){(this||e)._y=t;this._segmentChanged()},enumerable:true});window.SVGPathSegLinetoAbs=function(t,n,r){window.SVGPathSeg.call(this||e,window.SVGPathSeg.PATHSEG_LINETO_ABS,"L",t);(this||e)._x=n;(this||e)._y=r};window.SVGPathSegLinetoAbs.prototype=Object.create(window.SVGPathSeg.prototype);window.SVGPathSegLinetoAbs.prototype.toString=function(){return"[object SVGPathSegLinetoAbs]"};window.SVGPathSegLinetoAbs.prototype._asPathString=function(){return(this||e).pathSegTypeAsLetter+" "+(this||e)._x+" "+(this||e)._y};window.SVGPathSegLinetoAbs.prototype.clone=function(){return new window.SVGPathSegLinetoAbs(void 0,(this||e)._x,(this||e)._y)};Object.defineProperty(window.SVGPathSegLinetoAbs.prototype,"x",{get:function(){return(this||e)._x},set:function(t){(this||e)._x=t;this._segmentChanged()},enumerable:true});Object.defineProperty(window.SVGPathSegLinetoAbs.prototype,"y",{get:function(){return(this||e)._y},set:function(t){(this||e)._y=t;this._segmentChanged()},enumerable:true});window.SVGPathSegLinetoRel=function(t,n,r){window.SVGPathSeg.call(this||e,window.SVGPathSeg.PATHSEG_LINETO_REL,"l",t);(this||e)._x=n;(this||e)._y=r};window.SVGPathSegLinetoRel.prototype=Object.create(window.SVGPathSeg.prototype);window.SVGPathSegLinetoRel.prototype.toString=function(){return"[object SVGPathSegLinetoRel]"};window.SVGPathSegLinetoRel.prototype._asPathString=function(){return(this||e).pathSegTypeAsLetter+" "+(this||e)._x+" "+(this||e)._y};window.SVGPathSegLinetoRel.prototype.clone=function(){return new window.SVGPathSegLinetoRel(void 0,(this||e)._x,(this||e)._y)};Object.defineProperty(window.SVGPathSegLinetoRel.prototype,"x",{get:function(){return(this||e)._x},set:function(t){(this||e)._x=t;this._segmentChanged()},enumerable:true});Object.defineProperty(window.SVGPathSegLinetoRel.prototype,"y",{get:function(){return(this||e)._y},set:function(t){(this||e)._y=t;this._segmentChanged()},enumerable:true});window.SVGPathSegCurvetoCubicAbs=function(t,n,r,i,a,o,s){window.SVGPathSeg.call(this||e,window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_ABS,"C",t);(this||e)._x=n;(this||e)._y=r;(this||e)._x1=i;(this||e)._y1=a;(this||e)._x2=o;(this||e)._y2=s};window.SVGPathSegCurvetoCubicAbs.prototype=Object.create(window.SVGPathSeg.prototype);window.SVGPathSegCurvetoCubicAbs.prototype.toString=function(){return"[object SVGPathSegCurvetoCubicAbs]"};window.SVGPathSegCurvetoCubicAbs.prototype._asPathString=function(){return(this||e).pathSegTypeAsLetter+" "+(this||e)._x1+" "+(this||e)._y1+" "+(this||e)._x2+" "+(this||e)._y2+" "+(this||e)._x+" "+(this||e)._y};window.SVGPathSegCurvetoCubicAbs.prototype.clone=function(){return new window.SVGPathSegCurvetoCubicAbs(void 0,(this||e)._x,(this||e)._y,(this||e)._x1,(this||e)._y1,(this||e)._x2,(this||e)._y2)};Object.defineProperty(window.SVGPathSegCurvetoCubicAbs.prototype,"x",{get:function(){return(this||e)._x},set:function(t){(this||e)._x=t;this._segmentChanged()},enumerable:true});Object.defineProperty(window.SVGPathSegCurvetoCubicAbs.prototype,"y",{get:function(){return(this||e)._y},set:function(t){(this||e)._y=t;this._segmentChanged()},enumerable:true});Object.defineProperty(window.SVGPathSegCurvetoCubicAbs.prototype,"x1",{get:function(){return(this||e)._x1},set:function(t){(this||e)._x1=t;this._segmentChanged()},enumerable:true});Object.defineProperty(window.SVGPathSegCurvetoCubicAbs.prototype,"y1",{get:function(){return(this||e)._y1},set:function(t){(this||e)._y1=t;this._segmentChanged()},enumerable:true});Object.defineProperty(window.SVGPathSegCurvetoCubicAbs.prototype,"x2",{get:function(){return(this||e)._x2},set:function(t){(this||e)._x2=t;this._segmentChanged()},enumerable:true});Object.defineProperty(window.SVGPathSegCurvetoCubicAbs.prototype,"y2",{get:function(){return(this||e)._y2},set:function(t){(this||e)._y2=t;this._segmentChanged()},enumerable:true});window.SVGPathSegCurvetoCubicRel=function(t,n,r,i,a,o,s){window.SVGPathSeg.call(this||e,window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_REL,"c",t);(this||e)._x=n;(this||e)._y=r;(this||e)._x1=i;(this||e)._y1=a;(this||e)._x2=o;(this||e)._y2=s};window.SVGPathSegCurvetoCubicRel.prototype=Object.create(window.SVGPathSeg.prototype);window.SVGPathSegCurvetoCubicRel.prototype.toString=function(){return"[object SVGPathSegCurvetoCubicRel]"};window.SVGPathSegCurvetoCubicRel.prototype._asPathString=function(){return(this||e).pathSegTypeAsLetter+" "+(this||e)._x1+" "+(this||e)._y1+" "+(this||e)._x2+" "+(this||e)._y2+" "+(this||e)._x+" "+(this||e)._y};window.SVGPathSegCurvetoCubicRel.prototype.clone=function(){return new window.SVGPathSegCurvetoCubicRel(void 0,(this||e)._x,(this||e)._y,(this||e)._x1,(this||e)._y1,(this||e)._x2,(this||e)._y2)};Object.defineProperty(window.SVGPathSegCurvetoCubicRel.prototype,"x",{get:function(){return(this||e)._x},set:function(t){(this||e)._x=t;this._segmentChanged()},enumerable:true});Object.defineProperty(window.SVGPathSegCurvetoCubicRel.prototype,"y",{get:function(){return(this||e)._y},set:function(t){(this||e)._y=t;this._segmentChanged()},enumerable:true});Object.defineProperty(window.SVGPathSegCurvetoCubicRel.prototype,"x1",{get:function(){return(this||e)._x1},set:function(t){(this||e)._x1=t;this._segmentChanged()},enumerable:true});Object.defineProperty(window.SVGPathSegCurvetoCubicRel.prototype,"y1",{get:function(){return(this||e)._y1},set:function(t){(this||e)._y1=t;this._segmentChanged()},enumerable:true});Object.defineProperty(window.SVGPathSegCurvetoCubicRel.prototype,"x2",{get:function(){return(this||e)._x2},set:function(t){(this||e)._x2=t;this._segmentChanged()},enumerable:true});Object.defineProperty(window.SVGPathSegCurvetoCubicRel.prototype,"y2",{get:function(){return(this||e)._y2},set:function(t){(this||e)._y2=t;this._segmentChanged()},enumerable:true});window.SVGPathSegCurvetoQuadraticAbs=function(t,n,r,i,a){window.SVGPathSeg.call(this||e,window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_ABS,"Q",t);(this||e)._x=n;(this||e)._y=r;(this||e)._x1=i;(this||e)._y1=a};window.SVGPathSegCurvetoQuadraticAbs.prototype=Object.create(window.SVGPathSeg.prototype);window.SVGPathSegCurvetoQuadraticAbs.prototype.toString=function(){return"[object SVGPathSegCurvetoQuadraticAbs]"};window.SVGPathSegCurvetoQuadraticAbs.prototype._asPathString=function(){return(this||e).pathSegTypeAsLetter+" "+(this||e)._x1+" "+(this||e)._y1+" "+(this||e)._x+" "+(this||e)._y};window.SVGPathSegCurvetoQuadraticAbs.prototype.clone=function(){return new window.SVGPathSegCurvetoQuadraticAbs(void 0,(this||e)._x,(this||e)._y,(this||e)._x1,(this||e)._y1)};Object.defineProperty(window.SVGPathSegCurvetoQuadraticAbs.prototype,"x",{get:function(){return(this||e)._x},set:function(t){(this||e)._x=t;this._segmentChanged()},enumerable:true});Object.defineProperty(window.SVGPathSegCurvetoQuadraticAbs.prototype,"y",{get:function(){return(this||e)._y},set:function(t){(this||e)._y=t;this._segmentChanged()},enumerable:true});Object.defineProperty(window.SVGPathSegCurvetoQuadraticAbs.prototype,"x1",{get:function(){return(this||e)._x1},set:function(t){(this||e)._x1=t;this._segmentChanged()},enumerable:true});Object.defineProperty(window.SVGPathSegCurvetoQuadraticAbs.prototype,"y1",{get:function(){return(this||e)._y1},set:function(t){(this||e)._y1=t;this._segmentChanged()},enumerable:true});window.SVGPathSegCurvetoQuadraticRel=function(t,n,r,i,a){window.SVGPathSeg.call(this||e,window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_REL,"q",t);(this||e)._x=n;(this||e)._y=r;(this||e)._x1=i;(this||e)._y1=a};window.SVGPathSegCurvetoQuadraticRel.prototype=Object.create(window.SVGPathSeg.prototype);window.SVGPathSegCurvetoQuadraticRel.prototype.toString=function(){return"[object SVGPathSegCurvetoQuadraticRel]"};window.SVGPathSegCurvetoQuadraticRel.prototype._asPathString=function(){return(this||e).pathSegTypeAsLetter+" "+(this||e)._x1+" "+(this||e)._y1+" "+(this||e)._x+" "+(this||e)._y};window.SVGPathSegCurvetoQuadraticRel.prototype.clone=function(){return new window.SVGPathSegCurvetoQuadraticRel(void 0,(this||e)._x,(this||e)._y,(this||e)._x1,(this||e)._y1)};Object.defineProperty(window.SVGPathSegCurvetoQuadraticRel.prototype,"x",{get:function(){return(this||e)._x},set:function(t){(this||e)._x=t;this._segmentChanged()},enumerable:true});Object.defineProperty(window.SVGPathSegCurvetoQuadraticRel.prototype,"y",{get:function(){return(this||e)._y},set:function(t){(this||e)._y=t;this._segmentChanged()},enumerable:true});Object.defineProperty(window.SVGPathSegCurvetoQuadraticRel.prototype,"x1",{get:function(){return(this||e)._x1},set:function(t){(this||e)._x1=t;this._segmentChanged()},enumerable:true});Object.defineProperty(window.SVGPathSegCurvetoQuadraticRel.prototype,"y1",{get:function(){return(this||e)._y1},set:function(t){(this||e)._y1=t;this._segmentChanged()},enumerable:true});window.SVGPathSegArcAbs=function(t,n,r,i,a,o,s,l){window.SVGPathSeg.call(this||e,window.SVGPathSeg.PATHSEG_ARC_ABS,"A",t);(this||e)._x=n;(this||e)._y=r;(this||e)._r1=i;(this||e)._r2=a;(this||e)._angle=o;(this||e)._largeArcFlag=s;(this||e)._sweepFlag=l};window.SVGPathSegArcAbs.prototype=Object.create(window.SVGPathSeg.prototype);window.SVGPathSegArcAbs.prototype.toString=function(){return"[object SVGPathSegArcAbs]"};window.SVGPathSegArcAbs.prototype._asPathString=function(){return(this||e).pathSegTypeAsLetter+" "+(this||e)._r1+" "+(this||e)._r2+" "+(this||e)._angle+" "+((this||e)._largeArcFlag?"1":"0")+" "+((this||e)._sweepFlag?"1":"0")+" "+(this||e)._x+" "+(this||e)._y};window.SVGPathSegArcAbs.prototype.clone=function(){return new window.SVGPathSegArcAbs(void 0,(this||e)._x,(this||e)._y,(this||e)._r1,(this||e)._r2,(this||e)._angle,(this||e)._largeArcFlag,(this||e)._sweepFlag)};Object.defineProperty(window.SVGPathSegArcAbs.prototype,"x",{get:function(){return(this||e)._x},set:function(t){(this||e)._x=t;this._segmentChanged()},enumerable:true});Object.defineProperty(window.SVGPathSegArcAbs.prototype,"y",{get:function(){return(this||e)._y},set:function(t){(this||e)._y=t;this._segmentChanged()},enumerable:true});Object.defineProperty(window.SVGPathSegArcAbs.prototype,"r1",{get:function(){return(this||e)._r1},set:function(t){(this||e)._r1=t;this._segmentChanged()},enumerable:true});Object.defineProperty(window.SVGPathSegArcAbs.prototype,"r2",{get:function(){return(this||e)._r2},set:function(t){(this||e)._r2=t;this._segmentChanged()},enumerable:true});Object.defineProperty(window.SVGPathSegArcAbs.prototype,"angle",{get:function(){return(this||e)._angle},set:function(t){(this||e)._angle=t;this._segmentChanged()},enumerable:true});Object.defineProperty(window.SVGPathSegArcAbs.prototype,"largeArcFlag",{get:function(){return(this||e)._largeArcFlag},set:function(t){(this||e)._largeArcFlag=t;this._segmentChanged()},enumerable:true});Object.defineProperty(window.SVGPathSegArcAbs.prototype,"sweepFlag",{get:function(){return(this||e)._sweepFlag},set:function(t){(this||e)._sweepFlag=t;this._segmentChanged()},enumerable:true});window.SVGPathSegArcRel=function(t,n,r,i,a,o,s,l){window.SVGPathSeg.call(this||e,window.SVGPathSeg.PATHSEG_ARC_REL,"a",t);(this||e)._x=n;(this||e)._y=r;(this||e)._r1=i;(this||e)._r2=a;(this||e)._angle=o;(this||e)._largeArcFlag=s;(this||e)._sweepFlag=l};window.SVGPathSegArcRel.prototype=Object.create(window.SVGPathSeg.prototype);window.SVGPathSegArcRel.prototype.toString=function(){return"[object SVGPathSegArcRel]"};window.SVGPathSegArcRel.prototype._asPathString=function(){return(this||e).pathSegTypeAsLetter+" "+(this||e)._r1+" "+(this||e)._r2+" "+(this||e)._angle+" "+((this||e)._largeArcFlag?"1":"0")+" "+((this||e)._sweepFlag?"1":"0")+" "+(this||e)._x+" "+(this||e)._y};window.SVGPathSegArcRel.prototype.clone=function(){return new window.SVGPathSegArcRel(void 0,(this||e)._x,(this||e)._y,(this||e)._r1,(this||e)._r2,(this||e)._angle,(this||e)._largeArcFlag,(this||e)._sweepFlag)};Object.defineProperty(window.SVGPathSegArcRel.prototype,"x",{get:function(){return(this||e)._x},set:function(t){(this||e)._x=t;this._segmentChanged()},enumerable:true});Object.defineProperty(window.SVGPathSegArcRel.prototype,"y",{get:function(){return(this||e)._y},set:function(t){(this||e)._y=t;this._segmentChanged()},enumerable:true});Object.defineProperty(window.SVGPathSegArcRel.prototype,"r1",{get:function(){return(this||e)._r1},set:function(t){(this||e)._r1=t;this._segmentChanged()},enumerable:true});Object.defineProperty(window.SVGPathSegArcRel.prototype,"r2",{get:function(){return(this||e)._r2},set:function(t){(this||e)._r2=t;this._segmentChanged()},enumerable:true});Object.defineProperty(window.SVGPathSegArcRel.prototype,"angle",{get:function(){return(this||e)._angle},set:function(t){(this||e)._angle=t;this._segmentChanged()},enumerable:true});Object.defineProperty(window.SVGPathSegArcRel.prototype,"largeArcFlag",{get:function(){return(this||e)._largeArcFlag},set:function(t){(this||e)._largeArcFlag=t;this._segmentChanged()},enumerable:true});Object.defineProperty(window.SVGPathSegArcRel.prototype,"sweepFlag",{get:function(){return(this||e)._sweepFlag},set:function(t){(this||e)._sweepFlag=t;this._segmentChanged()},enumerable:true});window.SVGPathSegLinetoHorizontalAbs=function(t,n){window.SVGPathSeg.call(this||e,window.SVGPathSeg.PATHSEG_LINETO_HORIZONTAL_ABS,"H",t);(this||e)._x=n};window.SVGPathSegLinetoHorizontalAbs.prototype=Object.create(window.SVGPathSeg.prototype);window.SVGPathSegLinetoHorizontalAbs.prototype.toString=function(){return"[object SVGPathSegLinetoHorizontalAbs]"};window.SVGPathSegLinetoHorizontalAbs.prototype._asPathString=function(){return(this||e).pathSegTypeAsLetter+" "+(this||e)._x};window.SVGPathSegLinetoHorizontalAbs.prototype.clone=function(){return new window.SVGPathSegLinetoHorizontalAbs(void 0,(this||e)._x)};Object.defineProperty(window.SVGPathSegLinetoHorizontalAbs.prototype,"x",{get:function(){return(this||e)._x},set:function(t){(this||e)._x=t;this._segmentChanged()},enumerable:true});window.SVGPathSegLinetoHorizontalRel=function(t,n){window.SVGPathSeg.call(this||e,window.SVGPathSeg.PATHSEG_LINETO_HORIZONTAL_REL,"h",t);(this||e)._x=n};window.SVGPathSegLinetoHorizontalRel.prototype=Object.create(window.SVGPathSeg.prototype);window.SVGPathSegLinetoHorizontalRel.prototype.toString=function(){return"[object SVGPathSegLinetoHorizontalRel]"};window.SVGPathSegLinetoHorizontalRel.prototype._asPathString=function(){return(this||e).pathSegTypeAsLetter+" "+(this||e)._x};window.SVGPathSegLinetoHorizontalRel.prototype.clone=function(){return new window.SVGPathSegLinetoHorizontalRel(void 0,(this||e)._x)};Object.defineProperty(window.SVGPathSegLinetoHorizontalRel.prototype,"x",{get:function(){return(this||e)._x},set:function(t){(this||e)._x=t;this._segmentChanged()},enumerable:true});window.SVGPathSegLinetoVerticalAbs=function(t,n){window.SVGPathSeg.call(this||e,window.SVGPathSeg.PATHSEG_LINETO_VERTICAL_ABS,"V",t);(this||e)._y=n};window.SVGPathSegLinetoVerticalAbs.prototype=Object.create(window.SVGPathSeg.prototype);window.SVGPathSegLinetoVerticalAbs.prototype.toString=function(){return"[object SVGPathSegLinetoVerticalAbs]"};window.SVGPathSegLinetoVerticalAbs.prototype._asPathString=function(){return(this||e).pathSegTypeAsLetter+" "+(this||e)._y};window.SVGPathSegLinetoVerticalAbs.prototype.clone=function(){return new window.SVGPathSegLinetoVerticalAbs(void 0,(this||e)._y)};Object.defineProperty(window.SVGPathSegLinetoVerticalAbs.prototype,"y",{get:function(){return(this||e)._y},set:function(t){(this||e)._y=t;this._segmentChanged()},enumerable:true});window.SVGPathSegLinetoVerticalRel=function(t,n){window.SVGPathSeg.call(this||e,window.SVGPathSeg.PATHSEG_LINETO_VERTICAL_REL,"v",t);(this||e)._y=n};window.SVGPathSegLinetoVerticalRel.prototype=Object.create(window.SVGPathSeg.prototype);window.SVGPathSegLinetoVerticalRel.prototype.toString=function(){return"[object SVGPathSegLinetoVerticalRel]"};window.SVGPathSegLinetoVerticalRel.prototype._asPathString=function(){return(this||e).pathSegTypeAsLetter+" "+(this||e)._y};window.SVGPathSegLinetoVerticalRel.prototype.clone=function(){return new window.SVGPathSegLinetoVerticalRel(void 0,(this||e)._y)};Object.defineProperty(window.SVGPathSegLinetoVerticalRel.prototype,"y",{get:function(){return(this||e)._y},set:function(t){(this||e)._y=t;this._segmentChanged()},enumerable:true});window.SVGPathSegCurvetoCubicSmoothAbs=function(t,n,r,i,a){window.SVGPathSeg.call(this||e,window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_SMOOTH_ABS,"S",t);(this||e)._x=n;(this||e)._y=r;(this||e)._x2=i;(this||e)._y2=a};window.SVGPathSegCurvetoCubicSmoothAbs.prototype=Object.create(window.SVGPathSeg.prototype);window.SVGPathSegCurvetoCubicSmoothAbs.prototype.toString=function(){return"[object SVGPathSegCurvetoCubicSmoothAbs]"};window.SVGPathSegCurvetoCubicSmoothAbs.prototype._asPathString=function(){return(this||e).pathSegTypeAsLetter+" "+(this||e)._x2+" "+(this||e)._y2+" "+(this||e)._x+" "+(this||e)._y};window.SVGPathSegCurvetoCubicSmoothAbs.prototype.clone=function(){return new window.SVGPathSegCurvetoCubicSmoothAbs(void 0,(this||e)._x,(this||e)._y,(this||e)._x2,(this||e)._y2)};Object.defineProperty(window.SVGPathSegCurvetoCubicSmoothAbs.prototype,"x",{get:function(){return(this||e)._x},set:function(t){(this||e)._x=t;this._segmentChanged()},enumerable:true});Object.defineProperty(window.SVGPathSegCurvetoCubicSmoothAbs.prototype,"y",{get:function(){return(this||e)._y},set:function(t){(this||e)._y=t;this._segmentChanged()},enumerable:true});Object.defineProperty(window.SVGPathSegCurvetoCubicSmoothAbs.prototype,"x2",{get:function(){return(this||e)._x2},set:function(t){(this||e)._x2=t;this._segmentChanged()},enumerable:true});Object.defineProperty(window.SVGPathSegCurvetoCubicSmoothAbs.prototype,"y2",{get:function(){return(this||e)._y2},set:function(t){(this||e)._y2=t;this._segmentChanged()},enumerable:true});window.SVGPathSegCurvetoCubicSmoothRel=function(t,n,r,i,a){window.SVGPathSeg.call(this||e,window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_SMOOTH_REL,"s",t);(this||e)._x=n;(this||e)._y=r;(this||e)._x2=i;(this||e)._y2=a};window.SVGPathSegCurvetoCubicSmoothRel.prototype=Object.create(window.SVGPathSeg.prototype);window.SVGPathSegCurvetoCubicSmoothRel.prototype.toString=function(){return"[object SVGPathSegCurvetoCubicSmoothRel]"};window.SVGPathSegCurvetoCubicSmoothRel.prototype._asPathString=function(){return(this||e).pathSegTypeAsLetter+" "+(this||e)._x2+" "+(this||e)._y2+" "+(this||e)._x+" "+(this||e)._y};window.SVGPathSegCurvetoCubicSmoothRel.prototype.clone=function(){return new window.SVGPathSegCurvetoCubicSmoothRel(void 0,(this||e)._x,(this||e)._y,(this||e)._x2,(this||e)._y2)};Object.defineProperty(window.SVGPathSegCurvetoCubicSmoothRel.prototype,"x",{get:function(){return(this||e)._x},set:function(t){(this||e)._x=t;this._segmentChanged()},enumerable:true});Object.defineProperty(window.SVGPathSegCurvetoCubicSmoothRel.prototype,"y",{get:function(){return(this||e)._y},set:function(t){(this||e)._y=t;this._segmentChanged()},enumerable:true});Object.defineProperty(window.SVGPathSegCurvetoCubicSmoothRel.prototype,"x2",{get:function(){return(this||e)._x2},set:function(t){(this||e)._x2=t;this._segmentChanged()},enumerable:true});Object.defineProperty(window.SVGPathSegCurvetoCubicSmoothRel.prototype,"y2",{get:function(){return(this||e)._y2},set:function(t){(this||e)._y2=t;this._segmentChanged()},enumerable:true});window.SVGPathSegCurvetoQuadraticSmoothAbs=function(t,n,r){window.SVGPathSeg.call(this||e,window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_SMOOTH_ABS,"T",t);(this||e)._x=n;(this||e)._y=r};window.SVGPathSegCurvetoQuadraticSmoothAbs.prototype=Object.create(window.SVGPathSeg.prototype);window.SVGPathSegCurvetoQuadraticSmoothAbs.prototype.toString=function(){return"[object SVGPathSegCurvetoQuadraticSmoothAbs]"};window.SVGPathSegCurvetoQuadraticSmoothAbs.prototype._asPathString=function(){return(this||e).pathSegTypeAsLetter+" "+(this||e)._x+" "+(this||e)._y};window.SVGPathSegCurvetoQuadraticSmoothAbs.prototype.clone=function(){return new window.SVGPathSegCurvetoQuadraticSmoothAbs(void 0,(this||e)._x,(this||e)._y)};Object.defineProperty(window.SVGPathSegCurvetoQuadraticSmoothAbs.prototype,"x",{get:function(){return(this||e)._x},set:function(t){(this||e)._x=t;this._segmentChanged()},enumerable:true});Object.defineProperty(window.SVGPathSegCurvetoQuadraticSmoothAbs.prototype,"y",{get:function(){return(this||e)._y},set:function(t){(this||e)._y=t;this._segmentChanged()},enumerable:true});window.SVGPathSegCurvetoQuadraticSmoothRel=function(t,n,r){window.SVGPathSeg.call(this||e,window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_SMOOTH_REL,"t",t);(this||e)._x=n;(this||e)._y=r};window.SVGPathSegCurvetoQuadraticSmoothRel.prototype=Object.create(window.SVGPathSeg.prototype);window.SVGPathSegCurvetoQuadraticSmoothRel.prototype.toString=function(){return"[object SVGPathSegCurvetoQuadraticSmoothRel]"};window.SVGPathSegCurvetoQuadraticSmoothRel.prototype._asPathString=function(){return(this||e).pathSegTypeAsLetter+" "+(this||e)._x+" "+(this||e)._y};window.SVGPathSegCurvetoQuadraticSmoothRel.prototype.clone=function(){return new window.SVGPathSegCurvetoQuadraticSmoothRel(void 0,(this||e)._x,(this||e)._y)};Object.defineProperty(window.SVGPathSegCurvetoQuadraticSmoothRel.prototype,"x",{get:function(){return(this||e)._x},set:function(t){(this||e)._x=t;this._segmentChanged()},enumerable:true});Object.defineProperty(window.SVGPathSegCurvetoQuadraticSmoothRel.prototype,"y",{get:function(){return(this||e)._y},set:function(t){(this||e)._y=t;this._segmentChanged()},enumerable:true});window.SVGPathElement.prototype.createSVGPathSegClosePath=function(){return new window.SVGPathSegClosePath(void 0)};window.SVGPathElement.prototype.createSVGPathSegMovetoAbs=function(t,e){return new window.SVGPathSegMovetoAbs(void 0,t,e)};window.SVGPathElement.prototype.createSVGPathSegMovetoRel=function(t,e){return new window.SVGPathSegMovetoRel(void 0,t,e)};window.SVGPathElement.prototype.createSVGPathSegLinetoAbs=function(t,e){return new window.SVGPathSegLinetoAbs(void 0,t,e)};window.SVGPathElement.prototype.createSVGPathSegLinetoRel=function(t,e){return new window.SVGPathSegLinetoRel(void 0,t,e)};window.SVGPathElement.prototype.createSVGPathSegCurvetoCubicAbs=function(t,e,n,r,i,a){return new window.SVGPathSegCurvetoCubicAbs(void 0,t,e,n,r,i,a)};window.SVGPathElement.prototype.createSVGPathSegCurvetoCubicRel=function(t,e,n,r,i,a){return new window.SVGPathSegCurvetoCubicRel(void 0,t,e,n,r,i,a)};window.SVGPathElement.prototype.createSVGPathSegCurvetoQuadraticAbs=function(t,e,n,r){return new window.SVGPathSegCurvetoQuadraticAbs(void 0,t,e,n,r)};window.SVGPathElement.prototype.createSVGPathSegCurvetoQuadraticRel=function(t,e,n,r){return new window.SVGPathSegCurvetoQuadraticRel(void 0,t,e,n,r)};window.SVGPathElement.prototype.createSVGPathSegArcAbs=function(t,e,n,r,i,a,o){return new window.SVGPathSegArcAbs(void 0,t,e,n,r,i,a,o)};window.SVGPathElement.prototype.createSVGPathSegArcRel=function(t,e,n,r,i,a,o){return new window.SVGPathSegArcRel(void 0,t,e,n,r,i,a,o)};window.SVGPathElement.prototype.createSVGPathSegLinetoHorizontalAbs=function(t){return new window.SVGPathSegLinetoHorizontalAbs(void 0,t)};window.SVGPathElement.prototype.createSVGPathSegLinetoHorizontalRel=function(t){return new window.SVGPathSegLinetoHorizontalRel(void 0,t)};window.SVGPathElement.prototype.createSVGPathSegLinetoVerticalAbs=function(t){return new window.SVGPathSegLinetoVerticalAbs(void 0,t)};window.SVGPathElement.prototype.createSVGPathSegLinetoVerticalRel=function(t){return new window.SVGPathSegLinetoVerticalRel(void 0,t)};window.SVGPathElement.prototype.createSVGPathSegCurvetoCubicSmoothAbs=function(t,e,n,r){return new window.SVGPathSegCurvetoCubicSmoothAbs(void 0,t,e,n,r)};window.SVGPathElement.prototype.createSVGPathSegCurvetoCubicSmoothRel=function(t,e,n,r){return new window.SVGPathSegCurvetoCubicSmoothRel(void 0,t,e,n,r)};window.SVGPathElement.prototype.createSVGPathSegCurvetoQuadraticSmoothAbs=function(t,e){return new window.SVGPathSegCurvetoQuadraticSmoothAbs(void 0,t,e)};window.SVGPathElement.prototype.createSVGPathSegCurvetoQuadraticSmoothRel=function(t,e){return new window.SVGPathSegCurvetoQuadraticSmoothRel(void 0,t,e)};"getPathSegAtLength"in window.SVGPathElement.prototype||(window.SVGPathElement.prototype.getPathSegAtLength=function(t){if(void 0===t||!isFinite(t))throw"Invalid arguments.";var e=document.createElementNS("http://www.w3.org/2000/svg","path");e.setAttribute("d",this.getAttribute("d"));var n=e.pathSegList.numberOfItems-1;if(n<=0)return 0;do{e.pathSegList.removeItem(n);if(t>e.getTotalLength())break;n--}while(n>0);return n})}if(!("SVGPathSegList"in window)){window.SVGPathSegList=function(t){(this||e)._pathElement=t;(this||e)._list=this._parsePath((this||e)._pathElement.getAttribute("d"));(this||e)._mutationObserverConfig={attributes:true,attributeFilter:["d"]};(this||e)._pathElementMutationObserver=new MutationObserver((this||e)._updateListFromPathMutations.bind(this||e));(this||e)._pathElementMutationObserver.observe((this||e)._pathElement,(this||e)._mutationObserverConfig)};window.SVGPathSegList.prototype.classname="SVGPathSegList";Object.defineProperty(window.SVGPathSegList.prototype,"numberOfItems",{get:function(){this._checkPathSynchronizedToList();return(this||e)._list.length},enumerable:true});Object.defineProperty(window.SVGPathElement.prototype,"pathSegList",{get:function(){(this||e)._pathSegList||((this||e)._pathSegList=new window.SVGPathSegList(this||e));return(this||e)._pathSegList},enumerable:true});Object.defineProperty(window.SVGPathElement.prototype,"normalizedPathSegList",{get:function(){return(this||e).pathSegList},enumerable:true});Object.defineProperty(window.SVGPathElement.prototype,"animatedPathSegList",{get:function(){return(this||e).pathSegList},enumerable:true});Object.defineProperty(window.SVGPathElement.prototype,"animatedNormalizedPathSegList",{get:function(){return(this||e).pathSegList},enumerable:true});window.SVGPathSegList.prototype._checkPathSynchronizedToList=function(){this._updateListFromPathMutations((this||e)._pathElementMutationObserver.takeRecords())};window.SVGPathSegList.prototype._updateListFromPathMutations=function(t){if((this||e)._pathElement){var n=false;t.forEach((function(t){"d"==t.attributeName&&(n=true)}));n&&((this||e)._list=this._parsePath((this||e)._pathElement.getAttribute("d")))}};window.SVGPathSegList.prototype._writeListToPath=function(){(this||e)._pathElementMutationObserver.disconnect();(this||e)._pathElement.setAttribute("d",window.SVGPathSegList._pathSegArrayAsString((this||e)._list));(this||e)._pathElementMutationObserver.observe((this||e)._pathElement,(this||e)._mutationObserverConfig)};window.SVGPathSegList.prototype.segmentChanged=function(t){this._writeListToPath()};window.SVGPathSegList.prototype.clear=function(){this._checkPathSynchronizedToList();(this||e)._list.forEach((function(t){t._owningPathSegList=null}));(this||e)._list=[];this._writeListToPath()};window.SVGPathSegList.prototype.initialize=function(t){this._checkPathSynchronizedToList();(this||e)._list=[t];t._owningPathSegList=this||e;this._writeListToPath();return t};window.SVGPathSegList.prototype._checkValidIndex=function(t){if(isNaN(t)||t<0||t>=(this||e).numberOfItems)throw"INDEX_SIZE_ERR"};window.SVGPathSegList.prototype.getItem=function(t){this._checkPathSynchronizedToList();this._checkValidIndex(t);return(this||e)._list[t]};window.SVGPathSegList.prototype.insertItemBefore=function(t,n){this._checkPathSynchronizedToList();n>(this||e).numberOfItems&&(n=(this||e).numberOfItems);t._owningPathSegList&&(t=t.clone());(this||e)._list.splice(n,0,t);t._owningPathSegList=this||e;this._writeListToPath();return t};window.SVGPathSegList.prototype.replaceItem=function(t,n){this._checkPathSynchronizedToList();t._owningPathSegList&&(t=t.clone());this._checkValidIndex(n);(this||e)._list[n]=t;t._owningPathSegList=this||e;this._writeListToPath();return t};window.SVGPathSegList.prototype.removeItem=function(t){this._checkPathSynchronizedToList();this._checkValidIndex(t);var n=(this||e)._list[t];(this||e)._list.splice(t,1);this._writeListToPath();return n};window.SVGPathSegList.prototype.appendItem=function(t){this._checkPathSynchronizedToList();t._owningPathSegList&&(t=t.clone());(this||e)._list.push(t);t._owningPathSegList=this||e;this._writeListToPath();return t};window.SVGPathSegList._pathSegArrayAsString=function(t){var e="";var n=true;t.forEach((function(t){if(n){n=false;e+=t._asPathString()}else e+=" "+t._asPathString()}));return e};window.SVGPathSegList.prototype._parsePath=function(t){if(!t||0==t.length)return[];var n=this||e;var Builder=function(){(this||e).pathSegList=[]};Builder.prototype.appendSegment=function(t){(this||e).pathSegList.push(t)};var Source=function(t){(this||e)._string=t;(this||e)._currentIndex=0;(this||e)._endIndex=(this||e)._string.length;(this||e)._previousCommand=window.SVGPathSeg.PATHSEG_UNKNOWN;this._skipOptionalSpaces()};Source.prototype._isCurrentSpace=function(){var t=(this||e)._string[(this||e)._currentIndex];return t<=" "&&(" "==t||"\n"==t||"\t"==t||"\r"==t||"\f"==t)};Source.prototype._skipOptionalSpaces=function(){while((this||e)._currentIndex<(this||e)._endIndex&&this._isCurrentSpace())(this||e)._currentIndex++;return(this||e)._currentIndex<(this||e)._endIndex};Source.prototype._skipOptionalSpacesOrDelimiter=function(){if((this||e)._currentIndex<(this||e)._endIndex&&!this._isCurrentSpace()&&","!=(this||e)._string.charAt((this||e)._currentIndex))return false;if(this._skipOptionalSpaces()&&(this||e)._currentIndex<(this||e)._endIndex&&","==(this||e)._string.charAt((this||e)._currentIndex)){(this||e)._currentIndex++;this._skipOptionalSpaces()}return(this||e)._currentIndex<(this||e)._endIndex};Source.prototype.hasMoreData=function(){return(this||e)._currentIndex<(this||e)._endIndex};Source.prototype.peekSegmentType=function(){var t=(this||e)._string[(this||e)._currentIndex];return this._pathSegTypeFromChar(t)};Source.prototype._pathSegTypeFromChar=function(t){switch(t){case"Z":case"z":return window.SVGPathSeg.PATHSEG_CLOSEPATH;case"M":return window.SVGPathSeg.PATHSEG_MOVETO_ABS;case"m":return window.SVGPathSeg.PATHSEG_MOVETO_REL;case"L":return window.SVGPathSeg.PATHSEG_LINETO_ABS;case"l":return window.SVGPathSeg.PATHSEG_LINETO_REL;case"C":return window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_ABS;case"c":return window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_REL;case"Q":return window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_ABS;case"q":return window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_REL;case"A":return window.SVGPathSeg.PATHSEG_ARC_ABS;case"a":return window.SVGPathSeg.PATHSEG_ARC_REL;case"H":return window.SVGPathSeg.PATHSEG_LINETO_HORIZONTAL_ABS;case"h":return window.SVGPathSeg.PATHSEG_LINETO_HORIZONTAL_REL;case"V":return window.SVGPathSeg.PATHSEG_LINETO_VERTICAL_ABS;case"v":return window.SVGPathSeg.PATHSEG_LINETO_VERTICAL_REL;case"S":return window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_SMOOTH_ABS;case"s":return window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_SMOOTH_REL;case"T":return window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_SMOOTH_ABS;case"t":return window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_SMOOTH_REL;default:return window.SVGPathSeg.PATHSEG_UNKNOWN}};Source.prototype._nextCommandHelper=function(t,e){return("+"==t||"-"==t||"."==t||t>="0"&&t<="9")&&e!=window.SVGPathSeg.PATHSEG_CLOSEPATH?e==window.SVGPathSeg.PATHSEG_MOVETO_ABS?window.SVGPathSeg.PATHSEG_LINETO_ABS:e==window.SVGPathSeg.PATHSEG_MOVETO_REL?window.SVGPathSeg.PATHSEG_LINETO_REL:e:window.SVGPathSeg.PATHSEG_UNKNOWN};Source.prototype.initialCommandIsMoveTo=function(){if(!this.hasMoreData())return true;var t=this.peekSegmentType();return t==window.SVGPathSeg.PATHSEG_MOVETO_ABS||t==window.SVGPathSeg.PATHSEG_MOVETO_REL};Source.prototype._parseNumber=function(){var t=0;var n=0;var r=1;var i=0;var a=1;var o=1;var s=(this||e)._currentIndex;this._skipOptionalSpaces();if((this||e)._currentIndex<(this||e)._endIndex&&"+"==(this||e)._string.charAt((this||e)._currentIndex))(this||e)._currentIndex++;else if((this||e)._currentIndex<(this||e)._endIndex&&"-"==(this||e)._string.charAt((this||e)._currentIndex)){(this||e)._currentIndex++;a=-1}if(!((this||e)._currentIndex==(this||e)._endIndex||((this||e)._string.charAt((this||e)._currentIndex)<"0"||(this||e)._string.charAt((this||e)._currentIndex)>"9")&&"."!=(this||e)._string.charAt((this||e)._currentIndex))){var l=(this||e)._currentIndex;while((this||e)._currentIndex<(this||e)._endIndex&&(this||e)._string.charAt((this||e)._currentIndex)>="0"&&(this||e)._string.charAt((this||e)._currentIndex)<="9")(this||e)._currentIndex++;if((this||e)._currentIndex!=l){var c=(this||e)._currentIndex-1;var d=1;while(c>=l){n+=d*((this||e)._string.charAt(c--)-"0");d*=10}}if((this||e)._currentIndex<(this||e)._endIndex&&"."==(this||e)._string.charAt((this||e)._currentIndex)){(this||e)._currentIndex++;if((this||e)._currentIndex>=(this||e)._endIndex||(this||e)._string.charAt((this||e)._currentIndex)<"0"||(this||e)._string.charAt((this||e)._currentIndex)>"9")return;while((this||e)._currentIndex<(this||e)._endIndex&&(this||e)._string.charAt((this||e)._currentIndex)>="0"&&(this||e)._string.charAt((this||e)._currentIndex)<="9"){r*=10;i+=((this||e)._string.charAt((this||e)._currentIndex)-"0")/r;(this||e)._currentIndex+=1}}if((this||e)._currentIndex!=s&&(this||e)._currentIndex+1<(this||e)._endIndex&&("e"==(this||e)._string.charAt((this||e)._currentIndex)||"E"==(this||e)._string.charAt((this||e)._currentIndex))&&"x"!=(this||e)._string.charAt((this||e)._currentIndex+1)&&"m"!=(this||e)._string.charAt((this||e)._currentIndex+1)){(this||e)._currentIndex++;if("+"==(this||e)._string.charAt((this||e)._currentIndex))(this||e)._currentIndex++;else if("-"==(this||e)._string.charAt((this||e)._currentIndex)){(this||e)._currentIndex++;o=-1}if((this||e)._currentIndex>=(this||e)._endIndex||(this||e)._string.charAt((this||e)._currentIndex)<"0"||(this||e)._string.charAt((this||e)._currentIndex)>"9")return;while((this||e)._currentIndex<(this||e)._endIndex&&(this||e)._string.charAt((this||e)._currentIndex)>="0"&&(this||e)._string.charAt((this||e)._currentIndex)<="9"){t*=10;t+=(this||e)._string.charAt((this||e)._currentIndex)-"0";(this||e)._currentIndex++}}var u=n+i;u*=a;t&&(u*=Math.pow(10,o*t));if(s!=(this||e)._currentIndex){this._skipOptionalSpacesOrDelimiter();return u}}};Source.prototype._parseArcFlag=function(){if(!((this||e)._currentIndex>=(this||e)._endIndex)){var t=false;var n=(this||e)._string.charAt((this||e)._currentIndex++);if("0"==n)t=false;else{if("1"!=n)return;t=true}this._skipOptionalSpacesOrDelimiter();return t}};Source.prototype.parseSegment=function(){var t=(this||e)._string[(this||e)._currentIndex];var r=this._pathSegTypeFromChar(t);if(r==window.SVGPathSeg.PATHSEG_UNKNOWN){if((this||e)._previousCommand==window.SVGPathSeg.PATHSEG_UNKNOWN)return null;r=this._nextCommandHelper(t,(this||e)._previousCommand);if(r==window.SVGPathSeg.PATHSEG_UNKNOWN)return null}else(this||e)._currentIndex++;(this||e)._previousCommand=r;switch(r){case window.SVGPathSeg.PATHSEG_MOVETO_REL:return new window.SVGPathSegMovetoRel(n,this._parseNumber(),this._parseNumber());case window.SVGPathSeg.PATHSEG_MOVETO_ABS:return new window.SVGPathSegMovetoAbs(n,this._parseNumber(),this._parseNumber());case window.SVGPathSeg.PATHSEG_LINETO_REL:return new window.SVGPathSegLinetoRel(n,this._parseNumber(),this._parseNumber());case window.SVGPathSeg.PATHSEG_LINETO_ABS:return new window.SVGPathSegLinetoAbs(n,this._parseNumber(),this._parseNumber());case window.SVGPathSeg.PATHSEG_LINETO_HORIZONTAL_REL:return new window.SVGPathSegLinetoHorizontalRel(n,this._parseNumber());case window.SVGPathSeg.PATHSEG_LINETO_HORIZONTAL_ABS:return new window.SVGPathSegLinetoHorizontalAbs(n,this._parseNumber());case window.SVGPathSeg.PATHSEG_LINETO_VERTICAL_REL:return new window.SVGPathSegLinetoVerticalRel(n,this._parseNumber());case window.SVGPathSeg.PATHSEG_LINETO_VERTICAL_ABS:return new window.SVGPathSegLinetoVerticalAbs(n,this._parseNumber());case window.SVGPathSeg.PATHSEG_CLOSEPATH:this._skipOptionalSpaces();return new window.SVGPathSegClosePath(n);case window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_REL:var i={x1:this._parseNumber(),y1:this._parseNumber(),x2:this._parseNumber(),y2:this._parseNumber(),x:this._parseNumber(),y:this._parseNumber()};return new window.SVGPathSegCurvetoCubicRel(n,i.x,i.y,i.x1,i.y1,i.x2,i.y2);case window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_ABS:var i={x1:this._parseNumber(),y1:this._parseNumber(),x2:this._parseNumber(),y2:this._parseNumber(),x:this._parseNumber(),y:this._parseNumber()};return new window.SVGPathSegCurvetoCubicAbs(n,i.x,i.y,i.x1,i.y1,i.x2,i.y2);case window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_SMOOTH_REL:var i={x2:this._parseNumber(),y2:this._parseNumber(),x:this._parseNumber(),y:this._parseNumber()};return new window.SVGPathSegCurvetoCubicSmoothRel(n,i.x,i.y,i.x2,i.y2);case window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_SMOOTH_ABS:var i={x2:this._parseNumber(),y2:this._parseNumber(),x:this._parseNumber(),y:this._parseNumber()};return new window.SVGPathSegCurvetoCubicSmoothAbs(n,i.x,i.y,i.x2,i.y2);case window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_REL:var i={x1:this._parseNumber(),y1:this._parseNumber(),x:this._parseNumber(),y:this._parseNumber()};return new window.SVGPathSegCurvetoQuadraticRel(n,i.x,i.y,i.x1,i.y1);case window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_ABS:var i={x1:this._parseNumber(),y1:this._parseNumber(),x:this._parseNumber(),y:this._parseNumber()};return new window.SVGPathSegCurvetoQuadraticAbs(n,i.x,i.y,i.x1,i.y1);case window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_SMOOTH_REL:return new window.SVGPathSegCurvetoQuadraticSmoothRel(n,this._parseNumber(),this._parseNumber());case window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_SMOOTH_ABS:return new window.SVGPathSegCurvetoQuadraticSmoothAbs(n,this._parseNumber(),this._parseNumber());case window.SVGPathSeg.PATHSEG_ARC_REL:var i={x1:this._parseNumber(),y1:this._parseNumber(),arcAngle:this._parseNumber(),arcLarge:this._parseArcFlag(),arcSweep:this._parseArcFlag(),x:this._parseNumber(),y:this._parseNumber()};return new window.SVGPathSegArcRel(n,i.x,i.y,i.x1,i.y1,i.arcAngle,i.arcLarge,i.arcSweep);case window.SVGPathSeg.PATHSEG_ARC_ABS:var i={x1:this._parseNumber(),y1:this._parseNumber(),arcAngle:this._parseNumber(),arcLarge:this._parseArcFlag(),arcSweep:this._parseArcFlag(),x:this._parseNumber(),y:this._parseNumber()};return new window.SVGPathSegArcAbs(n,i.x,i.y,i.x1,i.y1,i.arcAngle,i.arcLarge,i.arcSweep);default:throw"Unknown path seg type."}};var r=new Builder;var i=new Source(t);if(!i.initialCommandIsMoveTo())return[];while(i.hasMoreData()){var a=i.parseSegment();if(!a)return[];r.appendSegment(a)}return r.pathSegList}}})();String.prototype.padEnd||(String.prototype.padEnd=function padEnd(t,n){t>>=0;n=String("undefined"!==typeof n?n:" ");if((this||e).length>t)return String(this||e);t-=(this||e).length;t>n.length&&(n+=n.repeat(t/n.length));return String(this||e)+n.slice(0,t)});"function"!==typeof Object.assign&&Object.defineProperty(Object,"assign",{value:function assign(t,e){if(null===t||void 0===t)throw new TypeError("Cannot convert undefined or null to object");var n=Object(t);for(var r=1;r<arguments.length;r++){var i=arguments[r];if(null!==i&&void 0!==i)for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])}return n},writable:true,configurable:true});Chart.prototype.axis=function(){};Chart.prototype.axis.labels=function(t){var n=(this||e).internal;if(arguments.length){Object.keys(t).forEach((function(e){n.axis.setLabelText(e,t[e])}));n.axis.updateLabels()}};Chart.prototype.axis.max=function(t){var n=(this||e).internal,r=n.config;if(!arguments.length)return{x:r.axis_x_max,y:r.axis_y_max,y2:r.axis_y2_max};if("object"===typeof t){isValue(t.x)&&(r.axis_x_max=t.x);isValue(t.y)&&(r.axis_y_max=t.y);isValue(t.y2)&&(r.axis_y2_max=t.y2)}else r.axis_y_max=r.axis_y2_max=t;n.redraw({withUpdateOrgXDomain:true,withUpdateXDomain:true})};Chart.prototype.axis.min=function(t){var n=(this||e).internal,r=n.config;if(!arguments.length)return{x:r.axis_x_min,y:r.axis_y_min,y2:r.axis_y2_min};if("object"===typeof t){isValue(t.x)&&(r.axis_x_min=t.x);isValue(t.y)&&(r.axis_y_min=t.y);isValue(t.y2)&&(r.axis_y2_min=t.y2)}else r.axis_y_min=r.axis_y2_min=t;n.redraw({withUpdateOrgXDomain:true,withUpdateXDomain:true})};Chart.prototype.axis.range=function(t){if(!arguments.length)return{max:(this||e).axis.max(),min:(this||e).axis.min()};isDefined(t.max)&&(this||e).axis.max(t.max);isDefined(t.min)&&(this||e).axis.min(t.min)};Chart.prototype.axis.types=function(t){var n=(this||e).internal;if(void 0===t)return{y:n.config.axis_y_type,y2:n.config.axis_y2_type};isDefined(t.y)&&(n.config.axis_y_type=t.y);isDefined(t.y2)&&(n.config.axis_y2_type=t.y2);n.updateScales();n.redraw()};Chart.prototype.category=function(t,n){var r=(this||e).internal,i=r.config;if(arguments.length>1){i.axis_x_categories[t]=n;r.redraw()}return i.axis_x_categories[t]};Chart.prototype.categories=function(t){var n=(this||e).internal,r=n.config;if(!arguments.length)return r.axis_x_categories;r.axis_x_categories=t;n.redraw();return r.axis_x_categories};Chart.prototype.resize=function(t){var n=(this||e).internal,r=n.config;r.size_width=t?t.width:null;r.size_height=t?t.height:null;this.flush()};Chart.prototype.flush=function(){var t=(this||e).internal;t.updateAndRedraw({withLegend:true,withTransition:false,withTransitionForTransform:false})};Chart.prototype.destroy=function(){var t=(this||e).internal;window.clearInterval(t.intervalForObserveInserted);void 0!==t.resizeTimeout&&window.clearTimeout(t.resizeTimeout);window.removeEventListener("resize",t.resizeIfElementDisplayed);t.resizeFunction.remove();t.unbindWindowFocus();t.selectChart.classed("c3",false).html("");Object.keys(t).forEach((function(e){t[e]=null}));return null};Chart.prototype.color=function(t){var n=(this||e).internal;return n.color(t)};Chart.prototype.data=function(t){var n=(this||e).internal.data.targets;return"undefined"===typeof t?n:n.filter((function(e){return[].concat(t).indexOf(e.id)>=0}))};Chart.prototype.data.shown=function(t){return(this||e).internal.filterTargetsToShow(this.data(t))};
/**
   * Get values of the data loaded in the chart.
   *
   * @param {String|Array} targetId This API returns the value of specified target.
   * @param flat
   * @return {Array} Data values
   */Chart.prototype.data.values=function(t,e){void 0===e&&(e=true);var n=null;if(t){var r=this.data(t);r&&isArray(r)&&(n=r.reduce((function(t,n){var r=n.values.map((function(t){return t.value}));e?t=t.concat(r):t.push(r);return t}),[]))}return n};Chart.prototype.data.names=function(t){(this||e).internal.clearLegendItemTextBoxCache();return(this||e).internal.updateDataAttributes("names",t)};Chart.prototype.data.colors=function(t){return(this||e).internal.updateDataAttributes("colors",t)};Chart.prototype.data.axes=function(t){return(this||e).internal.updateDataAttributes("axes",t)};Chart.prototype.data.stackNormalized=function(t){if(void 0===t)return(this||e).internal.isStackNormalized();(this||e).internal.config.data_stack_normalize=!!t;(this||e).internal.redraw()};Chart.prototype.donut=function(){};Chart.prototype.donut.padAngle=function(t){if(void 0===t)return(this||e).internal.config.donut_padAngle;(this||e).internal.config.donut_padAngle=t;this.flush()};Chart.prototype.flow=function(t){var n=(this||e).internal,r,i,a=[],o=n.getMaxDataCount(),s,l,c,d,u=0,h=0,g,p;if(t.json)i=n.convertJsonToData(t.json,t.keys);else if(t.rows)i=n.convertRowsToData(t.rows);else{if(!t.columns)return;i=n.convertColumnsToData(t.columns)}r=n.convertDataToTargets(i,true);n.data.targets.forEach((function(t){var e=false,i,o;for(i=0;i<r.length;i++)if(t.id===r[i].id){e=true;t.values[t.values.length-1]&&(h=t.values[t.values.length-1].index+1);u=r[i].values.length;for(o=0;o<u;o++){r[i].values[o].index=h+o;n.isTimeSeries()||(r[i].values[o].x=h+o)}t.values=t.values.concat(r[i].values);r.splice(i,1);break}e||a.push(t.id)}));n.data.targets.forEach((function(t){var e,r;for(e=0;e<a.length;e++)if(t.id===a[e]){h=t.values[t.values.length-1].index+1;for(r=0;r<u;r++)t.values.push({id:t.id,index:h+r,x:n.isTimeSeries()?n.getOtherTargetX(h+r):h+r,value:null})}}));n.data.targets.length&&r.forEach((function(t){var e,r=[];for(e=n.data.targets[0].values[0].index;e<h;e++)r.push({id:t.id,index:e,x:n.isTimeSeries()?n.getOtherTargetX(e):e,value:null});t.values.forEach((function(t){t.index+=h;n.isTimeSeries()||(t.x+=h)}));t.values=r.concat(t.values)}));n.data.targets=n.data.targets.concat(r);s=n.getMaxDataCount();c=n.data.targets[0];d=c.values[0];if(isDefined(t.to)){u=0;p=n.isTimeSeries()?n.parseDate(t.to):t.to;c.values.forEach((function(t){t.x<p&&u++}))}else isDefined(t.length)&&(u=t.length);if(o){if(1===o&&n.isTimeSeries()){g=(c.values[c.values.length-1].x-d.x)/2;l=[new Date(+d.x-g),new Date(+d.x+g)];n.updateXDomain(null,true,true,false,l)}}else{g=n.isTimeSeries()?c.values.length>1?c.values[c.values.length-1].x-d.x:d.x-n.getXDomain(n.data.targets)[0]:1;l=[d.x-g,d.x];n.updateXDomain(null,true,true,false,l)}n.updateTargets(n.data.targets);n.redraw({flow:{index:d.index,length:u,duration:isValue(t.duration)?t.duration:n.config.transition_duration,done:t.done,orgDataCount:o},withLegend:true,withTransition:o>1,withTrimXDomain:false,withUpdateXAxis:true})};ChartInternal.prototype.generateFlow=function(t){var r=this||e,i=r.config,a=r.d3;return function(){var e=t.targets,o=t.flow,s=t.drawBar,l=t.drawLine,c=t.drawArea,d=t.cx,u=t.cy,h=t.xv,g=t.xForText,p=t.yForText,x=t.duration;var _,y=1,m,v=o.index,S=o.length,w=r.getValueOnIndex(r.data.targets[0].values,v),b=r.getValueOnIndex(r.data.targets[0].values,v+S),C=r.x.domain(),T,A=o.duration||x,I=o.done||function(){},P=r.generateWait();var L,V,G,E,O,R,k,F;r.flowing=true;r.data.targets.forEach((function(t){t.values.splice(0,S)}));T=r.updateXDomain(e,true,true);r.updateXGrid&&r.updateXGrid(true);L=r.xgrid||a.selectAll([]);V=r.xgridLines||a.selectAll([]);G=r.mainRegion||a.selectAll([]);E=r.mainText||a.selectAll([]);O=r.mainBar||a.selectAll([]);R=r.mainLine||a.selectAll([]);k=r.mainArea||a.selectAll([]);F=r.mainCircle||a.selectAll([]);if(o.orgDataCount)_=1===o.orgDataCount||(w&&w.x)===(b&&b.x)||r.isTimeSeries()?r.x(C[0])-r.x(T[0]):r.x(w.x)-r.x(b.x);else if(1!==r.data.targets[0].values.length)_=r.x(C[0])-r.x(T[0]);else if(r.isTimeSeries()){w=r.getValueOnIndex(r.data.targets[0].values,0);b=r.getValueOnIndex(r.data.targets[0].values,r.data.targets[0].values.length-1);_=r.x(w.x)-r.x(b.x)}else _=diffDomain(T)/2;y=diffDomain(C)/diffDomain(T);m="translate("+_+",0) scale("+y+",1)";r.hideXGridFocus();var D=a.transition().ease(a.easeLinear).duration(A);P.add(r.xAxis(r.axes.x,D));P.add(O.transition(D).attr("transform",m));P.add(R.transition(D).attr("transform",m));P.add(k.transition(D).attr("transform",m));P.add(F.transition(D).attr("transform",m));P.add(E.transition(D).attr("transform",m));P.add(G.filter(r.isRegionOnX).transition(D).attr("transform",m));P.add(L.transition(D).attr("transform",m));P.add(V.transition(D).attr("transform",m));P((function(){var t,e=[],a=[];if(S){for(t=0;t<S;t++){e.push("."+n.shape+"-"+(v+t));a.push("."+n.text+"-"+(v+t))}r.svg.selectAll("."+n.shapes).selectAll(e).remove();r.svg.selectAll("."+n.texts).selectAll(a).remove();r.svg.select("."+n.xgrid).remove()}L.attr("transform",null).attr("x1",r.xgridAttr.x1).attr("x2",r.xgridAttr.x2).attr("y1",r.xgridAttr.y1).attr("y2",r.xgridAttr.y2).style("opacity",r.xgridAttr.opacity);V.attr("transform",null);V.select("line").attr("x1",i.axis_rotated?0:h).attr("x2",i.axis_rotated?r.width:h);V.select("text").attr("x",i.axis_rotated?r.width:0).attr("y",h);O.attr("transform",null).attr("d",s);R.attr("transform",null).attr("d",l);k.attr("transform",null).attr("d",c);F.attr("transform",null).attr("cx",d).attr("cy",u);E.attr("transform",null).attr("x",g).attr("y",p).style("fill-opacity",r.opacityForText.bind(r));G.attr("transform",null);G.filter(r.isRegionOnX).attr("x",r.regionX.bind(r)).attr("width",r.regionWidth.bind(r));I();r.flowing=false}))}};Chart.prototype.focus=function(t){var r=(this||e).internal,i;t=r.mapToTargetIds(t);i=r.svg.selectAll(r.selectorTargets(t.filter(r.isTargetToShow,r))),this.revert();this.defocus();i.classed(n.focused,true).classed(n.defocused,false);r.hasArcType()&&r.expandArc(t);r.toggleFocusLegend(t,true);r.focusedTargetIds=t;r.defocusedTargetIds=r.defocusedTargetIds.filter((function(e){return t.indexOf(e)<0}))};Chart.prototype.defocus=function(t){var r=(this||e).internal,i;t=r.mapToTargetIds(t);i=r.svg.selectAll(r.selectorTargets(t.filter(r.isTargetToShow,r))),i.classed(n.focused,false).classed(n.defocused,true);r.hasArcType()&&r.unexpandArc(t);r.toggleFocusLegend(t,false);r.focusedTargetIds=r.focusedTargetIds.filter((function(e){return t.indexOf(e)<0}));r.defocusedTargetIds=t};Chart.prototype.revert=function(t){var r=(this||e).internal,i;t=r.mapToTargetIds(t);i=r.svg.selectAll(r.selectorTargets(t));i.classed(n.focused,false).classed(n.defocused,false);r.hasArcType()&&r.unexpandArc(t);if(r.config.legend_show){r.showLegend(t.filter(r.isLegendToShow.bind(r)));r.legend.selectAll(r.selectorLegends(t)).filter((function(){return r.d3.select(this||e).classed(n.legendItemFocused)})).classed(n.legendItemFocused,false)}r.focusedTargetIds=[];r.defocusedTargetIds=[]};Chart.prototype.xgrids=function(t){var n=(this||e).internal,r=n.config;if(!t)return r.grid_x_lines;r.grid_x_lines=t;n.redrawWithoutRescale();return r.grid_x_lines};Chart.prototype.xgrids.add=function(t){var n=(this||e).internal;return this.xgrids(n.config.grid_x_lines.concat(t||[]))};Chart.prototype.xgrids.remove=function(t){var n=(this||e).internal;n.removeGridLines(t,true)};Chart.prototype.ygrids=function(t){var n=(this||e).internal,r=n.config;if(!t)return r.grid_y_lines;r.grid_y_lines=t;n.redrawWithoutRescale();return r.grid_y_lines};Chart.prototype.ygrids.add=function(t){var n=(this||e).internal;return this.ygrids(n.config.grid_y_lines.concat(t||[]))};Chart.prototype.ygrids.remove=function(t){var n=(this||e).internal;n.removeGridLines(t,false)};Chart.prototype.groups=function(t){var n=(this||e).internal,r=n.config;if(isUndefined(t))return r.data_groups;r.data_groups=t;n.redraw();return r.data_groups};Chart.prototype.legend=function(){};Chart.prototype.legend.show=function(t){var n=(this||e).internal;n.showLegend(n.mapToTargetIds(t));n.updateAndRedraw({withLegend:true})};Chart.prototype.legend.hide=function(t){var n=(this||e).internal;n.hideLegend(n.mapToTargetIds(t));n.updateAndRedraw({withLegend:false})};Chart.prototype.load=function(t){var n=(this||e).internal,r=n.config;t.xs&&n.addXs(t.xs);"names"in t&&Chart.prototype.data.names.bind(this||e)(t.names);"classes"in t&&Object.keys(t.classes).forEach((function(e){r.data_classes[e]=t.classes[e]}));"categories"in t&&n.isCategorized()&&(r.axis_x_categories=t.categories);"axes"in t&&Object.keys(t.axes).forEach((function(e){r.data_axes[e]=t.axes[e]}));"colors"in t&&Object.keys(t.colors).forEach((function(e){r.data_colors[e]=t.colors[e]}));"cacheIds"in t&&n.hasCaches(t.cacheIds)?n.load(n.getCaches(t.cacheIds),t.done):t.unload?n.unload(n.mapToTargetIds(true===t.unload?null:t.unload),(function(){n.loadFromArgs(t)})):n.loadFromArgs(t)};Chart.prototype.unload=function(t){var n=(this||e).internal;t=t||{};t instanceof Array?t={ids:t}:"string"===typeof t&&(t={ids:[t]});n.unload(n.mapToTargetIds(t.ids),(function(){n.redraw({withUpdateOrgXDomain:true,withUpdateXDomain:true,withLegend:true});t.done&&t.done()}))};Chart.prototype.pie=function(){};Chart.prototype.pie.padAngle=function(t){if(void 0===t)return(this||e).internal.config.pie_padAngle;(this||e).internal.config.pie_padAngle=t;this.flush()};Chart.prototype.regions=function(t){var n=(this||e).internal,r=n.config;if(!t)return r.regions;r.regions=t;n.redrawWithoutRescale();return r.regions};Chart.prototype.regions.add=function(t){var n=(this||e).internal,r=n.config;if(!t)return r.regions;r.regions=r.regions.concat(t);n.redrawWithoutRescale();return r.regions};Chart.prototype.regions.remove=function(t){var r=(this||e).internal,i=r.config,a,o,s;t=t||{};a=getOption(t,"duration",i.transition_duration);o=getOption(t,"classes",[n.region]);s=r.main.select("."+n.regions).selectAll(o.map((function(t){return"."+t})));(a?s.transition().duration(a):s).style("opacity",0).remove();i.regions=i.regions.filter((function(t){var e=false;if(!t["class"])return true;t["class"].split(" ").forEach((function(t){o.indexOf(t)>=0&&(e=true)}));return!e}));return i.regions};Chart.prototype.selected=function(t){var r=(this||e).internal,i=r.d3;return r.main.selectAll("."+n.shapes+r.getTargetSelectorSuffix(t)).selectAll("."+n.shape).filter((function(){return i.select(this||e).classed(n.SELECTED)})).nodes().map((function(t){var e=t.__data__;return e.data?e.data:e}))};Chart.prototype.select=function(t,r,i){var a=(this||e).internal,o=a.d3,s=a.config;s.data_selection_enabled&&a.main.selectAll("."+n.shapes).selectAll("."+n.shape).each((function(l,c){var d=o.select(this||e),u=l.data?l.data.id:l.id,h=a.getToggle(this||e,l).bind(a),g=s.data_selection_grouped||!t||t.indexOf(u)>=0,p=!r||r.indexOf(c)>=0,x=d.classed(n.SELECTED);d.classed(n.line)||d.classed(n.area)||(g&&p?s.data_selection_isselectable(l)&&!x&&h(true,d.classed(n.SELECTED,true),l,c):isDefined(i)&&i&&x&&h(false,d.classed(n.SELECTED,false),l,c))}))};Chart.prototype.unselect=function(t,r){var i=(this||e).internal,a=i.d3,o=i.config;o.data_selection_enabled&&i.main.selectAll("."+n.shapes).selectAll("."+n.shape).each((function(s,l){var c=a.select(this||e),d=s.data?s.data.id:s.id,u=i.getToggle(this||e,s).bind(i),h=o.data_selection_grouped||!t||t.indexOf(d)>=0,g=!r||r.indexOf(l)>=0,p=c.classed(n.SELECTED);c.classed(n.line)||c.classed(n.area)||h&&g&&o.data_selection_isselectable(s)&&p&&u(false,c.classed(n.SELECTED,false),s,l)}))};Chart.prototype.show=function(t,n){var r=(this||e).internal,i;t=r.mapToTargetIds(t);n=n||{};r.removeHiddenTargetIds(t);i=r.svg.selectAll(r.selectorTargets(t));i.transition().style("display",isIE()?"block":"initial","important").style("opacity",1,"important").call(r.endall,(function(){i.style("opacity",null).style("opacity",1)}));n.withLegend&&r.showLegend(t);r.redraw({withUpdateOrgXDomain:true,withUpdateXDomain:true,withLegend:true})};Chart.prototype.hide=function(t,n){var r=(this||e).internal,i;t=r.mapToTargetIds(t);n=n||{};r.addHiddenTargetIds(t);i=r.svg.selectAll(r.selectorTargets(t));i.transition().style("opacity",0,"important").call(r.endall,(function(){i.style("opacity",null).style("opacity",0);i.style("display","none")}));n.withLegend&&r.hideLegend(t);r.redraw({withUpdateOrgXDomain:true,withUpdateXDomain:true,withLegend:true})};Chart.prototype.toggle=function(t,n){var r=this||e,i=(this||e).internal;i.mapToTargetIds(t).forEach((function(t){i.isTargetToShow(t)?r.hide(t,n):r.show(t,n)}))};Chart.prototype.subchart=function(){};Chart.prototype.subchart.isShown=function(){var t=(this||e).internal;return t.config.subchart_show};Chart.prototype.subchart.show=function(){var t=(this||e).internal;if(!t.config.subchart_show){t.config.subchart_show=true;t.initSubchart();t.updateDimension();t.initSubchartBrush();t.updateTargetsForSubchart(t.getTargets());t.mapToIds(t.data.targets).forEach((function(e){t.withoutFadeIn[e]=false}));t.updateAndRedraw();t.showTargets()}};Chart.prototype.subchart.hide=function(){var t=(this||e).internal;if(t.config.subchart_show){t.config.subchart_show=false;t.removeSubchart();t.redraw()}};Chart.prototype.tooltip=function(){};Chart.prototype.tooltip.show=function(t){var n=(this||e).internal,r,i,a={};if(t.mouse)a=t.mouse;else{if(t.data)i=t.data;else if("undefined"!==typeof t.x){r=t.id?n.data.targets.filter((function(e){return e.id===t.id})):n.data.targets;i=n.filterByX(r,t.x).slice(0,1)[0]}a=i?n.getMousePosition(i):null}n.dispatchEvent("mousemove",a);n.config.tooltip_onshow.call(n,i)};Chart.prototype.tooltip.hide=function(){(this||e).internal.dispatchEvent("mouseout",0);(this||e).internal.config.tooltip_onhide.call(this||e)};Chart.prototype.transform=function(t,n){var r=(this||e).internal,i=["pie","donut"].indexOf(t)>=0?{withTransform:true}:null;r.transformTo(n,t,i)};ChartInternal.prototype.transformTo=function(t,n,r){var i=this||e,a=!i.hasArcType(),o=r||{withTransitionForAxis:a};o.withTransitionForTransform=false;i.transiting=false;i.setTargetType(t,n);i.updateTargets(i.data.targets);i.updateAndRedraw(o)};Chart.prototype.x=function(t){var n=(this||e).internal;if(arguments.length){n.updateTargetX(n.data.targets,t);n.redraw({withUpdateOrgXDomain:true,withUpdateXDomain:true})}return n.data.xs};Chart.prototype.xs=function(t){var n=(this||e).internal;if(arguments.length){n.updateTargetXs(n.data.targets,t);n.redraw({withUpdateOrgXDomain:true,withUpdateXDomain:true})}return n.data.xs};Chart.prototype.zoom=function(t){var n=(this||e).internal;if(t){n.isTimeSeries()&&(t=t.map((function(t){return n.parseDate(t)})));if(n.config.subchart_show)n.brush.selectionAsValue(t,true);else{n.updateXDomain(null,true,false,false,t);n.redraw({withY:n.config.zoom_rescale,withSubchart:false})}n.config.zoom_onzoom.call(this||e,n.x.orgDomain());return t}return n.x.domain()};Chart.prototype.zoom.enable=function(t){var n=(this||e).internal;n.config.zoom_enabled=t;n.updateAndRedraw()};Chart.prototype.unzoom=function(){var t=(this||e).internal;if(t.config.subchart_show)t.brush.clear();else{t.updateXDomain(null,true,false,false,t.subX.domain());t.redraw({withY:t.config.zoom_rescale,withSubchart:false})}};Chart.prototype.zoom.max=function(t){var n=(this||e).internal,r=n.config,i=n.d3;if(0!==t&&!t)return r.zoom_x_max;r.zoom_x_max=i.max([n.orgXDomain[1],t])};Chart.prototype.zoom.min=function(t){var n=(this||e).internal,r=n.config,i=n.d3;if(0!==t&&!t)return r.zoom_x_min;r.zoom_x_min=i.min([n.orgXDomain[0],t])};Chart.prototype.zoom.range=function(t){if(!arguments.length)return{max:(this||e).domain.max(),min:(this||e).domain.min()};isDefined(t.max)&&(this||e).domain.max(t.max);isDefined(t.min)&&(this||e).domain.min(t.min)};ChartInternal.prototype.initPie=function(){var t=this||e,n=t.d3;t.pie=n.pie().padAngle((this||e).getPadAngle.bind(this||e)).value((function(t){return t.values.reduce((function(t,e){return t+e.value}),0)}));var r=t.getOrderFunction();if(r&&(t.isOrderAsc()||t.isOrderDesc())){var i=r;r=function(t,e){return-1*i(t,e)}}t.pie.sort(r||null)};ChartInternal.prototype.updateRadius=function(){var t=this||e,n=t.config,r=n.gauge_width||n.donut_width,i=t.filterTargetsToShow(t.data.targets).length*t.config.gauge_arcs_minWidth;t.radiusExpanded=Math.min(t.arcWidth,t.arcHeight)/2*(t.hasType("gauge")?.85:1);t.radius=.95*t.radiusExpanded;t.innerRadiusRatio=r?(t.radius-r)/t.radius:.6;t.innerRadius=t.hasType("donut")||t.hasType("gauge")?t.radius*t.innerRadiusRatio:0;t.gaugeArcWidth=r||(i<=t.radius-t.innerRadius?t.radius-t.innerRadius:i<=t.radius?i:t.radius)};ChartInternal.prototype.getPadAngle=function(){return this.hasType("pie")?(this||e).config.pie_padAngle||0:this.hasType("donut")&&(this||e).config.donut_padAngle||0};ChartInternal.prototype.updateArc=function(){var t=this||e;t.svgArc=t.getSvgArc();t.svgArcExpanded=t.getSvgArcExpanded();t.svgArcExpandedSub=t.getSvgArcExpanded(.98)};ChartInternal.prototype.updateAngle=function(t){var n=this||e,r=n.config,i=false,a=0,o,s,l,c;if(!r)return null;n.pie(n.filterTargetsToShow(n.data.targets)).forEach((function(e){if(!i&&e.data.id===t.data.id){i=true;t=e;t.index=a}a++}));isNaN(t.startAngle)&&(t.startAngle=0);isNaN(t.endAngle)&&(t.endAngle=t.startAngle);if(n.isGaugeType(t.data)){o=r.gauge_min;s=r.gauge_max;l=Math.PI*(r.gauge_fullCircle?2:1)/(s-o);c=t.value<o?0:t.value<s?t.value-o:s-o;t.startAngle=r.gauge_startingAngle;t.endAngle=t.startAngle+l*c}return i?t:null};ChartInternal.prototype.getSvgArc=function(){var t=this||e,n=t.hasType("gauge"),r=t.gaugeArcWidth/t.filterTargetsToShow(t.data.targets).length,i=t.d3.arc().outerRadius((function(e){return n?t.radius-r*e.index:t.radius})).innerRadius((function(e){return n?t.radius-r*(e.index+1):t.innerRadius})),newArc=function(e,n){var r;if(n)return i(e);r=t.updateAngle(e);return r?i(r):"M 0 0"};newArc.centroid=i.centroid;return newArc};ChartInternal.prototype.getSvgArcExpanded=function(t){t=t||1;var n=this||e,r=n.hasType("gauge"),i=n.gaugeArcWidth/n.filterTargetsToShow(n.data.targets).length,a=Math.min(n.radiusExpanded*t-n.radius,.8*i-100*(1-t)),o=n.d3.arc().outerRadius((function(e){return r?n.radius-i*e.index+a:n.radiusExpanded*t})).innerRadius((function(t){return r?n.radius-i*(t.index+1):n.innerRadius}));return function(t){var e=n.updateAngle(t);return e?o(e):"M 0 0"}};ChartInternal.prototype.getArc=function(t,e,n){return n||this.isArcType(t.data)?this.svgArc(t,e):"M 0 0"};ChartInternal.prototype.transformForArcLabel=function(t){var n=this||e,r=n.config,i=n.updateAngle(t),a,o,s,l,c,d="",u=n.hasType("gauge");if(i&&!u){a=(this||e).svgArc.centroid(i);o=isNaN(a[0])?0:a[0];s=isNaN(a[1])?0:a[1];l=Math.sqrt(o*o+s*s);c=n.hasType("donut")&&r.donut_label_ratio?isFunction(r.donut_label_ratio)?r.donut_label_ratio(t,n.radius,l):r.donut_label_ratio:n.hasType("pie")&&r.pie_label_ratio?isFunction(r.pie_label_ratio)?r.pie_label_ratio(t,n.radius,l):r.pie_label_ratio:n.radius&&l?(36/n.radius>.375?1.175-36/n.radius:.8)*n.radius/l:0;d="translate("+o*c+","+s*c+")"}else if(i&&u&&n.filterTargetsToShow(n.data.targets).length>1){var h=Math.sin(i.endAngle-Math.PI/2);o=Math.cos(i.endAngle-Math.PI/2)*(n.radiusExpanded+25);s=h*(n.radiusExpanded+15-Math.abs(10*h))+3;d="translate("+o+","+s+")"}return d};
/**
   * @deprecated Use `getRatio('arc', d)` instead.
   */ChartInternal.prototype.getArcRatio=function(t){return this.getRatio("arc",t)};ChartInternal.prototype.convertToArcData=function(t){return this.addName({id:t.data.id,value:t.value,ratio:this.getRatio("arc",t),index:t.index})};ChartInternal.prototype.textForArcLabel=function(t){var n=this||e,r,i,a,o,s;if(!n.shouldShowArcLabel())return"";r=n.updateAngle(t);i=r?r.value:null;a=n.getRatio("arc",r);o=t.data.id;if(!n.hasType("gauge")&&!n.meetsArcLabelThreshold(a))return"";s=n.getArcLabelFormat();return s?s(i,a,o):n.defaultArcValueFormat(i,a)};ChartInternal.prototype.textForGaugeMinMax=function(t,n){var r=this||e,i=r.getGaugeLabelExtents();return i?i(t,n):t};ChartInternal.prototype.expandArc=function(t){var r=this||e,i;if(r.transiting)i=window.setInterval((function(){if(!r.transiting){window.clearInterval(i);r.legend.selectAll(".c3-legend-item-focused").size()>0&&r.expandArc(t)}}),10);else{t=r.mapToTargetIds(t);r.svg.selectAll(r.selectorTargets(t,"."+n.chartArc)).each((function(t){r.shouldExpand(t.data.id)&&r.d3.select(this||e).selectAll("path").transition().duration(r.expandDuration(t.data.id)).attr("d",r.svgArcExpanded).transition().duration(2*r.expandDuration(t.data.id)).attr("d",r.svgArcExpandedSub).each((function(t){r.isDonutType(t.data)}))}))}};ChartInternal.prototype.unexpandArc=function(t){var r=this||e;if(!r.transiting){t=r.mapToTargetIds(t);r.svg.selectAll(r.selectorTargets(t,"."+n.chartArc)).selectAll("path").transition().duration((function(t){return r.expandDuration(t.data.id)})).attr("d",r.svgArc);r.svg.selectAll("."+n.arc)}};ChartInternal.prototype.expandDuration=function(t){var n=this||e,r=n.config;return n.isDonutType(t)?r.donut_expand_duration:n.isGaugeType(t)?r.gauge_expand_duration:n.isPieType(t)?r.pie_expand_duration:50};ChartInternal.prototype.shouldExpand=function(t){var n=this||e,r=n.config;return n.isDonutType(t)&&r.donut_expand||n.isGaugeType(t)&&r.gauge_expand||n.isPieType(t)&&r.pie_expand};ChartInternal.prototype.shouldShowArcLabel=function(){var t=this||e,n=t.config,r=true;t.hasType("donut")?r=n.donut_label_show:t.hasType("pie")&&(r=n.pie_label_show);return r};ChartInternal.prototype.meetsArcLabelThreshold=function(t){var n=this||e,r=n.config,i=n.hasType("donut")?r.donut_label_threshold:r.pie_label_threshold;return t>=i};ChartInternal.prototype.getArcLabelFormat=function(){var t=this||e,n=t.config,r=n.pie_label_format;t.hasType("gauge")?r=n.gauge_label_format:t.hasType("donut")&&(r=n.donut_label_format);return r};ChartInternal.prototype.getGaugeLabelExtents=function(){var t=this||e,n=t.config;return n.gauge_label_extents};ChartInternal.prototype.getArcTitle=function(){var t=this||e;return t.hasType("donut")?t.config.donut_title:""};ChartInternal.prototype.updateTargetsForArc=function(t){var r=this||e,i=r.main,a,o,s=r.classChartArc.bind(r),l=r.classArcs.bind(r),c=r.classFocus.bind(r);a=i.select("."+n.chartArcs).selectAll("."+n.chartArc).data(r.pie(t)).attr("class",(function(t){return s(t)+c(t.data)}));o=a.enter().append("g").attr("class",s);o.append("g").attr("class",l);o.append("text").attr("dy",r.hasType("gauge")?"-.1em":".35em").style("opacity",0).style("text-anchor","middle").style("pointer-events","none")};ChartInternal.prototype.initArc=function(){var t=this||e;t.arcs=t.main.select("."+n.chart).append("g").attr("class",n.chartArcs).attr("transform",t.getTranslate("arc"));t.arcs.append("text").attr("class",n.chartArcsTitle).style("text-anchor","middle").text(t.getArcTitle())};ChartInternal.prototype.redrawArc=function(t,r,i){var a=this||e,o=a.d3,s=a.config,l=a.main,c,d,u,h,g=a.hasType("gauge");c=l.selectAll("."+n.arcs).selectAll("."+n.arc).data(a.arcData.bind(a));d=c.enter().append("path").attr("class",a.classArc.bind(a)).style("fill",(function(t){return a.color(t.data)})).style("cursor",(function(t){return s.interaction_enabled&&s.data_selection_isselectable(t)?"pointer":null})).each((function(t){a.isGaugeType(t.data)&&(t.startAngle=t.endAngle=s.gauge_startingAngle);(this||e)._current=t})).merge(c);if(g){u=l.selectAll("."+n.arcs).selectAll("."+n.arcLabelLine).data(a.arcData.bind(a));h=u.enter().append("rect").attr("class",(function(t){return n.arcLabelLine+" "+n.target+" "+n.target+"-"+t.data.id})).merge(u);1===a.filterTargetsToShow(a.data.targets).length?h.style("display","none"):h.style("fill",(function(t){return a.levelColor?a.levelColor(t.data.values.reduce((function(t,e){return t+e.value}),0)):a.color(t.data)})).style("display",s.gauge_labelLine_show?"":"none").each((function(t){var n=0,r=2,i=0,s=0,l="";if(a.hiddenTargetIds.indexOf(t.data.id)<0){var c=a.updateAngle(t),d=a.gaugeArcWidth/a.filterTargetsToShow(a.data.targets).length*(c.index+1),u=c.endAngle-Math.PI/2,h=a.radius-d,g=u-(0===h?0:1/h);n=a.radiusExpanded-a.radius+d;i=Math.cos(g)*h;s=Math.sin(g)*h;l="rotate("+180*u/Math.PI+", "+i+", "+s+")"}o.select(this||e).attr("x",i).attr("y",s).attr("width",n).attr("height",r).attr("transform",l).style("stroke-dasharray","0, "+(n+r)+", 0")}))}d.attr("transform",(function(t){return!a.isGaugeType(t.data)&&i?"scale(0)":""})).on("mouseover",s.interaction_enabled?function(t){var n,r;if(!a.transiting){n=a.updateAngle(t);if(n){r=a.convertToArcData(n);a.expandArc(n.data.id);a.api.focus(n.data.id);a.toggleFocusLegend(n.data.id,true);a.config.data_onmouseover(r,this||e)}}}:null).on("mousemove",s.interaction_enabled?function(t){var n=a.updateAngle(t),r,i;if(n){r=a.convertToArcData(n),i=[r];a.showTooltip(i,this||e)}}:null).on("mouseout",s.interaction_enabled?function(t){var n,r;if(!a.transiting){n=a.updateAngle(t);if(n){r=a.convertToArcData(n);a.unexpandArc(n.data.id);a.api.revert();a.revertLegend();a.hideTooltip();a.config.data_onmouseout(r,this||e)}}}:null).on("click",s.interaction_enabled?function(t,n){var r=a.updateAngle(t),i;if(r){i=a.convertToArcData(r);a.toggleShape&&a.toggleShape(this||e,i,n);a.config.data_onclick.call(a.api,i,this||e)}}:null).each((function(){a.transiting=true})).transition().duration(t).attrTween("d",(function(t){var n=a.updateAngle(t),r;if(!n)return function(){return"M 0 0"};isNaN((this||e)._current.startAngle)&&((this||e)._current.startAngle=0);isNaN((this||e)._current.endAngle)&&((this||e)._current.endAngle=(this||e)._current.startAngle);r=o.interpolate((this||e)._current,n);(this||e)._current=r(0);return function(e){if(null===a.config)return"M 0 0";var n=r(e);n.data=t.data;return a.getArc(n,true)}})).attr("transform",i?"scale(1)":"").style("fill",(function(t){return a.levelColor?a.levelColor(t.data.values.reduce((function(t,e){return t+e.value}),0)):a.color(t.data.id)})).call(a.endall,(function(){a.transiting=false}));c.exit().transition().duration(r).style("opacity",0).remove();l.selectAll("."+n.chartArc).select("text").style("opacity",0).attr("class",(function(t){return a.isGaugeType(t.data)?n.gaugeValue:""})).text(a.textForArcLabel.bind(a)).attr("transform",a.transformForArcLabel.bind(a)).style("font-size",(function(t){return a.isGaugeType(t.data)&&1===a.filterTargetsToShow(a.data.targets).length?Math.round(a.radius/5)+"px":""})).transition().duration(t).style("opacity",(function(t){return a.isTargetToShow(t.data.id)&&a.isArcType(t.data)?1:0}));l.select("."+n.chartArcsTitle).style("opacity",a.hasType("donut")||g?1:0);if(g){var p=0;var x=a.arcs.select("g."+n.chartArcsBackground).selectAll("path."+n.chartArcsBackground).data(a.data.targets);x.enter().append("path").attr("class",(function(t,e){return n.chartArcsBackground+" "+n.chartArcsBackground+"-"+e})).merge(x).attr("d",(function(t){if(a.hiddenTargetIds.indexOf(t.id)>=0)return"M 0 0";var e={data:[{value:s.gauge_max}],startAngle:s.gauge_startingAngle,endAngle:-1*s.gauge_startingAngle*(s.gauge_fullCircle?Math.PI:1),index:p++};return a.getArc(e,true,true)}));x.exit().remove();a.arcs.select("."+n.chartArcsGaugeUnit).attr("dy",".75em").text(s.gauge_label_show?s.gauge_units:"");a.arcs.select("."+n.chartArcsGaugeMin).attr("dx",-1*(a.innerRadius+(a.radius-a.innerRadius)/(s.gauge_fullCircle?1:2))+"px").attr("dy","1.2em").text(s.gauge_label_show?a.textForGaugeMinMax(s.gauge_min,false):"");a.arcs.select("."+n.chartArcsGaugeMax).attr("dx",a.innerRadius+(a.radius-a.innerRadius)/(s.gauge_fullCircle?1:2)+"px").attr("dy","1.2em").text(s.gauge_label_show?a.textForGaugeMinMax(s.gauge_max,true):"")}};ChartInternal.prototype.initGauge=function(){var t=(this||e).arcs;if(this.hasType("gauge")){t.append("g").attr("class",n.chartArcsBackground);t.append("text").attr("class",n.chartArcsGaugeUnit).style("text-anchor","middle").style("pointer-events","none");t.append("text").attr("class",n.chartArcsGaugeMin).style("text-anchor","middle").style("pointer-events","none");t.append("text").attr("class",n.chartArcsGaugeMax).style("text-anchor","middle").style("pointer-events","none")}};ChartInternal.prototype.getGaugeLabelHeight=function(){return(this||e).config.gauge_label_show?20:0};
/**
   * Store value into cache
   *
   * @param key
   * @param value
   */ChartInternal.prototype.addToCache=function(t,n){(this||e).cache["$"+t]=n};
/**
   * Returns a cached value or undefined
   *
   * @param key
   * @return {*}
   */ChartInternal.prototype.getFromCache=function(t){return(this||e).cache["$"+t]};ChartInternal.prototype.resetCache=function(){var t=this||e;Object.keys((this||e).cache).filter((function(t){return/^\$/.test(t)})).forEach((function(e){delete t.cache[e]}))};ChartInternal.prototype.hasCaches=function(t){for(var n=0;n<t.length;n++)if(!(t[n]in(this||e).cache))return false;return true};ChartInternal.prototype.addCache=function(t,n){(this||e).cache[t]=this.cloneTarget(n)};ChartInternal.prototype.getCaches=function(t){var n=[],r;for(r=0;r<t.length;r++)t[r]in(this||e).cache&&n.push(this.cloneTarget((this||e).cache[t[r]]));return n};ChartInternal.prototype.categoryName=function(t){var n=(this||e).config;return t<n.axis_x_categories.length?n.axis_x_categories[t]:t};ChartInternal.prototype.generateTargetClass=function(t){return t||0===t?("-"+t).replace(/\s/g,"-"):""};ChartInternal.prototype.generateClass=function(t,e){return" "+t+" "+t+this.generateTargetClass(e)};ChartInternal.prototype.classText=function(t){return this.generateClass(n.text,t.index)};ChartInternal.prototype.classTexts=function(t){return this.generateClass(n.texts,t.id)};ChartInternal.prototype.classShape=function(t){return this.generateClass(n.shape,t.index)};ChartInternal.prototype.classShapes=function(t){return this.generateClass(n.shapes,t.id)};ChartInternal.prototype.classLine=function(t){return this.classShape(t)+this.generateClass(n.line,t.id)};ChartInternal.prototype.classLines=function(t){return this.classShapes(t)+this.generateClass(n.lines,t.id)};ChartInternal.prototype.classCircle=function(t){return this.classShape(t)+this.generateClass(n.circle,t.index)};ChartInternal.prototype.classCircles=function(t){return this.classShapes(t)+this.generateClass(n.circles,t.id)};ChartInternal.prototype.classBar=function(t){return this.classShape(t)+this.generateClass(n.bar,t.index)};ChartInternal.prototype.classBars=function(t){return this.classShapes(t)+this.generateClass(n.bars,t.id)};ChartInternal.prototype.classArc=function(t){return this.classShape(t.data)+this.generateClass(n.arc,t.data.id)};ChartInternal.prototype.classArcs=function(t){return this.classShapes(t.data)+this.generateClass(n.arcs,t.data.id)};ChartInternal.prototype.classArea=function(t){return this.classShape(t)+this.generateClass(n.area,t.id)};ChartInternal.prototype.classAreas=function(t){return this.classShapes(t)+this.generateClass(n.areas,t.id)};ChartInternal.prototype.classRegion=function(t,e){return this.generateClass(n.region,e)+" "+("class"in t?t["class"]:"")};ChartInternal.prototype.classEvent=function(t){return this.generateClass(n.eventRect,t.index)};ChartInternal.prototype.classTarget=function(t){var r=this||e;var i=r.config.data_classes[t],a="";i&&(a=" "+n.target+"-"+i);return r.generateClass(n.target,t)+a};ChartInternal.prototype.classFocus=function(t){return this.classFocused(t)+this.classDefocused(t)};ChartInternal.prototype.classFocused=function(t){return" "+((this||e).focusedTargetIds.indexOf(t.id)>=0?n.focused:"")};ChartInternal.prototype.classDefocused=function(t){return" "+((this||e).defocusedTargetIds.indexOf(t.id)>=0?n.defocused:"")};ChartInternal.prototype.classChartText=function(t){return n.chartText+this.classTarget(t.id)};ChartInternal.prototype.classChartLine=function(t){return n.chartLine+this.classTarget(t.id)};ChartInternal.prototype.classChartBar=function(t){return n.chartBar+this.classTarget(t.id)};ChartInternal.prototype.classChartArc=function(t){return n.chartArc+this.classTarget(t.data.id)};ChartInternal.prototype.getTargetSelectorSuffix=function(t){var e=this.generateTargetClass(t);return window.CSS&&window.CSS.escape?window.CSS.escape(e):e.replace(/([?!@#$%^&*()=+,.<>'":;\[\]\/|~`{}\\])/g,"\\$1")};ChartInternal.prototype.selectorTarget=function(t,e){return(e||"")+"."+n.target+this.getTargetSelectorSuffix(t)};ChartInternal.prototype.selectorTargets=function(t,n){var r=this||e;t=t||[];return t.length?t.map((function(t){return r.selectorTarget(t,n)})):null};ChartInternal.prototype.selectorLegend=function(t){return"."+n.legendItem+this.getTargetSelectorSuffix(t)};ChartInternal.prototype.selectorLegends=function(t){var n=this||e;return t&&t.length?t.map((function(t){return n.selectorLegend(t)})):null};ChartInternal.prototype.getClipPath=function(t){return"url("+(isIE(9)?"":document.URL.split("#")[0])+"#"+t+")"};ChartInternal.prototype.appendClip=function(t,e){return t.append("clipPath").attr("id",e).append("rect")};ChartInternal.prototype.getAxisClipX=function(t){var n=Math.max(30,(this||e).margin.left);return t?-(1+n):-(n-1)};ChartInternal.prototype.getAxisClipY=function(t){return t?-20:-(this||e).margin.top};ChartInternal.prototype.getXAxisClipX=function(){var t=this||e;return t.getAxisClipX(!t.config.axis_rotated)};ChartInternal.prototype.getXAxisClipY=function(){var t=this||e;return t.getAxisClipY(!t.config.axis_rotated)};ChartInternal.prototype.getYAxisClipX=function(){var t=this||e;return t.config.axis_y_inner?-1:t.getAxisClipX(t.config.axis_rotated)};ChartInternal.prototype.getYAxisClipY=function(){var t=this||e;return t.getAxisClipY(t.config.axis_rotated)};ChartInternal.prototype.getAxisClipWidth=function(t){var n=this||e,r=Math.max(30,n.margin.left),i=Math.max(30,n.margin.right);return t?n.width+2+r+i:n.margin.left+20};ChartInternal.prototype.getAxisClipHeight=function(t){return(t?(this||e).margin.bottom:(this||e).margin.top+(this||e).height)+20};ChartInternal.prototype.getXAxisClipWidth=function(){var t=this||e;return t.getAxisClipWidth(!t.config.axis_rotated)};ChartInternal.prototype.getXAxisClipHeight=function(){var t=this||e;return t.getAxisClipHeight(!t.config.axis_rotated)};ChartInternal.prototype.getYAxisClipWidth=function(){var t=this||e;return t.getAxisClipWidth(t.config.axis_rotated)+(t.config.axis_y_inner?20:0)};ChartInternal.prototype.getYAxisClipHeight=function(){var t=this||e;return t.getAxisClipHeight(t.config.axis_rotated)};ChartInternal.prototype.generateColor=function(){var t=this||e,n=t.config,r=t.d3,i=n.data_colors,a=notEmpty(n.color_pattern)?n.color_pattern:r.schemeCategory10,o=n.data_color,s=[];return function(t){var e=t.id||t.data&&t.data.id||t,n;if(i[e]instanceof Function)n=i[e](t);else if(i[e])n=i[e];else{s.indexOf(e)<0&&s.push(e);n=a[s.indexOf(e)%a.length];i[e]=n}return o instanceof Function?o(n,t):n}};ChartInternal.prototype.generateLevelColor=function(){var t=this||e,n=t.config,r=n.color_pattern,i=n.color_threshold,a="value"===i.unit,o=i.values&&i.values.length?i.values:[],s=i.max||100;return notEmpty(i)&&notEmpty(r)?function(t){var e,n,i=r[r.length-1];for(e=0;e<o.length;e++){n=a?t:100*t/s;if(n<o[e]){i=r[e];break}}return i}:null};ChartInternal.prototype.getDefaultConfig=function(){var t={bindto:"#chart",svg_classname:void 0,size_width:void 0,size_height:void 0,padding_left:void 0,padding_right:void 0,padding_top:void 0,padding_bottom:void 0,resize_auto:true,zoom_enabled:false,zoom_initialRange:void 0,zoom_type:"scroll",zoom_disableDefaultBehavior:false,zoom_privileged:false,zoom_rescale:false,zoom_onzoom:function(){},zoom_onzoomstart:function(){},zoom_onzoomend:function(){},zoom_x_min:void 0,zoom_x_max:void 0,interaction_brighten:true,interaction_enabled:true,onmouseover:function(){},onmouseout:function(){},onresize:function(){},onresized:function(){},oninit:function(){},onrendered:function(){},transition_duration:350,data_epochs:"epochs",data_x:void 0,data_xs:{},data_xFormat:"%Y-%m-%d",data_xLocaltime:true,data_xSort:true,data_idConverter:function(t){return t},data_names:{},data_classes:{},data_groups:[],data_axes:{},data_type:void 0,data_types:{},data_labels:{},data_order:"desc",data_regions:{},data_color:void 0,data_colors:{},data_hide:false,data_filter:void 0,data_selection_enabled:false,data_selection_grouped:false,data_selection_isselectable:function(){return true},data_selection_multiple:true,data_selection_draggable:false,data_stack_normalize:false,data_onclick:function(){},data_onmouseover:function(){},data_onmouseout:function(){},data_onselected:function(){},data_onunselected:function(){},data_url:void 0,data_headers:void 0,data_json:void 0,data_rows:void 0,data_columns:void 0,data_mimeType:void 0,data_keys:void 0,data_empty_label_text:"",subchart_show:false,subchart_size_height:60,subchart_axis_x_show:true,subchart_onbrush:function(){},color_pattern:[],color_threshold:{},legend_show:true,legend_hide:false,legend_position:"bottom",legend_inset_anchor:"top-left",legend_inset_x:10,legend_inset_y:0,legend_inset_step:void 0,legend_item_onclick:void 0,legend_item_onmouseover:void 0,legend_item_onmouseout:void 0,legend_equally:false,legend_padding:0,legend_item_tile_width:10,legend_item_tile_height:10,axis_rotated:false,axis_x_show:true,axis_x_type:"indexed",axis_x_localtime:true,axis_x_categories:[],axis_x_tick_centered:false,axis_x_tick_format:void 0,axis_x_tick_culling:{},axis_x_tick_culling_max:10,axis_x_tick_count:void 0,axis_x_tick_fit:true,axis_x_tick_values:null,axis_x_tick_rotate:0,axis_x_tick_outer:true,axis_x_tick_multiline:true,axis_x_tick_multilineMax:0,axis_x_tick_width:null,axis_x_max:void 0,axis_x_min:void 0,axis_x_padding:{},axis_x_height:void 0,axis_x_selection:void 0,axis_x_label:{},axis_x_inner:void 0,axis_y_show:true,axis_y_type:"linear",axis_y_max:void 0,axis_y_min:void 0,axis_y_inverted:false,axis_y_center:void 0,axis_y_inner:void 0,axis_y_label:{},axis_y_tick_format:void 0,axis_y_tick_outer:true,axis_y_tick_values:null,axis_y_tick_rotate:0,axis_y_tick_count:void 0,axis_y_tick_time_type:void 0,axis_y_tick_time_interval:void 0,axis_y_padding:{},axis_y_default:void 0,axis_y2_show:false,axis_y2_type:"linear",axis_y2_max:void 0,axis_y2_min:void 0,axis_y2_inverted:false,axis_y2_center:void 0,axis_y2_inner:void 0,axis_y2_label:{},axis_y2_tick_format:void 0,axis_y2_tick_outer:true,axis_y2_tick_values:null,axis_y2_tick_count:void 0,axis_y2_padding:{},axis_y2_default:void 0,grid_x_show:false,grid_x_type:"tick",grid_x_lines:[],grid_y_show:false,grid_y_lines:[],grid_y_ticks:10,grid_focus_show:true,grid_lines_front:true,point_show:true,point_r:2.5,point_sensitivity:10,point_focus_expand_enabled:true,point_focus_expand_r:void 0,point_select_r:void 0,line_connectNull:false,line_step_type:"step",bar_width:void 0,bar_width_ratio:.6,bar_width_max:void 0,bar_zerobased:true,bar_space:0,area_zerobased:true,area_above:false,pie_label_show:true,pie_label_format:void 0,pie_label_threshold:.05,pie_label_ratio:void 0,pie_expand:{},pie_expand_duration:50,pie_padAngle:0,gauge_fullCircle:false,gauge_label_show:true,gauge_labelLine_show:true,gauge_label_format:void 0,gauge_min:0,gauge_max:100,gauge_startingAngle:-1*Math.PI/2,gauge_label_extents:void 0,gauge_units:void 0,gauge_width:void 0,gauge_arcs_minWidth:5,gauge_expand:{},gauge_expand_duration:50,donut_label_show:true,donut_label_format:void 0,donut_label_threshold:.05,donut_label_ratio:void 0,donut_width:void 0,donut_title:"",donut_expand:{},donut_expand_duration:50,donut_padAngle:0,spline_interpolation_type:"cardinal",stanford_lines:[],stanford_regions:[],stanford_texts:[],stanford_scaleMin:void 0,stanford_scaleMax:void 0,stanford_scaleWidth:void 0,stanford_scaleFormat:void 0,stanford_scaleValues:void 0,stanford_colors:void 0,stanford_padding:{top:0,right:0,bottom:0,left:0},regions:[],tooltip_show:true,tooltip_grouped:true,tooltip_order:void 0,tooltip_format_title:void 0,tooltip_format_name:void 0,tooltip_format_value:void 0,tooltip_horizontal:void 0,tooltip_position:void 0,tooltip_contents:function(t,n,r,i){return(this||e).getTooltipContent?this.getTooltipContent(t,n,r,i):""},tooltip_init_show:false,tooltip_init_x:0,tooltip_init_position:{top:"0px",left:"50px"},tooltip_onshow:function(){},tooltip_onhide:function(){},title_text:void 0,title_padding:{top:0,right:0,bottom:0,left:0},title_position:"top-center"};Object.keys((this||e).additionalConfig).forEach((function(n){t[n]=(this||e).additionalConfig[n]}),this||e);return t};ChartInternal.prototype.additionalConfig={};ChartInternal.prototype.loadConfig=function(t){var n=(this||e).config,r,i,a;function find(){var t=i.shift();if(t&&r&&"object"===typeof r&&t in r){r=r[t];return find()}return t?void 0:r}Object.keys(n).forEach((function(e){r=t;i=e.split("_");a=find();isDefined(a)&&(n[e]=a)}))};ChartInternal.prototype.convertUrlToData=function(t,n,r,i,a){var o=this||e,s=n||"csv",l,c;if("json"===s){l=o.d3.json;c=o.convertJsonToData}else if("tsv"===s){l=o.d3.tsv;c=o.convertXsvToData}else{l=o.d3.csv;c=o.convertXsvToData}l(t,r).then((function(t){a.call(o,c.call(o,t,i))})).catch((function(t){throw t}))};ChartInternal.prototype.convertXsvToData=function(t){var e=t.columns,n=t;return 0===n.length?{keys:e,rows:[e.reduce((function(t,e){var n;return Object.assign(t,(n={},n[e]=null,n))}),{})]}:{keys:e,rows:[].concat(t)}};ChartInternal.prototype.convertJsonToData=function(t,n){var r=this||e,i=[],a,o;if(n){if(n.x){a=n.value.concat(n.x);r.config.data_x=n.x}else a=n.value;i.push(a);t.forEach((function(t){var e=[];a.forEach((function(n){var i=r.findValueInJson(t,n);isUndefined(i)&&(i=null);e.push(i)}));i.push(e)}));o=r.convertRowsToData(i)}else{Object.keys(t).forEach((function(e){i.push([e].concat(t[e]))}));o=r.convertColumnsToData(i)}return o};
/**
   * Finds value from the given nested object by the given path.
   * If it's not found, then this returns undefined.
   * @param {Object} object the object
   * @param {string} path the path
   */ChartInternal.prototype.findValueInJson=function(t,e){if(e in t)return t[e];e=e.replace(/\[(\w+)\]/g,".$1");e=e.replace(/^\./,"");var n=e.split(".");for(var r=0;r<n.length;++r){var i=n[r];if(!(i in t))return;t=t[i]}return t};
/**
   * Converts the rows to normalized data.
   * @param {any[][]} rows The row data
   * @return {Object}
   */ChartInternal.prototype.convertRowsToData=function(t){var e=[];var n=t[0];for(var r=1;r<t.length;r++){var i={};for(var a=0;a<t[r].length;a++){if(isUndefined(t[r][a]))throw new Error("Source data is missing a component at ("+r+","+a+")!");i[n[a]]=t[r][a]}e.push(i)}return{keys:n,rows:e}};
/**
   * Converts the columns to normalized data.
   * @param {any[][]} columns The column data
   * @return {Object}
   */ChartInternal.prototype.convertColumnsToData=function(t){var e=[];var n=[];for(var r=0;r<t.length;r++){var i=t[r][0];for(var a=1;a<t[r].length;a++){isUndefined(e[a-1])&&(e[a-1]={});if(isUndefined(t[r][a]))throw new Error("Source data is missing a component at ("+r+","+a+")!");e[a-1][i]=t[r][a]}n.push(i)}return{keys:n,rows:e}};
/**
   * Converts the data format into the target format.
   * @param {!Object} data
   * @param {!Array} data.keys Ordered list of target IDs.
   * @param {!Array} data.rows Rows of data to convert.
   * @param {boolean} appendXs True to append to $$.data.xs, False to replace.
   * @return {!Array}
   */ChartInternal.prototype.convertDataToTargets=function(t,n){var r=this||e,i=r.config,a,o,s,l,c;if(isArray(t))l=Object.keys(t[0]);else{l=t.keys;t=t.rows}s=l.filter(r.isX,r);if(r.isStanfordGraphType()){c=l.filter(r.isEpochs,r);o=l.filter(r.isNotXAndNotEpochs,r);if(1!==s.length||1!==c.length||1!==o.length)throw new Error("You must define the 'x' key name and the 'epochs' for Stanford Diagrams")}else o=l.filter(r.isNotX,r);o.forEach((function(e){var a=r.getXKey(e);r.isCustomX()||r.isTimeSeries()?s.indexOf(a)>=0?r.data.xs[e]=(n&&r.data.xs[e]?r.data.xs[e]:[]).concat(t.map((function(t){return t[a]})).filter(isValue).map((function(t,n){return r.generateTargetX(t,e,n)}))):i.data_x?r.data.xs[e]=r.getOtherTargetXs():notEmpty(i.data_xs)&&(r.data.xs[e]=r.getXValuesOfXKey(a,r.data.targets)):r.data.xs[e]=t.map((function(t,e){return e}))}));o.forEach((function(t){if(!r.data.xs[t])throw new Error('x is not defined for id = "'+t+'".')}));a=o.map((function(e,n){var a=i.data_idConverter(e);return{id:a,id_org:e,values:t.map((function(t,o){var s=r.getXKey(e),l=t[s],d=null===t[e]||isNaN(t[e])?null:+t[e],u,h;if(r.isCustomX()&&r.isCategorized()&&!isUndefined(l)){0===n&&0===o&&(i.axis_x_categories=[]);u=i.axis_x_categories.indexOf(l);if(-1===u){u=i.axis_x_categories.length;i.axis_x_categories.push(l)}}else u=r.generateTargetX(l,e,o);(isUndefined(t[e])||r.data.xs[e].length<=o)&&(u=void 0);h={x:u,value:d,id:a};r.isStanfordGraphType()&&(h.epochs=t[c]);return h})).filter((function(t){return isDefined(t.x)}))}}));a.forEach((function(t){var e;i.data_xSort&&(t.values=t.values.sort((function(t,e){var n=t.x||0===t.x?t.x:Infinity,r=e.x||0===e.x?e.x:Infinity;return n-r})));e=0;t.values.forEach((function(t){t.index=e++}));r.data.xs[t.id].sort((function(t,e){return t-e}))}));r.hasNegativeValue=r.hasNegativeValueInTargets(a);r.hasPositiveValue=r.hasPositiveValueInTargets(a);i.data_type&&r.setTargetType(r.mapToIds(a).filter((function(t){return!(t in i.data_types)})),i.data_type);a.forEach((function(t){r.addCache(t.id_org,t)}));return a};ChartInternal.prototype.isEpochs=function(t){var n=this||e,r=n.config;return r.data_epochs&&t===r.data_epochs};ChartInternal.prototype.isX=function(t){var n=this||e,r=n.config;return r.data_x&&t===r.data_x||notEmpty(r.data_xs)&&hasValue(r.data_xs,t)};ChartInternal.prototype.isNotX=function(t){return!this.isX(t)};ChartInternal.prototype.isNotXAndNotEpochs=function(t){return!this.isX(t)&&!this.isEpochs(t)};ChartInternal.prototype.isStackNormalized=function(){return(this||e).config.data_stack_normalize&&(this||e).config.data_groups.length>0};
/**
   * Returns whether the axis is normalized or not.
   *
   * An axis is normalized as long as one of its associated target
   * is normalized.
   *
   * @param axisId Axis ID (y or y2)
   * @return {Boolean}
   */ChartInternal.prototype.isAxisNormalized=function(t){var n=this||e;return!!n.isStackNormalized()&&n.data.targets.filter((function(e){return n.axis.getId(e.id)===t})).some((function(t){return n.isTargetNormalized(t.id)}))};
/**
   * Returns whether the values for this target ID is normalized or not.
   *
   * To be normalized the option needs to be enabled and target needs
   * to be defined in `data.groups`.
   *
   * @param targetId ID of the target
   * @return {Boolean} True if the target is normalized, false otherwise.
   */ChartInternal.prototype.isTargetNormalized=function(t){var n=this||e;return n.isStackNormalized()&&n.config.data_groups.some((function(e){return e.includes(t)}))};ChartInternal.prototype.getXKey=function(t){var n=this||e,r=n.config;return r.data_x?r.data_x:notEmpty(r.data_xs)?r.data_xs[t]:null};
/**
   * Get sum of visible data per index for given axis.
   *
   * Expect axisId to be either 'y' or 'y2'.
   *
   * @private
   * @param axisId Compute sum for data associated to given axis.
   * @return {Array}
   */ChartInternal.prototype.getTotalPerIndex=function(t){var n=this||e;if(!n.isStackNormalized())return null;var r=n.getFromCache("getTotalPerIndex");if(void 0!==r)return r[t];var i={y:[],y2:[]};n.data.targets.filter((function(t){return n.isTargetNormalized(t.id)})).filter((function(t){return n.isTargetToShow(t.id)})).forEach((function(t){var e=i[n.axis.getId(t.id)];t.values.forEach((function(t,n){e[n]||(e[n]=0);e[n]+=isNumber(t.value)?t.value:0}))}));n.addToCache("getTotalPerIndex",i);return i[t]};ChartInternal.prototype.getTotalDataSum=function(){var t=this||e;var n=t.getFromCache("getTotalDataSum");if(void 0!==n)return n;var r=flattenArray(t.data.targets.filter((function(e){return t.isTargetToShow(e.id)})).map((function(t){return t.values}))).map((function(t){return t.value})).reduce((function(t,e){return t+e}),0);t.addToCache("getTotalDataSum",r);return r};ChartInternal.prototype.getXValuesOfXKey=function(t,n){var r=this||e,i,a=n&&notEmpty(n)?r.mapToIds(n):[];a.forEach((function(e){r.getXKey(e)===t&&(i=r.data.xs[e])}));return i};ChartInternal.prototype.getXValue=function(t,n){var r=this||e;return t in r.data.xs&&r.data.xs[t]&&isValue(r.data.xs[t][n])?r.data.xs[t][n]:n};ChartInternal.prototype.getOtherTargetXs=function(){var t=this||e,n=Object.keys(t.data.xs);return n.length?t.data.xs[n[0]]:null};ChartInternal.prototype.getOtherTargetX=function(t){var e=this.getOtherTargetXs();return e&&t<e.length?e[t]:null};ChartInternal.prototype.addXs=function(t){var n=this||e;Object.keys(t).forEach((function(e){n.config.data_xs[e]=t[e]}))};ChartInternal.prototype.addName=function(t){var n=this||e,r;if(t){r=n.config.data_names[t.id];t.name=void 0!==r?r:t.id}return t};ChartInternal.prototype.getValueOnIndex=function(t,e){var n=t.filter((function(t){return t.index===e}));return n.length?n[0]:null};ChartInternal.prototype.updateTargetX=function(t,n){var r=this||e;t.forEach((function(t){t.values.forEach((function(e,i){e.x=r.generateTargetX(n[i],t.id,i)}));r.data.xs[t.id]=n}))};ChartInternal.prototype.updateTargetXs=function(t,n){var r=this||e;t.forEach((function(t){n[t.id]&&r.updateTargetX([t],n[t.id])}))};ChartInternal.prototype.generateTargetX=function(t,n,r){var i=this||e,a;a=i.isTimeSeries()?t?i.parseDate(t):i.parseDate(i.getXValue(n,r)):i.isCustomX()&&!i.isCategorized()?isValue(t)?+t:i.getXValue(n,r):r;return a};ChartInternal.prototype.cloneTarget=function(t){return{id:t.id,id_org:t.id_org,values:t.values.map((function(t){return{x:t.x,value:t.value,id:t.id}}))}};ChartInternal.prototype.getMaxDataCount=function(){var t=this||e;return t.d3.max(t.data.targets,(function(t){return t.values.length}))};ChartInternal.prototype.mapToIds=function(t){return t.map((function(t){return t.id}))};ChartInternal.prototype.mapToTargetIds=function(t){var n=this||e;return t?[].concat(t):n.mapToIds(n.data.targets)};ChartInternal.prototype.hasTarget=function(t,e){var n=this.mapToIds(t),r;for(r=0;r<n.length;r++)if(n[r]===e)return true;return false};ChartInternal.prototype.isTargetToShow=function(t){return(this||e).hiddenTargetIds.indexOf(t)<0};ChartInternal.prototype.isLegendToShow=function(t){return(this||e).hiddenLegendIds.indexOf(t)<0};ChartInternal.prototype.getTargetsToShow=function(){var t=this||e;return t.filterTargetsToShow(t.data.targets)};ChartInternal.prototype.filterTargetsToShow=function(t){var n=this||e;return t.filter((function(t){return n.isTargetToShow(t.id)}))};ChartInternal.prototype.getTargets=function(){var t=this||e;return t.data.targets};ChartInternal.prototype.mapTargetsToUniqueXs=function(t){var n=this||e;var r=n.d3.set(n.d3.merge(t.map((function(t){return t.values.map((function(t){return+t.x}))})))).values();r=n.isTimeSeries()?r.map((function(t){return new Date(+t)})):r.map((function(t){return+t}));return r.sort((function(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}))};ChartInternal.prototype.addHiddenTargetIds=function(t){t=t instanceof Array?t:new Array(t);for(var n=0;n<t.length;n++)(this||e).hiddenTargetIds.indexOf(t[n])<0&&((this||e).hiddenTargetIds=(this||e).hiddenTargetIds.concat(t[n]));this.resetCache()};ChartInternal.prototype.removeHiddenTargetIds=function(t){(this||e).hiddenTargetIds=(this||e).hiddenTargetIds.filter((function(e){return t.indexOf(e)<0}));this.resetCache()};ChartInternal.prototype.addHiddenLegendIds=function(t){t=t instanceof Array?t:new Array(t);for(var n=0;n<t.length;n++)(this||e).hiddenLegendIds.indexOf(t[n])<0&&((this||e).hiddenLegendIds=(this||e).hiddenLegendIds.concat(t[n]))};ChartInternal.prototype.removeHiddenLegendIds=function(t){(this||e).hiddenLegendIds=(this||e).hiddenLegendIds.filter((function(e){return t.indexOf(e)<0}))};ChartInternal.prototype.getValuesAsIdKeyed=function(t){var e={};t.forEach((function(t){e[t.id]=[];t.values.forEach((function(n){e[t.id].push(n.value)}))}));return e};ChartInternal.prototype.checkValueInTargets=function(t,e){var n=Object.keys(t),r,i,a;for(r=0;r<n.length;r++){a=t[n[r]].values;for(i=0;i<a.length;i++)if(e(a[i].value))return true}return false};ChartInternal.prototype.hasNegativeValueInTargets=function(t){return this.checkValueInTargets(t,(function(t){return t<0}))};ChartInternal.prototype.hasPositiveValueInTargets=function(t){return this.checkValueInTargets(t,(function(t){return t>0}))};ChartInternal.prototype.isOrderDesc=function(){var t=(this||e).config;return"string"===typeof t.data_order&&"desc"===t.data_order.toLowerCase()};ChartInternal.prototype.isOrderAsc=function(){var t=(this||e).config;return"string"===typeof t.data_order&&"asc"===t.data_order.toLowerCase()};ChartInternal.prototype.getOrderFunction=function(){var t=this||e,n=t.config,r=t.isOrderAsc(),i=t.isOrderDesc();if(r||i){var reducer=function(t,e){return t+Math.abs(e.value)};return function(t,e){var n=t.values.reduce(reducer,0),i=e.values.reduce(reducer,0);return r?i-n:n-i}}if(isFunction(n.data_order))return n.data_order;if(isArray(n.data_order)){var a=n.data_order;return function(t,e){return a.indexOf(t.id)-a.indexOf(e.id)}}};ChartInternal.prototype.orderTargets=function(t){var e=this.getOrderFunction();e&&t.sort(e);return t};
/**
   * Returns all the values from the given targets at the given index.
   *
   * @param {Array} targets
   * @param {Number} index
   * @return {Array}
   */ChartInternal.prototype.filterByIndex=function(t,n){return(this||e).d3.merge(t.map((function(t){return t.values.filter((function(t){return t.index===n}))})))};ChartInternal.prototype.filterByX=function(t,n){return(this||e).d3.merge(t.map((function(t){return t.values}))).filter((function(t){return t.x-n===0}))};ChartInternal.prototype.filterRemoveNull=function(t){return t.filter((function(t){return isValue(t.value)}))};ChartInternal.prototype.filterByXDomain=function(t,e){return t.map((function(t){return{id:t.id,id_org:t.id_org,values:t.values.filter((function(t){return e[0]<=t.x&&t.x<=e[1]}))}}))};ChartInternal.prototype.hasDataLabel=function(){var t=(this||e).config;return!("boolean"!==typeof t.data_labels||!t.data_labels)||!("object"!==typeof t.data_labels||!notEmpty(t.data_labels))};ChartInternal.prototype.getDataLabelLength=function(t,n,r){var i=this||e,a=[0,0],o=1.3;i.selectChart.select("svg").selectAll(".dummy").data([t,n]).enter().append("text").text((function(t){return i.dataLabelFormat(t.id)(t)})).each((function(t,n){a[n]=getBBox(this||e)[r]*o})).remove();return a};
/**
   * Returns true if the given data point is not arc type, otherwise false.
   * @param {Object} d The data point
   * @return {boolean}
   */ChartInternal.prototype.isNoneArc=function(t){return this.hasTarget((this||e).data.targets,t.id)};
/**
   * Returns true if the given data point is arc type, otherwise false.
   * @param {Object} d The data point
   * @return {boolean}
   */ChartInternal.prototype.isArc=function(t){return"data"in t&&this.hasTarget((this||e).data.targets,t.data.id)};
/**
   * Find the closest point from the given pos among the given targets or
   * undefined if none satisfies conditions.
   *
   * @param {Array} targets
   * @param {Array} pos An [x,y] coordinate
   * @return {Object|undefined}
   */ChartInternal.prototype.findClosestFromTargets=function(t,n){var r=this||e;var i=t.map((function(t){return r.findClosest(t.values,n,r.config.tooltip_horizontal?r.horizontalDistance.bind(r):r.dist.bind(r),r.config.point_sensitivity)})).filter((function(t){return t}));return 0===i.length?void 0:1===i.length?i[0]:r.findClosest(i,n,r.dist.bind(r))};
/**
   * Find the closest point from the x value or undefined if none satisfies conditions.
   *
   * @param {Array} targets
   * @param {Array} x A value on X axis
   * @return {Object|undefined}
   */ChartInternal.prototype.findClosestFromTargetsByX=function(t,e){var n;var r;t.forEach((function(t){t.values.forEach((function(t){var i=Math.abs(e-t.x);if(void 0===r||i<r){n=t;r=i}}))}));return n};
/**
   * Using given compute distance method, returns the closest data point from the
   * given position.
   *
   * Giving optionally a minimum distance to satisfy.
   *
   * @param {Array} dataPoints List of DataPoints
   * @param {Array} pos An [x,y] coordinate
   * @param {Function} computeDist Function to compute distance between 2 points
   * @param {Number} minDist Minimal distance to satisfy
   * @return {Object|undefined} Closest data point
   */ChartInternal.prototype.findClosest=function(t,r,i,a){void 0===a&&(a=Infinity);var o=this||e;var s;t.filter((function(t){return t&&o.isBarType(t.id)})).forEach((function(t){if(!s){var e=o.main.select("."+n.bars+o.getTargetSelectorSuffix(t.id)+" ."+n.bar+"-"+t.index).node();o.isWithinBar(r,e)&&(s=t)}}));t.filter((function(t){return t&&!o.isBarType(t.id)})).forEach((function(t){var e=i(t,r);if(e<a){a=e;s=t}}));return s};ChartInternal.prototype.dist=function(t,n){var r=this||e,i=r.config,a=i.axis_rotated?1:0,o=i.axis_rotated?0:1,s=r.circleY(t,t.index),l=r.x(t.x);return Math.sqrt(Math.pow(l-n[a],2)+Math.pow(s-n[o],2))};ChartInternal.prototype.horizontalDistance=function(t,n){var r=this||e,i=r.config,a=i.axis_rotated?1:0,o=r.x(t.x);return Math.abs(o-n[a])};ChartInternal.prototype.convertValuesToStep=function(t){var e=[].concat(t),n;if(!this.isCategorized())return t;for(n=t.length+1;0<n;n--)e[n]=e[n-1];e[0]={x:e[0].x-1,value:e[0].value,id:e[0].id};e[t.length+1]={x:e[t.length].x+1,value:e[t.length].value,id:e[t.length].id};return e};
/**
   * Get ratio value
   *
   * @param {String} type Ratio for given type
   * @param {Object} d Data value object
   * @param {Boolean} asPercent Convert the return as percent or not
   * @return {Number} Ratio value
   * @private
   */ChartInternal.prototype.getRatio=function(t,n,r){void 0===r&&(r=false);var i=this||e;var a=i.api;var o=0;if(n&&a.data.shown.call(a).length){o=n.ratio||n.value;if("arc"===t)if(i.hasType("gauge"))o=(n.endAngle-n.startAngle)/(Math.PI*(i.config.gauge_fullCircle?2:1));else{var s=i.getTotalDataSum();o=n.value/s}else if("index"===t){var s=i.getTotalPerIndex(i.axis.getId(n.id));n.ratio=isNumber(n.value)&&s&&s[n.index]>0?n.value/s[n.index]:0;o=n.ratio}}return r&&o?100*o:o};ChartInternal.prototype.updateDataAttributes=function(t,n){var r=this||e,i=r.config,a=i["data_"+t];if("undefined"===typeof n)return a;Object.keys(n).forEach((function(t){a[t]=n[t]}));r.redraw({withLegend:true});return a};ChartInternal.prototype.load=function(t,n){var r=this||e;if(t){n.filter&&(t=t.filter(n.filter));(n.type||n.types)&&t.forEach((function(t){var e=n.types&&n.types[t.id]?n.types[t.id]:n.type;r.setTargetType(t.id,e)}));r.data.targets.forEach((function(e){for(var n=0;n<t.length;n++)if(e.id===t[n].id){e.values=t[n].values;t.splice(n,1);break}}));r.data.targets=r.data.targets.concat(t)}r.updateTargets(r.data.targets);r.redraw({withUpdateOrgXDomain:true,withUpdateXDomain:true,withLegend:true});n.done&&n.done()};ChartInternal.prototype.loadFromArgs=function(t){var n=this||e;n.resetCache();t.data?n.load(n.convertDataToTargets(t.data),t):t.url?n.convertUrlToData(t.url,t.mimeType,t.headers,t.keys,(function(e){n.load(n.convertDataToTargets(e),t)})):t.json?n.load(n.convertDataToTargets(n.convertJsonToData(t.json,t.keys)),t):t.rows?n.load(n.convertDataToTargets(n.convertRowsToData(t.rows)),t):t.columns?n.load(n.convertDataToTargets(n.convertColumnsToData(t.columns)),t):n.load(null,t)};ChartInternal.prototype.unload=function(t,r){var i=this||e;i.resetCache();r||(r=function(){});t=t.filter((function(t){return i.hasTarget(i.data.targets,t)}));if(t&&0!==t.length){i.svg.selectAll(t.map((function(t){return i.selectorTarget(t)}))).transition().style("opacity",0).remove().call(i.endall,r);t.forEach((function(t){i.withoutFadeIn[t]=false;i.legend&&i.legend.selectAll("."+n.legendItem+i.getTargetSelectorSuffix(t)).remove();i.data.targets=i.data.targets.filter((function(e){return e.id!==t}))}))}else r()};ChartInternal.prototype.getYDomainMin=function(t){var n=this||e,r=n.config,i=n.mapToIds(t),a=n.getValuesAsIdKeyed(t),o,s,l,c,d,u;if(r.data_groups.length>0){u=n.hasNegativeValueInTargets(t);for(o=0;o<r.data_groups.length;o++){c=r.data_groups[o].filter((function(t){return i.indexOf(t)>=0}));if(0!==c.length){l=c[0];u&&a[l]&&a[l].forEach((function(t,e){a[l][e]=t<0?t:0}));for(s=1;s<c.length;s++){d=c[s];a[d]&&a[d].forEach((function(t,e){n.axis.getId(d)!==n.axis.getId(l)||!a[l]||u&&+t>0||(a[l][e]+=+t)}))}}}}return n.d3.min(Object.keys(a).map((function(t){return n.d3.min(a[t])})))};ChartInternal.prototype.getYDomainMax=function(t){var n=this||e,r=n.config,i=n.mapToIds(t),a=n.getValuesAsIdKeyed(t),o,s,l,c,d,u;if(r.data_groups.length>0){u=n.hasPositiveValueInTargets(t);for(o=0;o<r.data_groups.length;o++){c=r.data_groups[o].filter((function(t){return i.indexOf(t)>=0}));if(0!==c.length){l=c[0];u&&a[l]&&a[l].forEach((function(t,e){a[l][e]=t>0?t:0}));for(s=1;s<c.length;s++){d=c[s];a[d]&&a[d].forEach((function(t,e){n.axis.getId(d)!==n.axis.getId(l)||!a[l]||u&&+t<0||(a[l][e]+=+t)}))}}}}return n.d3.max(Object.keys(a).map((function(t){return n.d3.max(a[t])})))};ChartInternal.prototype.getYDomain=function(t,n,r){var i=this||e,a=i.config;if(i.isAxisNormalized(n))return[0,100];var o=t.filter((function(t){return i.axis.getId(t.id)===n})),s=r?i.filterByXDomain(o,r):o,l="y2"===n?a.axis_y2_min:a.axis_y_min,c="y2"===n?a.axis_y2_max:a.axis_y_max,d=i.getYDomainMin(s),u=i.getYDomainMax(s),h,g,p,x,_="y2"===n?a.axis_y2_center:a.axis_y_center,y,m,v,S,w,b,C=i.hasType("bar",s)&&a.bar_zerobased||i.hasType("area",s)&&a.area_zerobased,T="y2"===n?a.axis_y2_inverted:a.axis_y_inverted,A=i.hasDataLabel()&&a.axis_rotated,I=i.hasDataLabel()&&!a.axis_rotated;d=isValue(l)?l:isValue(c)?d<c?d:c-10:d;u=isValue(c)?c:isValue(l)?l<u?u:l+10:u;if(0===s.length)return"y2"===n?i.y2.domain():i.y.domain();isNaN(d)&&(d=0);isNaN(u)&&(u=d);d===u&&(d<0?u=0:d=0);w=d>=0&&u>=0;b=d<=0&&u<=0;(isValue(l)&&w||isValue(c)&&b)&&(C=false);if(C){w&&(d=0);b&&(u=0)}g=Math.abs(u-d);p=x=.1*g;if("undefined"!==typeof _){y=Math.max(Math.abs(d),Math.abs(u));u=_+y;d=_-y}if(A){m=i.getDataLabelLength(d,u,"width");v=diffDomain(i.y.range());S=[m[0]/v,m[1]/v];p+=g*(S[1]/(1-S[0]-S[1]));x+=g*(S[0]/(1-S[0]-S[1]))}else if(I){m=i.getDataLabelLength(d,u,"height");var P=i.getY(a["axis_"+n+"_type"],[0,a.axis_rotated?i.width:i.height],[0,g]);p+=P(m[1]);x+=P(m[0])}if("y"===n&&notEmpty(a.axis_y_padding)){p=i.axis.getPadding(a.axis_y_padding,"top",p,g);x=i.axis.getPadding(a.axis_y_padding,"bottom",x,g)}if("y2"===n&&notEmpty(a.axis_y2_padding)){p=i.axis.getPadding(a.axis_y2_padding,"top",p,g);x=i.axis.getPadding(a.axis_y2_padding,"bottom",x,g)}if(C){w&&(x=d);b&&(p=-u)}h=[d-x,u+p];return T?h.reverse():h};ChartInternal.prototype.getXDomainMin=function(t){var n=this||e,r=n.config;return isDefined(r.axis_x_min)?n.isTimeSeries()?this.parseDate(r.axis_x_min):r.axis_x_min:n.d3.min(t,(function(t){return n.d3.min(t.values,(function(t){return t.x}))}))};ChartInternal.prototype.getXDomainMax=function(t){var n=this||e,r=n.config;return isDefined(r.axis_x_max)?n.isTimeSeries()?this.parseDate(r.axis_x_max):r.axis_x_max:n.d3.max(t,(function(t){return n.d3.max(t.values,(function(t){return t.x}))}))};ChartInternal.prototype.getXDomainPadding=function(t){var n=this||e,r=n.config,i=t[1]-t[0],a,o,s,l;if(n.isCategorized())o=0;else if(n.hasType("bar")){a=n.getMaxDataCount();o=a>1?i/(a-1)/2:.5}else o=.01*i;if("object"===typeof r.axis_x_padding&&notEmpty(r.axis_x_padding)){s=isValue(r.axis_x_padding.left)?r.axis_x_padding.left:o;l=isValue(r.axis_x_padding.right)?r.axis_x_padding.right:o}else s=l="number"===typeof r.axis_x_padding?r.axis_x_padding:o;return{left:s,right:l}};ChartInternal.prototype.getXDomain=function(t){var n=this||e,r=[n.getXDomainMin(t),n.getXDomainMax(t)],i=r[0],a=r[1],o=n.getXDomainPadding(r),s=0,l=0;if(i-a===0&&!n.isCategorized())if(n.isTimeSeries()){i=new Date(.5*i.getTime());a=new Date(1.5*a.getTime())}else{i=0===i?1:.5*i;a=0===a?-1:1.5*a}(i||0===i)&&(s=n.isTimeSeries()?new Date(i.getTime()-o.left):i-o.left);(a||0===a)&&(l=n.isTimeSeries()?new Date(a.getTime()+o.right):a+o.right);return[s,l]};ChartInternal.prototype.updateXDomain=function(t,n,r,i,a){var o=this||e,s=o.config;if(r){o.x.domain(a||o.d3.extent(o.getXDomain(t)));o.orgXDomain=o.x.domain();s.zoom_enabled&&o.zoom.update();o.subX.domain(o.x.domain());o.brush&&o.brush.updateScale(o.subX)}n&&o.x.domain(a||(!o.brush||o.brush.empty()?o.orgXDomain:o.brush.selectionAsValue()));i&&o.x.domain(o.trimXDomain(o.x.orgDomain()));return o.x.domain()};ChartInternal.prototype.trimXDomain=function(t){var e=this.getZoomDomain(),n=e[0],r=e[1];if(t[0]<=n){t[1]=+t[1]+(n-t[0]);t[0]=n}if(r<=t[1]){t[0]=+t[0]-(t[1]-r);t[1]=r}return t};ChartInternal.prototype.drag=function(t){var r=this||e,i=r.config,a=r.main,o=r.d3;var s,l,c,d,u,h,g,p;if(!r.hasArcType()&&i.data_selection_enabled&&i.data_selection_multiple){s=r.dragStart[0];l=r.dragStart[1];c=t[0];d=t[1];u=Math.min(s,c);h=Math.max(s,c);g=i.data_selection_grouped?r.margin.top:Math.min(l,d);p=i.data_selection_grouped?r.height:Math.max(l,d);a.select("."+n.dragarea).attr("x",u).attr("y",g).attr("width",h-u).attr("height",p-g);a.selectAll("."+n.shapes).selectAll("."+n.shape).each((function(t,a){if(i.data_selection_isselectable(t)){var s=o.select(this||e),l=s.classed(n.SELECTED),c=s.classed(n.INCLUDED),d,x,_,y,m,v=false,S;if(s.classed(n.circle)){d=1*s.attr("cx");x=1*s.attr("cy");m=r.togglePoint;v=u<d&&d<h&&g<x&&x<p}else{if(!s.classed(n.bar))return;S=getPathBox(this||e);d=S.x;x=S.y;_=S.width;y=S.height;m=r.togglePath;v=!(h<d||d+_<u)&&!(p<x||x+y<g)}if(v^c){s.classed(n.INCLUDED,!c);s.classed(n.SELECTED,!l);m.call(r,!l,s,t,a)}}}))}};ChartInternal.prototype.dragstart=function(t){var r=this||e,i=r.config;if(!r.hasArcType()&&i.data_selection_enabled){r.dragStart=t;r.main.select("."+n.chart).append("rect").attr("class",n.dragarea).style("opacity",.1);r.dragging=true}};ChartInternal.prototype.dragend=function(){var t=this||e,r=t.config;if(!t.hasArcType()&&r.data_selection_enabled){t.main.select("."+n.dragarea).transition().duration(100).style("opacity",0).remove();t.main.selectAll("."+n.shape).classed(n.INCLUDED,false);t.dragging=false}};ChartInternal.prototype.getYFormat=function(t){var n=this||e,r=t&&!n.hasType("gauge")?n.defaultArcValueFormat:n.yFormat,i=t&&!n.hasType("gauge")?n.defaultArcValueFormat:n.y2Format;return function(t,e,a){var o="y2"===n.axis.getId(a)?i:r;return o.call(n,t,e)}};ChartInternal.prototype.yFormat=function(t){var n=this||e,r=n.config,i=r.axis_y_tick_format?r.axis_y_tick_format:n.defaultValueFormat;return i(t)};ChartInternal.prototype.y2Format=function(t){var n=this||e,r=n.config,i=r.axis_y2_tick_format?r.axis_y2_tick_format:n.defaultValueFormat;return i(t)};ChartInternal.prototype.defaultValueFormat=function(t){return isValue(t)?+t:""};ChartInternal.prototype.defaultArcValueFormat=function(t,e){return(100*e).toFixed(1)+"%"};ChartInternal.prototype.dataLabelFormat=function(t){var n=this||e,r=n.config.data_labels,i,defaultFormat=function(t){return isValue(t)?+t:""};i="function"===typeof r.format?r.format:"object"===typeof r.format?r.format[t]?true===r.format[t]?defaultFormat:r.format[t]:function(){return""}:defaultFormat;return i};ChartInternal.prototype.initGrid=function(){var t=this||e,r=t.config,i=t.d3;t.grid=t.main.append("g").attr("clip-path",t.clipPathForGrid).attr("class",n.grid);r.grid_x_show&&t.grid.append("g").attr("class",n.xgrids);r.grid_y_show&&t.grid.append("g").attr("class",n.ygrids);r.grid_focus_show&&t.grid.append("g").attr("class",n.xgridFocus).append("line").attr("class",n.xgridFocus);t.xgrid=i.selectAll([]);r.grid_lines_front||t.initGridLines()};ChartInternal.prototype.initGridLines=function(){var t=this||e,r=t.d3;t.gridLines=t.main.append("g").attr("clip-path",t.clipPathForGrid).attr("class",n.grid+" "+n.gridLines);t.gridLines.append("g").attr("class",n.xgridLines);t.gridLines.append("g").attr("class",n.ygridLines);t.xgridLines=r.selectAll([])};ChartInternal.prototype.updateXGrid=function(t){var r=this||e,i=r.config,a=r.d3,o=r.generateGridData(i.grid_x_type,r.x),s=r.isCategorized()?r.xAxis.tickOffset():0;r.xgridAttr=i.axis_rotated?{x1:0,x2:r.width,y1:function(t){return r.x(t)-s},y2:function(t){return r.x(t)-s}}:{x1:function(t){return r.x(t)+s},x2:function(t){return r.x(t)+s},y1:0,y2:r.height};r.xgridAttr.opacity=function(){var t=+a.select(this||e).attr(i.axis_rotated?"y1":"x1");return t===(i.axis_rotated?r.height:0)?0:1};var l=r.main.select("."+n.xgrids).selectAll("."+n.xgrid).data(o);var c=l.enter().append("line").attr("class",n.xgrid).attr("x1",r.xgridAttr.x1).attr("x2",r.xgridAttr.x2).attr("y1",r.xgridAttr.y1).attr("y2",r.xgridAttr.y2).style("opacity",0);r.xgrid=c.merge(l);t||r.xgrid.attr("x1",r.xgridAttr.x1).attr("x2",r.xgridAttr.x2).attr("y1",r.xgridAttr.y1).attr("y2",r.xgridAttr.y2).style("opacity",r.xgridAttr.opacity);l.exit().remove()};ChartInternal.prototype.updateYGrid=function(){var t=this||e,r=t.config,i=t.yAxis.tickValues()||t.y.ticks(r.grid_y_ticks);var a=t.main.select("."+n.ygrids).selectAll("."+n.ygrid).data(i);var o=a.enter().append("line").attr("class",n.ygrid);t.ygrid=o.merge(a);t.ygrid.attr("x1",r.axis_rotated?t.y:0).attr("x2",r.axis_rotated?t.y:t.width).attr("y1",r.axis_rotated?0:t.y).attr("y2",r.axis_rotated?t.height:t.y);a.exit().remove();t.smoothLines(t.ygrid,"grid")};ChartInternal.prototype.gridTextAnchor=function(t){return t.position?t.position:"end"};ChartInternal.prototype.gridTextDx=function(t){return"start"===t.position?4:"middle"===t.position?0:-4};ChartInternal.prototype.xGridTextX=function(t){return"start"===t.position?-(this||e).height:"middle"===t.position?-(this||e).height/2:0};ChartInternal.prototype.yGridTextX=function(t){return"start"===t.position?0:"middle"===t.position?(this||e).width/2:(this||e).width};ChartInternal.prototype.updateGrid=function(t){var r=this||e,i=r.main,a=r.config,o,s,l,c,d=r.xv.bind(r),u=r.yv.bind(r),h=r.xGridTextX.bind(r),g=r.yGridTextX.bind(r);r.grid.style("visibility",r.hasArcType()?"hidden":"visible");i.select("line."+n.xgridFocus).style("visibility","hidden");a.grid_x_show&&r.updateXGrid();o=i.select("."+n.xgridLines).selectAll("."+n.xgridLine).data(a.grid_x_lines);s=o.enter().append("g").attr("class",(function(t){return n.xgridLine+(t["class"]?" "+t["class"]:"")}));s.append("line").attr("x1",a.axis_rotated?0:d).attr("x2",a.axis_rotated?r.width:d).attr("y1",a.axis_rotated?d:0).attr("y2",a.axis_rotated?d:r.height).style("opacity",0);s.append("text").attr("text-anchor",r.gridTextAnchor).attr("transform",a.axis_rotated?"":"rotate(-90)").attr("x",a.axis_rotated?g:h).attr("y",d).attr("dx",r.gridTextDx).attr("dy",-5).style("opacity",0);r.xgridLines=s.merge(o);o.exit().transition().duration(t).style("opacity",0).remove();a.grid_y_show&&r.updateYGrid();l=i.select("."+n.ygridLines).selectAll("."+n.ygridLine).data(a.grid_y_lines);c=l.enter().append("g").attr("class",(function(t){return n.ygridLine+(t["class"]?" "+t["class"]:"")}));c.append("line").attr("x1",a.axis_rotated?u:0).attr("x2",a.axis_rotated?u:r.width).attr("y1",a.axis_rotated?0:u).attr("y2",a.axis_rotated?r.height:u).style("opacity",0);c.append("text").attr("text-anchor",r.gridTextAnchor).attr("transform",a.axis_rotated?"rotate(-90)":"").attr("x",a.axis_rotated?h:g).attr("y",u).attr("dx",r.gridTextDx).attr("dy",-5).style("opacity",0);r.ygridLines=c.merge(l);r.ygridLines.select("line").transition().duration(t).attr("x1",a.axis_rotated?u:0).attr("x2",a.axis_rotated?u:r.width).attr("y1",a.axis_rotated?0:u).attr("y2",a.axis_rotated?r.height:u).style("opacity",1);r.ygridLines.select("text").transition().duration(t).attr("x",a.axis_rotated?r.xGridTextX.bind(r):r.yGridTextX.bind(r)).attr("y",u).text((function(t){return t.text})).style("opacity",1);l.exit().transition().duration(t).style("opacity",0).remove()};ChartInternal.prototype.redrawGrid=function(t,n){var r=this||e,i=r.config,a=r.xv.bind(r),o=r.xgridLines.select("line"),s=r.xgridLines.select("text");return[(t?o.transition(n):o).attr("x1",i.axis_rotated?0:a).attr("x2",i.axis_rotated?r.width:a).attr("y1",i.axis_rotated?a:0).attr("y2",i.axis_rotated?a:r.height).style("opacity",1),(t?s.transition(n):s).attr("x",i.axis_rotated?r.yGridTextX.bind(r):r.xGridTextX.bind(r)).attr("y",a).text((function(t){return t.text})).style("opacity",1)]};ChartInternal.prototype.showXGridFocus=function(t){var r=this||e,i=r.config,a=t.filter((function(t){return t&&isValue(t.value)})),o=r.main.selectAll("line."+n.xgridFocus),s=r.xx.bind(r);if(i.tooltip_show&&!r.hasType("stanford")&&!r.hasArcType()){o.style("visibility","visible").data([a[0]]).attr(i.axis_rotated?"y1":"x1",s).attr(i.axis_rotated?"y2":"x2",s);r.smoothLines(o,"grid")}};ChartInternal.prototype.hideXGridFocus=function(){(this||e).main.select("line."+n.xgridFocus).style("visibility","hidden")};ChartInternal.prototype.updateXgridFocus=function(){var t=this||e,r=t.config;t.main.select("line."+n.xgridFocus).attr("x1",r.axis_rotated?0:-10).attr("x2",r.axis_rotated?t.width:-10).attr("y1",r.axis_rotated?-10:0).attr("y2",r.axis_rotated?-10:t.height)};ChartInternal.prototype.generateGridData=function(t,r){var i=this||e,a=[],o,s,l,c,d=i.main.select("."+n.axisX).selectAll(".tick").size();if("year"===t){o=i.getXDomain();s=o[0].getFullYear();l=o[1].getFullYear();for(c=s;c<=l;c++)a.push(new Date(c+"-01-01 00:00:00"))}else{a=r.ticks(10);a.length>d&&(a=a.filter((function(t){return(""+t).indexOf(".")<0})))}return a};ChartInternal.prototype.getGridFilterToRemove=function(t){return t?function(e){var n=false;[].concat(t).forEach((function(t){("value"in t&&e.value===t.value||"class"in t&&e["class"]===t["class"])&&(n=true)}));return n}:function(){return true}};ChartInternal.prototype.removeGridLines=function(t,r){var i=this||e,a=i.config,o=i.getGridFilterToRemove(t),toShow=function(t){return!o(t)},s=r?n.xgridLines:n.ygridLines,l=r?n.xgridLine:n.ygridLine;i.main.select("."+s).selectAll("."+l).filter(o).transition().duration(a.transition_duration).style("opacity",0).remove();r?a.grid_x_lines=a.grid_x_lines.filter(toShow):a.grid_y_lines=a.grid_y_lines.filter(toShow)};ChartInternal.prototype.initEventRect=function(){var t=this||e,r=t.config;t.main.select("."+n.chart).append("g").attr("class",n.eventRects).style("fill-opacity",0);t.eventRect=t.main.select("."+n.eventRects).append("rect").attr("class",n.eventRect);if(r.zoom_enabled&&t.zoom){t.eventRect.call(t.zoom).on("dblclick.zoom",null);r.zoom_initialRange&&t.eventRect.transition().duration(0).call(t.zoom.transform,t.zoomTransform(r.zoom_initialRange))}};ChartInternal.prototype.redrawEventRect=function(){var t=this||e,r=t.d3,i=t.config;function mouseout(){t.svg.select("."+n.eventRect).style("cursor",null);t.hideXGridFocus();t.hideTooltip();t.unexpandCircles();t.unexpandBars()}var isHoveringDataPoint=function(e,n){return n&&(t.isBarType(n.id)||t.dist(n,e)<i.point_sensitivity)};var withName=function(e){return e?t.addName(Object.assign({},e)):null};t.main.select("."+n.eventRects).style("cursor",i.zoom_enabled?i.axis_rotated?"ns-resize":"ew-resize":null);t.eventRect.attr("x",0).attr("y",0).attr("width",t.width).attr("height",t.height).on("mouseout",i.interaction_enabled?function(){if(i&&!t.hasArcType()){if(t.mouseover){i.data_onmouseout.call(t.api,t.mouseover);t.mouseover=void 0}mouseout()}}:null).on("mousemove",i.interaction_enabled?function(){if(!t.dragging){var a=t.getTargetsToShow();if(!t.hasArcType(a)){var o=r.mouse(this||e);var s=withName(t.findClosestFromTargets(a,o));var l=isHoveringDataPoint(o,s);if(t.mouseover&&(!s||s.id!==t.mouseover.id||s.index!==t.mouseover.index)){i.data_onmouseout.call(t.api,t.mouseover);t.mouseover=void 0}if(s&&!t.mouseover){i.data_onmouseover.call(t.api,s);t.mouseover=s}t.svg.select("."+n.eventRect).style("cursor",l?"pointer":null);var c=!i.tooltip_grouped||t.hasType("stanford",a);var d;if(c)s&&(d=[s]);else{var u=void 0;if(s)u=s;else{var h=i.axis_rotated?o[1]:o[0];u=t.findClosestFromTargetsByX(a,t.x.invert(h))}u&&(d=t.filterByX(a,u.x))}if(!d||0===d.length)return mouseout();d=d.map(withName);t.showTooltip(d,this||e);if(i.point_focus_expand_enabled){t.unexpandCircles();d.forEach((function(e){t.expandCircles(e.index,e.id,false)}))}t.unexpandBars();d.forEach((function(e){t.expandBars(e.index,e.id,false)}));t.showXGridFocus(d)}}}:null).on("click",i.interaction_enabled?function(){var a=t.getTargetsToShow();if(!t.hasArcType(a)){var o=r.mouse(this||e);var s=withName(t.findClosestFromTargets(a,o));if(isHoveringDataPoint(o,s)){var l;l=!i.data_selection_grouped||t.isStanfordType(s)?[s]:t.filterByX(a,s.x);l.forEach((function(r){t.main.selectAll("."+n.shapes+t.getTargetSelectorSuffix(r.id)).selectAll("."+n.shape+"-"+r.index).each((function(){(i.data_selection_grouped||t.isWithinShape(this||e,r))&&t.toggleShape(this||e,r,r.index)}))}));if(s){var c=t.main.selectAll("."+n.shapes+t.getTargetSelectorSuffix(s.id)).select("."+n.shape+"-"+s.index);i.data_onclick.call(t.api,s,c.node())}}}}:null).call(i.interaction_enabled&&i.data_selection_draggable&&t.drag?r.drag().on("drag",(function(){t.drag(r.mouse(this||e))})).on("start",(function(){t.dragstart(r.mouse(this||e))})).on("end",(function(){t.dragend()})):function(){})};ChartInternal.prototype.getMousePosition=function(t){var n=this||e;return[n.x(t.x),n.getYScale(t.id)(t.value)]};ChartInternal.prototype.dispatchEvent=function(t,r){var i=this||e,a="."+n.eventRect,o=i.main.select(a).node(),s=o.getBoundingClientRect(),l=s.left+(r?r[0]:0),c=s.top+(r?r[1]:0),d=document.createEvent("MouseEvents");d.initMouseEvent(t,true,true,window,0,l,c,l,c,false,false,false,false,0,null);o.dispatchEvent(d)};ChartInternal.prototype.initLegend=function(){var t=this||e;t.legendItemTextBox={};t.legendHasRendered=false;t.legend=t.svg.append("g").attr("transform",t.getTranslate("legend"));if(t.config.legend_show)t.updateLegendWithDefaults();else{t.legend.style("visibility","hidden");t.hiddenLegendIds=t.mapToIds(t.data.targets)}};ChartInternal.prototype.updateLegendWithDefaults=function(){var t=this||e;t.updateLegend(t.mapToIds(t.data.targets),{withTransform:false,withTransitionForTransform:false,withTransition:false})};ChartInternal.prototype.updateSizeForLegend=function(t,n){var r=this||e,i=r.config,a={top:r.isLegendTop?r.getCurrentPaddingTop()+i.legend_inset_y+5.5:r.currentHeight-t-r.getCurrentPaddingBottom()-i.legend_inset_y,left:r.isLegendLeft?r.getCurrentPaddingLeft()+i.legend_inset_x+.5:r.currentWidth-n-r.getCurrentPaddingRight()-i.legend_inset_x+.5};r.margin3={top:r.isLegendRight?0:r.isLegendInset?a.top:r.currentHeight-t,right:NaN,bottom:0,left:r.isLegendRight?r.currentWidth-n:r.isLegendInset?a.left:0}};ChartInternal.prototype.transformLegend=function(t){var n=this||e;(t?n.legend.transition():n.legend).attr("transform",n.getTranslate("legend"))};ChartInternal.prototype.updateLegendStep=function(t){(this||e).legendStep=t};ChartInternal.prototype.updateLegendItemWidth=function(t){(this||e).legendItemWidth=t};ChartInternal.prototype.updateLegendItemHeight=function(t){(this||e).legendItemHeight=t};ChartInternal.prototype.getLegendWidth=function(){var t=this||e;return t.config.legend_show?t.isLegendRight||t.isLegendInset?t.legendItemWidth*(t.legendStep+1):t.currentWidth:0};ChartInternal.prototype.getLegendHeight=function(){var t=this||e,n=0;t.config.legend_show&&(n=t.isLegendRight?t.currentHeight:Math.max(20,t.legendItemHeight)*(t.legendStep+1));return n};ChartInternal.prototype.opacityForLegend=function(t){return t.classed(n.legendItemHidden)?null:1};ChartInternal.prototype.opacityForUnfocusedLegend=function(t){return t.classed(n.legendItemHidden)?null:.3};ChartInternal.prototype.toggleFocusLegend=function(t,r){var i=this||e;t=i.mapToTargetIds(t);i.legend.selectAll("."+n.legendItem).filter((function(e){return t.indexOf(e)>=0})).classed(n.legendItemFocused,r).transition().duration(100).style("opacity",(function(){var t=r?i.opacityForLegend:i.opacityForUnfocusedLegend;return t.call(i,i.d3.select(this||e))}))};ChartInternal.prototype.revertLegend=function(){var t=this||e,r=t.d3;t.legend.selectAll("."+n.legendItem).classed(n.legendItemFocused,false).transition().duration(100).style("opacity",(function(){return t.opacityForLegend(r.select(this||e))}))};ChartInternal.prototype.showLegend=function(t){var n=this||e,r=n.config;if(!r.legend_show){r.legend_show=true;n.legend.style("visibility","visible");n.legendHasRendered||n.updateLegendWithDefaults()}n.removeHiddenLegendIds(t);n.legend.selectAll(n.selectorLegends(t)).style("visibility","visible").transition().style("opacity",(function(){return n.opacityForLegend(n.d3.select(this||e))}))};ChartInternal.prototype.hideLegend=function(t){var n=this||e,r=n.config;if(r.legend_show&&isEmpty(t)){r.legend_show=false;n.legend.style("visibility","hidden")}n.addHiddenLegendIds(t);n.legend.selectAll(n.selectorLegends(t)).style("opacity",0).style("visibility","hidden")};ChartInternal.prototype.clearLegendItemTextBoxCache=function(){(this||e).legendItemTextBox={}};ChartInternal.prototype.updateLegend=function(t,r,i){var a=this||e,o=a.config;var s,l,c,d,u,h,g,p,x;var _=4,y=10,m=0,v=0,S=10,w=o.legend_item_tile_width+5;var b,C=0,T={},A={},I={},P=[0],L={},V=0;var G,E;var O,R,k,F;t=t.filter((function(t){return!isDefined(o.data_names[t])||null!==o.data_names[t]}));r=r||{};G=getOption(r,"withTransition",true);E=getOption(r,"withTransitionForTransform",true);function getTextBox(t,e){a.legendItemTextBox[e]||(a.legendItemTextBox[e]=a.getTextRect(t.textContent,n.legendItem,t));return a.legendItemTextBox[e]}function updatePositions(e,n,r){var i=0===r,s=r===t.length-1,l=getTextBox(e,n),c=l.width+w+(s&&!(a.isLegendRight||a.isLegendInset)?0:y)+o.legend_padding,d=l.height+_,u=a.isLegendRight||a.isLegendInset?d:c,h=a.isLegendRight||a.isLegendInset?a.getLegendHeight():a.getLegendWidth(),g,p;function updateValues(t,e){if(!e){g=(h-C-u)/2;if(g<S){g=(h-u)/2;C=0;V++}}L[t]=V;P[V]=a.isLegendInset?10:g;T[t]=C;C+=u}if(i){C=0;V=0;m=0;v=0}if(!o.legend_show||a.isLegendToShow(n)){A[n]=c;I[n]=d;(!m||c>=m)&&(m=c);(!v||d>=v)&&(v=d);p=a.isLegendRight||a.isLegendInset?v:m;if(o.legend_equally){Object.keys(A).forEach((function(t){A[t]=m}));Object.keys(I).forEach((function(t){I[t]=v}));g=(h-p*t.length)/2;if(g<S){C=0;V=0;t.forEach((function(t){updateValues(t)}))}else updateValues(n,true)}else updateValues(n)}else A[n]=I[n]=L[n]=T[n]=0}if(a.isLegendInset){V=o.legend_inset_step?o.legend_inset_step:t.length;a.updateLegendStep(V)}if(a.isLegendRight){s=function(t){return m*L[t]};d=function(t){return P[L[t]]+T[t]}}else if(a.isLegendInset){s=function(t){return m*L[t]+10};d=function(t){return P[L[t]]+T[t]}}else{s=function(t){return P[L[t]]+T[t]};d=function(t){return v*L[t]}}l=function(t,e){return s(t,e)+4+o.legend_item_tile_width};u=function(t,e){return d(t,e)+9};c=function(t,e){return s(t,e)};h=function(t,e){return d(t,e)-5};g=function(t,e){return s(t,e)-2};p=function(t,e){return s(t,e)-2+o.legend_item_tile_width};x=function(t,e){return d(t,e)+4};b=a.legend.selectAll("."+n.legendItem).data(t).enter().append("g").attr("class",(function(t){return a.generateClass(n.legendItem,t)})).style("visibility",(function(t){return a.isLegendToShow(t)?"visible":"hidden"})).style("cursor",(function(){return o.interaction_enabled?"pointer":"auto"})).on("click",o.interaction_enabled?function(t){if(o.legend_item_onclick)o.legend_item_onclick.call(a,t);else if(a.d3.event.altKey){a.api.hide();a.api.show(t)}else{a.api.toggle(t);a.isTargetToShow(t)?a.api.focus(t):a.api.revert()}}:null).on("mouseover",o.interaction_enabled?function(t){if(o.legend_item_onmouseover)o.legend_item_onmouseover.call(a,t);else{a.d3.select(this||e).classed(n.legendItemFocused,true);!a.transiting&&a.isTargetToShow(t)&&a.api.focus(t)}}:null).on("mouseout",o.interaction_enabled?function(t){if(o.legend_item_onmouseout)o.legend_item_onmouseout.call(a,t);else{a.d3.select(this||e).classed(n.legendItemFocused,false);a.api.revert()}}:null);b.append("text").text((function(t){return isDefined(o.data_names[t])?o.data_names[t]:t})).each((function(t,n){updatePositions(this||e,t,n)})).style("pointer-events","none").attr("x",a.isLegendRight||a.isLegendInset?l:-200).attr("y",a.isLegendRight||a.isLegendInset?-200:u);b.append("rect").attr("class",n.legendItemEvent).style("fill-opacity",0).attr("x",a.isLegendRight||a.isLegendInset?c:-200).attr("y",a.isLegendRight||a.isLegendInset?-200:h);b.append("line").attr("class",n.legendItemTile).style("stroke",a.color).style("pointer-events","none").attr("x1",a.isLegendRight||a.isLegendInset?g:-200).attr("y1",a.isLegendRight||a.isLegendInset?-200:x).attr("x2",a.isLegendRight||a.isLegendInset?p:-200).attr("y2",a.isLegendRight||a.isLegendInset?-200:x).attr("stroke-width",o.legend_item_tile_height);F=a.legend.select("."+n.legendBackground+" rect");a.isLegendInset&&m>0&&0===F.size()&&(F=a.legend.insert("g","."+n.legendItem).attr("class",n.legendBackground).append("rect"));O=a.legend.selectAll("text").data(t).text((function(t){return isDefined(o.data_names[t])?o.data_names[t]:t})).each((function(t,n){updatePositions(this||e,t,n)}));(G?O.transition():O).attr("x",l).attr("y",u);R=a.legend.selectAll("rect."+n.legendItemEvent).data(t);(G?R.transition():R).attr("width",(function(t){return A[t]})).attr("height",(function(t){return I[t]})).attr("x",c).attr("y",h);k=a.legend.selectAll("line."+n.legendItemTile).data(t);(G?k.transition():k).style("stroke",a.levelColor?function(t){return a.levelColor(a.cache[t].values.reduce((function(t,e){return t+e.value}),0))}:a.color).attr("x1",g).attr("y1",x).attr("x2",p).attr("y2",x);F&&(G?F.transition():F).attr("height",a.getLegendHeight()-12).attr("width",m*(V+1)+10);a.legend.selectAll("."+n.legendItem).classed(n.legendItemHidden,(function(t){return!a.isTargetToShow(t)}));a.updateLegendItemWidth(m);a.updateLegendItemHeight(v);a.updateLegendStep(V);a.updateSizes();a.updateScales();a.updateSvgSize();a.transformAll(E,i);a.legendHasRendered=true};ChartInternal.prototype.initRegion=function(){var t=this||e;t.region=t.main.append("g").attr("clip-path",t.clipPath).attr("class",n.regions)};ChartInternal.prototype.updateRegion=function(t){var r=this||e,i=r.config;r.region.style("visibility",r.hasArcType()?"hidden":"visible");var a=r.main.select("."+n.regions).selectAll("."+n.region).data(i.regions);var o=a.enter().append("g");o.append("rect").attr("x",r.regionX.bind(r)).attr("y",r.regionY.bind(r)).attr("width",r.regionWidth.bind(r)).attr("height",r.regionHeight.bind(r)).style("fill-opacity",(function(t){return isValue(t.opacity)?t.opacity:.1}));o.append("text").text(r.labelRegion.bind(r));r.mainRegion=o.merge(a).attr("class",r.classRegion.bind(r));a.exit().transition().duration(t).style("opacity",0).remove()};ChartInternal.prototype.redrawRegion=function(t,n){var r=this||e,i=r.mainRegion,a=r.mainRegion.selectAll("text");return[(t?i.transition(n):i).attr("x",r.regionX.bind(r)).attr("y",r.regionY.bind(r)).attr("width",r.regionWidth.bind(r)).attr("height",r.regionHeight.bind(r)).style("fill-opacity",(function(t){return isValue(t.opacity)?t.opacity:.1})),(t?a.transition(n):a).attr("x",r.labelOffsetX.bind(r)).attr("y",r.labelOffsetY.bind(r)).attr("transform",r.labelTransform.bind(r)).attr("style","text-anchor: left;")]};ChartInternal.prototype.regionX=function(t){var n=this||e,r=n.config,i,a="y"===t.axis?n.y:n.y2;i="y"===t.axis||"y2"===t.axis?r.axis_rotated&&"start"in t?a(t.start):0:r.axis_rotated?0:"start"in t?n.x(n.isTimeSeries()?n.parseDate(t.start):t.start):0;return i};ChartInternal.prototype.regionY=function(t){var n=this||e,r=n.config,i,a="y"===t.axis?n.y:n.y2;i="y"===t.axis||"y2"===t.axis?r.axis_rotated?0:"end"in t?a(t.end):0:r.axis_rotated&&"start"in t?n.x(n.isTimeSeries()?n.parseDate(t.start):t.start):0;return i};ChartInternal.prototype.regionWidth=function(t){var n=this||e,r=n.config,i=n.regionX(t),a,o="y"===t.axis?n.y:n.y2;a="y"===t.axis||"y2"===t.axis?r.axis_rotated&&"end"in t?o(t.end):n.width:r.axis_rotated?n.width:"end"in t?n.x(n.isTimeSeries()?n.parseDate(t.end):t.end):n.width;return a<i?0:a-i};ChartInternal.prototype.regionHeight=function(t){var n=this||e,r=n.config,i=this.regionY(t),a,o="y"===t.axis?n.y:n.y2;a="y"===t.axis||"y2"===t.axis?r.axis_rotated?n.height:"start"in t?o(t.start):n.height:r.axis_rotated&&"end"in t?n.x(n.isTimeSeries()?n.parseDate(t.end):t.end):n.height;return a<i?0:a-i};ChartInternal.prototype.isRegionOnX=function(t){return!t.axis||"x"===t.axis};ChartInternal.prototype.labelRegion=function(t){return"label"in t?t.label:""};ChartInternal.prototype.labelTransform=function(t){return"vertical"in t&&t.vertical?"rotate(90)":""};ChartInternal.prototype.labelOffsetX=function(t){var e="paddingX"in t?t.paddingX:3;var n="paddingY"in t?t.paddingY:3;return"vertical"in t&&t.vertical?this.regionY(t)+n:this.regionX(t)+e};ChartInternal.prototype.labelOffsetY=function(t){var e="paddingX"in t?t.paddingX:3;var n="paddingY"in t?t.paddingY:3;return"vertical"in t&&t.vertical?-(this.regionX(t)+e):this.regionY(t)+10+n};function c3LogScale(t,e,n){var r=[.01,10];if(!e){e=t.scaleLinear();e.range(r)}if(!n){n=t.scaleLog();n.domain(r);n.nice()}function logspace(t,e,n){var r,i,a,o;if(arguments.length<3)n=10;else if(0===n)return[];i=n-1;o=(e-t)/i;r=new Array(n);a=t;r[0]=Math.pow(10,a);for(var s=1;s<i;s++){a+=o;r[s]=Math.pow(10,a)}r[i]=Math.pow(10,e);return r}function scale(t){return n(e(t))}scale.domain=function(t){if(!arguments.length)return e.domain();e.domain(t);return scale};scale.range=function(t){if(!arguments.length)return n.range();n.range(t);return scale};scale.ticks=function(t){return logspace(-2,1,t||10).map((function(t){return e.invert(t)}))};scale.copy=function(){return c3LogScale(t,e.copy(),n.copy())};return scale}ChartInternal.prototype.getScale=function(t,n,r){return(r?(this||e).d3.scaleTime():(this||e).d3.scaleLinear()).range([t,n])};ChartInternal.prototype.getX=function(t,n,r,i){var a=this||e,o=a.getScale(t,n,a.isTimeSeries()),s=r?o.domain(r):o,l;if(a.isCategorized()){i=i||function(){return 0};o=function(t,e){var n=s(t)+i(t);return e?n:Math.ceil(n)}}else o=function(t,e){var n=s(t);return e?n:Math.ceil(n)};for(l in s)o[l]=s[l];o.orgDomain=function(){return s.domain()};a.isCategorized()&&(o.domain=function(t){if(!arguments.length){t=this.orgDomain();return[t[0],t[1]+1]}s.domain(t);return o});return o};
/**
   * Creates and configures a D3 scale instance for the given type.
   *
   * By defaults it returns a Linear scale.
   *
   * @param {String} type Type of d3-scale to create. Type can be 'linear', 'time', 'timeseries' or 'log'.
   * @param {Array} domain The scale domain such as [from, to]
   * @param {Array} range The scale's range such as [from, to]
   *
   * @return A d3-scale instance
   */ChartInternal.prototype.getY=function(t,n,r){var i;if("timeseries"===t||"time"===t)i=(this||e).d3.scaleTime();else if("log"===t)i=c3LogScale((this||e).d3);else{if("linear"!==t&&void 0!==t)throw new Error('Invalid Y axis type: "'+t+'"');i=(this||e).d3.scaleLinear()}n&&i.domain(n);r&&i.range(r);return i};ChartInternal.prototype.getYScale=function(t){return"y2"===(this||e).axis.getId(t)?(this||e).y2:(this||e).y};ChartInternal.prototype.getSubYScale=function(t){return"y2"===(this||e).axis.getId(t)?(this||e).subY2:(this||e).subY};ChartInternal.prototype.updateScales=function(){var t=this||e,n=t.config,r=!t.x;t.xMin=n.axis_rotated?1:0;t.xMax=n.axis_rotated?t.height:t.width;t.yMin=n.axis_rotated?0:t.height;t.yMax=n.axis_rotated?t.width:1;t.subXMin=t.xMin;t.subXMax=t.xMax;t.subYMin=n.axis_rotated?0:t.height2;t.subYMax=n.axis_rotated?t.width2:1;t.x=t.getX(t.xMin,t.xMax,r?void 0:t.x.orgDomain(),(function(){return t.xAxis.tickOffset()}));t.y=t.getY(n.axis_y_type,r?n.axis_y_default:t.y.domain(),[t.yMin,t.yMax]);t.y2=t.getY(n.axis_y2_type,r?n.axis_y2_default:t.y2.domain(),[t.yMin,t.yMax]);t.subX=t.getX(t.xMin,t.xMax,t.orgXDomain,(function(e){return e%1?0:t.subXAxis.tickOffset()}));t.subY=t.getY(n.axis_y_type,r?n.axis_y_default:t.subY.domain(),[t.subYMin,t.subYMax]);t.subY2=t.getY(n.axis_y2_type,r?n.axis_y2_default:t.subY2.domain(),[t.subYMin,t.subYMax]);t.xAxisTickFormat=t.axis.getXAxisTickFormat();t.xAxisTickValues=t.axis.getXAxisTickValues();t.yAxisTickValues=t.axis.getYAxisTickValues();t.y2AxisTickValues=t.axis.getY2AxisTickValues();t.xAxis=t.axis.getXAxis(t.x,t.xOrient,t.xAxisTickFormat,t.xAxisTickValues,n.axis_x_tick_outer);t.subXAxis=t.axis.getXAxis(t.subX,t.subXOrient,t.xAxisTickFormat,t.xAxisTickValues,n.axis_x_tick_outer);t.yAxis=t.axis.getYAxis("y",t.y,t.yOrient,t.yAxisTickValues,n.axis_y_tick_outer);t.y2Axis=t.axis.getYAxis("y2",t.y2,t.y2Orient,t.y2AxisTickValues,n.axis_y2_tick_outer);r||t.brush&&t.brush.updateScale(t.subX);t.updateArc&&t.updateArc()};ChartInternal.prototype.selectPoint=function(t,r,i){var a=this||e,o=a.config,s=(o.axis_rotated?a.circleY:a.circleX).bind(a),l=(o.axis_rotated?a.circleX:a.circleY).bind(a),c=a.pointSelectR.bind(a);o.data_onselected.call(a.api,r,t.node());a.main.select("."+n.selectedCircles+a.getTargetSelectorSuffix(r.id)).selectAll("."+n.selectedCircle+"-"+i).data([r]).enter().append("circle").attr("class",(function(){return a.generateClass(n.selectedCircle,i)})).attr("cx",s).attr("cy",l).attr("stroke",(function(){return a.color(r)})).attr("r",(function(t){return 1.4*a.pointSelectR(t)})).transition().duration(100).attr("r",c)};ChartInternal.prototype.unselectPoint=function(t,r,i){var a=this||e;a.config.data_onunselected.call(a.api,r,t.node());a.main.select("."+n.selectedCircles+a.getTargetSelectorSuffix(r.id)).selectAll("."+n.selectedCircle+"-"+i).transition().duration(100).attr("r",0).remove()};ChartInternal.prototype.togglePoint=function(t,e,n,r){t?this.selectPoint(e,n,r):this.unselectPoint(e,n,r)};ChartInternal.prototype.selectPath=function(t,n){var r=this||e;r.config.data_onselected.call(r,n,t.node());r.config.interaction_brighten&&t.transition().duration(100).style("fill",(function(){return r.d3.rgb(r.color(n)).brighter(.75)}))};ChartInternal.prototype.unselectPath=function(t,n){var r=this||e;r.config.data_onunselected.call(r,n,t.node());r.config.interaction_brighten&&t.transition().duration(100).style("fill",(function(){return r.color(n)}))};ChartInternal.prototype.togglePath=function(t,e,n,r){t?this.selectPath(e,n,r):this.unselectPath(e,n,r)};ChartInternal.prototype.getToggle=function(t,n){var r=this||e,i;"circle"===t.nodeName?i=r.isStepType(n)?function(){}:r.togglePoint:"path"===t.nodeName&&(i=r.togglePath);return i};ChartInternal.prototype.toggleShape=function(t,r,i){var a=this||e,o=a.d3,s=a.config,l=o.select(t),c=l.classed(n.SELECTED),d=a.getToggle(t,r).bind(a);if(s.data_selection_enabled&&s.data_selection_isselectable(r)){s.data_selection_multiple||a.main.selectAll("."+n.shapes+(s.data_selection_grouped?a.getTargetSelectorSuffix(r.id):"")).selectAll("."+n.shape).each((function(t,r){var i=o.select(this||e);i.classed(n.SELECTED)&&d(false,i.classed(n.SELECTED,false),t,r)}));l.classed(n.SELECTED,!c);d(!c,l,r,i)}};ChartInternal.prototype.initBar=function(){var t=this||e;t.main.select("."+n.chart).append("g").attr("class",n.chartBars)};ChartInternal.prototype.updateTargetsForBar=function(t){var r=this||e,i=r.config,a,o,s=r.classChartBar.bind(r),l=r.classBars.bind(r),c=r.classFocus.bind(r);a=r.main.select("."+n.chartBars).selectAll("."+n.chartBar).data(t).attr("class",(function(t){return s(t)+c(t)}));o=a.enter().append("g").attr("class",s).style("pointer-events","none");o.append("g").attr("class",l).style("cursor",(function(t){return i.data_selection_isselectable(t)?"pointer":null}))};ChartInternal.prototype.updateBar=function(t){var r=this||e,i=r.barData.bind(r),a=r.classBar.bind(r),o=r.initialOpacity.bind(r),color=function(t){return r.color(t.id)};var s=r.main.selectAll("."+n.bars).selectAll("."+n.bar).data(i);var l=s.enter().append("path").attr("class",a).style("stroke",color).style("fill",color);r.mainBar=l.merge(s).style("opacity",o);s.exit().transition().duration(t).style("opacity",0)};ChartInternal.prototype.redrawBar=function(t,n,r){var i=this||e;return[(n?(this||e).mainBar.transition(r):(this||e).mainBar).attr("d",t).style("stroke",(this||e).color).style("fill",(this||e).color).style("opacity",(function(t){return i.isTargetToShow(t.id)?1:0}))]};ChartInternal.prototype.getBarW=function(t,n){var r=this||e,i=r.config,a="number"===typeof i.bar_width?i.bar_width:n?t.tickInterval()*i.bar_width_ratio/n:0;return i.bar_width_max&&a>i.bar_width_max?i.bar_width_max:a};ChartInternal.prototype.getBars=function(t,r){var i=this||e;return(r?i.main.selectAll("."+n.bars+i.getTargetSelectorSuffix(r)):i.main).selectAll("."+n.bar+(isValue(t)?"-"+t:""))};ChartInternal.prototype.expandBars=function(t,r,i){var a=this||e;i&&a.unexpandBars();a.getBars(t,r).classed(n.EXPANDED,true)};ChartInternal.prototype.unexpandBars=function(t){var r=this||e;r.getBars(t).classed(n.EXPANDED,false)};ChartInternal.prototype.generateDrawBar=function(t,n){var r=this||e,i=r.config,a=r.generateGetBarPoints(t,n);return function(t,e){var n=a(t,e);var r=i.axis_rotated?1:0;var o=i.axis_rotated?0:1;var s="M "+n[0][r]+","+n[0][o]+" "+"L"+n[1][r]+","+n[1][o]+" "+"L"+n[2][r]+","+n[2][o]+" "+"L"+n[3][r]+","+n[3][o]+" "+"z";return s}};ChartInternal.prototype.generateGetBarPoints=function(t,n){var r=this||e,i=n?r.subXAxis:r.xAxis,a=t.__max__+1,o=r.getBarW(i,a),s=r.getShapeX(o,a,t,!!n),l=r.getShapeY(!!n),c=r.getShapeOffset(r.isBarType,t,!!n),d=o*(r.config.bar_space/2),u=n?r.getSubYScale:r.getYScale;return function(t,e){var n=u.call(r,t.id)(0),i=c(t,e)||n,a=s(t),h=l(t);r.config.axis_rotated&&(0<t.value&&h<n||t.value<0&&n<h)&&(h=n);h-=n-i;return[[a+d,i],[a+d,h],[a+o-d,h],[a+o-d,i]]}};
/**
   * Returns whether the data point is within the given bar shape.
   *
   * @param mouse
   * @param barShape
   * @return {boolean}
   */ChartInternal.prototype.isWithinBar=function(t,e){return isWithinBox(t,getBBox(e),2)};ChartInternal.prototype.getShapeIndices=function(t){var n=this||e,r=n.config,i={},a=0,o,s;n.filterTargetsToShow(n.data.targets.filter(t,n)).forEach((function(t){for(o=0;o<r.data_groups.length;o++)if(!(r.data_groups[o].indexOf(t.id)<0))for(s=0;s<r.data_groups[o].length;s++)if(r.data_groups[o][s]in i){i[t.id]=i[r.data_groups[o][s]];break}isUndefined(i[t.id])&&(i[t.id]=a++)}));i.__max__=a-1;return i};ChartInternal.prototype.getShapeX=function(t,n,r,i){var a=this||e,o=i?a.subX:a.x;return function(e){var i=e.id in r?r[e.id]:0;return e.x||0===e.x?o(e.x)-t*(n/2-i):0}};ChartInternal.prototype.getShapeY=function(t){var n=this||e;return function(e){var r=t?n.getSubYScale(e.id):n.getYScale(e.id);return r(n.isTargetNormalized(e.id)?n.getRatio("index",e,true):e.value)}};ChartInternal.prototype.getShapeOffset=function(t,n,r){var i=this||e,a=i.orderTargets(i.filterTargetsToShow(i.data.targets.filter(t,i))),o=a.map((function(t){return t.id}));return function(t,e){var s=r?i.getSubYScale(t.id):i.getYScale(t.id),l=s(0),c=l;a.forEach((function(r){var a=i.isStepType(t)?i.convertValuesToStep(r.values):r.values;var d=i.isTargetNormalized(t.id);var u=a.map((function(t){return d?i.getRatio("index",t,true):t.value}));if(r.id!==t.id&&n[r.id]===n[t.id]&&o.indexOf(r.id)<o.indexOf(t.id)){if(isUndefined(a[e])||+a[e].x!==+t.x){e=-1;a.forEach((function(n,r){var i=n.x.constructor===Date?+n.x:n.x;var a=t.x.constructor===Date?+t.x:t.x;i===a&&(e=r)}))}e in a&&a[e].value*t.value>=0&&(c+=s(u[e])-l)}}));return c}};ChartInternal.prototype.isWithinShape=function(t,r){var i=this||e,a=i.d3.select(t),o;i.isTargetToShow(r.id)?"circle"===t.nodeName?o=i.isStepType(r)?i.isWithinStep(t,i.getYScale(r.id)(r.value)):i.isWithinCircle(t,1.5*i.pointSelectR(r)):"path"===t.nodeName&&(o=!a.classed(n.bar)||i.isWithinBar(i.d3.mouse(t),t)):o=false;return o};ChartInternal.prototype.getInterpolate=function(t){var n=this||e,r=n.d3,i={linear:r.curveLinear,"linear-closed":r.curveLinearClosed,basis:r.curveBasis,"basis-open":r.curveBasisOpen,"basis-closed":r.curveBasisClosed,bundle:r.curveBundle,cardinal:r.curveCardinal,"cardinal-open":r.curveCardinalOpen,"cardinal-closed":r.curveCardinalClosed,monotone:r.curveMonotoneX,step:r.curveStep,"step-before":r.curveStepBefore,"step-after":r.curveStepAfter},a;a=n.isSplineType(t)?i[n.config.spline_interpolation_type]||i.cardinal:n.isStepType(t)?i[n.config.line_step_type]:i.linear;return a};ChartInternal.prototype.initLine=function(){var t=this||e;t.main.select("."+n.chart).append("g").attr("class",n.chartLines)};ChartInternal.prototype.updateTargetsForLine=function(t){var r=this||e,i=r.config,a,o,s=r.classChartLine.bind(r),l=r.classLines.bind(r),c=r.classAreas.bind(r),d=r.classCircles.bind(r),u=r.classFocus.bind(r);a=r.main.select("."+n.chartLines).selectAll("."+n.chartLine).data(t).attr("class",(function(t){return s(t)+u(t)}));o=a.enter().append("g").attr("class",s).style("opacity",0).style("pointer-events","none");o.append("g").attr("class",l);o.append("g").attr("class",c);o.append("g").attr("class",(function(t){return r.generateClass(n.selectedCircles,t.id)}));o.append("g").attr("class",d).style("cursor",(function(t){return i.data_selection_isselectable(t)?"pointer":null}));t.forEach((function(t){r.main.selectAll("."+n.selectedCircles+r.getTargetSelectorSuffix(t.id)).selectAll("."+n.selectedCircle).each((function(e){e.value=t.values[e.index].value}))}))};ChartInternal.prototype.updateLine=function(t){var r=this||e;var i=r.main.selectAll("."+n.lines).selectAll("."+n.line).data(r.lineData.bind(r));var a=i.enter().append("path").attr("class",r.classLine.bind(r)).style("stroke",r.color);r.mainLine=a.merge(i).style("opacity",r.initialOpacity.bind(r)).style("shape-rendering",(function(t){return r.isStepType(t)?"crispEdges":""})).attr("transform",null);i.exit().transition().duration(t).style("opacity",0)};ChartInternal.prototype.redrawLine=function(t,n,r){return[(n?(this||e).mainLine.transition(r):(this||e).mainLine).attr("d",t).style("stroke",(this||e).color).style("opacity",1)]};ChartInternal.prototype.generateDrawLine=function(t,n){var r=this||e,i=r.config,a=r.d3.line(),o=r.generateGetLinePoints(t,n),s=n?r.getSubYScale:r.getYScale,xValue=function(t){return(n?r.subxx:r.xx).call(r,t)},yValue=function(t,e){return i.data_groups.length>0?o(t,e)[0][1]:s.call(r,t.id)(t.value)};a=i.axis_rotated?a.x(yValue).y(xValue):a.x(xValue).y(yValue);i.line_connectNull||(a=a.defined((function(t){return null!=t.value})));return function(t){var e=i.line_connectNull?r.filterRemoveNull(t.values):t.values,o=n?r.subX:r.x,l=s.call(r,t.id),c=0,d=0,u;if(r.isLineType(t))if(i.data_regions[t.id])u=r.lineWithRegions(e,o,l,i.data_regions[t.id]);else{r.isStepType(t)&&(e=r.convertValuesToStep(e));u=a.curve(r.getInterpolate(t))(e)}else{if(e[0]){c=o(e[0].x);d=l(e[0].value)}u=i.axis_rotated?"M "+d+" "+c:"M "+c+" "+d}return u||"M 0 0"}};ChartInternal.prototype.generateGetLinePoints=function(t,n){var r=this||e,i=r.config,a=t.__max__+1,o=r.getShapeX(0,a,t,!!n),s=r.getShapeY(!!n),l=r.getShapeOffset(r.isLineType,t,!!n),c=n?r.getSubYScale:r.getYScale;return function(t,e){var n=c.call(r,t.id)(0),a=l(t,e)||n,d=o(t),u=s(t);i.axis_rotated&&(0<t.value&&u<n||t.value<0&&n<u)&&(u=n);return[[d,u-(n-a)],[d,u-(n-a)],[d,u-(n-a)],[d,u-(n-a)]]}};ChartInternal.prototype.lineWithRegions=function(t,n,r,i){var a=this||e,o=a.config,s=-1,l,c,d="M",u,h,g,p,x,_,y,m,v=a.isCategorized()?.5:0,S,w,b=[];function isWithinRegions(t,e){var n;for(n=0;n<e.length;n++)if(e[n].start<t&&t<=e[n].end)return true;return false}if(isDefined(i))for(l=0;l<i.length;l++){b[l]={};isUndefined(i[l].start)?b[l].start=t[0].x:b[l].start=a.isTimeSeries()?a.parseDate(i[l].start):i[l].start;isUndefined(i[l].end)?b[l].end=t[t.length-1].x:b[l].end=a.isTimeSeries()?a.parseDate(i[l].end):i[l].end}S=o.axis_rotated?function(t){return r(t.value)}:function(t){return n(t.x)};w=o.axis_rotated?function(t){return n(t.x)}:function(t){return r(t.value)};function generateM(t){return"M"+t[0][0]+" "+t[0][1]+" "+t[1][0]+" "+t[1][1]}u=a.isTimeSeries()?function(t,e,i,a){var s=t.x.getTime(),l=e.x-t.x,c=new Date(s+l*i),d=new Date(s+l*(i+a)),u;u=o.axis_rotated?[[r(g(i)),n(c)],[r(g(i+a)),n(d)]]:[[n(c),r(g(i))],[n(d),r(g(i+a))]];return generateM(u)}:function(t,e,i,a){var s;s=o.axis_rotated?[[r(g(i),true),n(h(i))],[r(g(i+a),true),n(h(i+a))]]:[[n(h(i),true),r(g(i))],[n(h(i+a),true),r(g(i+a))]];return generateM(s)};for(l=0;l<t.length;l++){if(isUndefined(b)||!isWithinRegions(t[l].x,b))d+=" "+S(t[l])+" "+w(t[l]);else{h=a.getScale(t[l-1].x+v,t[l].x+v,a.isTimeSeries());g=a.getScale(t[l-1].value,t[l].value);p=n(t[l].x)-n(t[l-1].x);x=r(t[l].value)-r(t[l-1].value);_=Math.sqrt(Math.pow(p,2)+Math.pow(x,2));y=2/_;m=2*y;for(c=y;c<=1;c+=m)d+=u(t[l-1],t[l],c,y)}s=t[l].x}return d};ChartInternal.prototype.updateArea=function(t){var r=this||e,i=r.d3;var a=r.main.selectAll("."+n.areas).selectAll("."+n.area).data(r.lineData.bind(r));var o=a.enter().append("path").attr("class",r.classArea.bind(r)).style("fill",r.color).style("opacity",(function(){r.orgAreaOpacity=+i.select(this||e).style("opacity");return 0}));r.mainArea=o.merge(a).style("opacity",r.orgAreaOpacity);a.exit().transition().duration(t).style("opacity",0)};ChartInternal.prototype.redrawArea=function(t,n,r){return[(n?(this||e).mainArea.transition(r):(this||e).mainArea).attr("d",t).style("fill",(this||e).color).style("opacity",(this||e).orgAreaOpacity)]};ChartInternal.prototype.generateDrawArea=function(t,n){var r=this||e,i=r.config,a=r.d3.area(),o=r.generateGetAreaPoints(t,n),s=n?r.getSubYScale:r.getYScale,xValue=function(t){return(n?r.subxx:r.xx).call(r,t)},value0=function(t,e){return i.data_groups.length>0?o(t,e)[0][1]:s.call(r,t.id)(r.getAreaBaseValue(t.id))},value1=function(t,e){return i.data_groups.length>0?o(t,e)[1][1]:s.call(r,t.id)(t.value)};a=i.axis_rotated?a.x0(value0).x1(value1).y(xValue):a.x(xValue).y0(i.area_above?0:value0).y1(value1);i.line_connectNull||(a=a.defined((function(t){return null!==t.value})));return function(t){var e=i.line_connectNull?r.filterRemoveNull(t.values):t.values,n=0,o=0,s;if(r.isAreaType(t)){r.isStepType(t)&&(e=r.convertValuesToStep(e));s=a.curve(r.getInterpolate(t))(e)}else{if(e[0]){n=r.x(e[0].x);o=r.getYScale(t.id)(e[0].value)}s=i.axis_rotated?"M "+o+" "+n:"M "+n+" "+o}return s||"M 0 0"}};ChartInternal.prototype.getAreaBaseValue=function(){return 0};ChartInternal.prototype.generateGetAreaPoints=function(t,n){var r=this||e,i=r.config,a=t.__max__+1,o=r.getShapeX(0,a,t,!!n),s=r.getShapeY(!!n),l=r.getShapeOffset(r.isAreaType,t,!!n),c=n?r.getSubYScale:r.getYScale;return function(t,e){var n=c.call(r,t.id)(0),a=l(t,e)||n,d=o(t),u=s(t);i.axis_rotated&&(0<t.value&&u<n||t.value<0&&n<u)&&(u=n);return[[d,a],[d,u-(n-a)],[d,u-(n-a)],[d,a]]}};ChartInternal.prototype.updateCircle=function(t,r){var i=this||e;var a=i.main.selectAll("."+n.circles).selectAll("."+n.circle).data(i.lineOrScatterOrStanfordData.bind(i));var o=a.enter().append("circle").attr("shape-rendering",i.isStanfordGraphType()?"crispEdges":"").attr("class",i.classCircle.bind(i)).attr("cx",t).attr("cy",r).attr("r",i.pointR.bind(i)).style("color",i.isStanfordGraphType()?i.getStanfordPointColor.bind(i):i.color);i.mainCircle=o.merge(a).style("opacity",i.isStanfordGraphType()?1:i.initialOpacityForCircle.bind(i));a.exit().style("opacity",0)};ChartInternal.prototype.redrawCircle=function(t,r,i,a){var o=this||e,s=o.main.selectAll("."+n.selectedCircle);return[(i?o.mainCircle.transition(a):o.mainCircle).style("opacity",(this||e).opacityForCircle.bind(o)).style("color",o.isStanfordGraphType()?o.getStanfordPointColor.bind(o):o.color).attr("cx",t).attr("cy",r),(i?s.transition(a):s).attr("cx",t).attr("cy",r)]};ChartInternal.prototype.circleX=function(t){return t.x||0===t.x?this.x(t.x):null};ChartInternal.prototype.updateCircleY=function(){var t=this||e,n,r;if(t.config.data_groups.length>0){n=t.getShapeIndices(t.isLineType),r=t.generateGetLinePoints(n);t.circleY=function(t,e){return r(t,e)[0][1]}}else t.circleY=function(e){return t.getYScale(e.id)(e.value)}};ChartInternal.prototype.getCircles=function(t,r){var i=this||e;return(r?i.main.selectAll("."+n.circles+i.getTargetSelectorSuffix(r)):i.main).selectAll("."+n.circle+(isValue(t)?"-"+t:""))};ChartInternal.prototype.expandCircles=function(t,r,i){var a=this||e,o=a.pointExpandedR.bind(a);i&&a.unexpandCircles();a.getCircles(t,r).classed(n.EXPANDED,true).attr("r",o)};ChartInternal.prototype.unexpandCircles=function(t){var r=this||e,i=r.pointR.bind(r);r.getCircles(t).filter((function(){return r.d3.select(this||e).classed(n.EXPANDED)})).classed(n.EXPANDED,false).attr("r",i)};ChartInternal.prototype.pointR=function(t){var n=this||e,r=n.config;return n.isStepType(t)?0:isFunction(r.point_r)?r.point_r(t):r.point_r};ChartInternal.prototype.pointExpandedR=function(t){var n=this||e,r=n.config;return r.point_focus_expand_enabled?isFunction(r.point_focus_expand_r)?r.point_focus_expand_r(t):r.point_focus_expand_r?r.point_focus_expand_r:1.75*n.pointR(t):n.pointR(t)};ChartInternal.prototype.pointSelectR=function(t){var n=this||e,r=n.config;return isFunction(r.point_select_r)?r.point_select_r(t):r.point_select_r?r.point_select_r:4*n.pointR(t)};ChartInternal.prototype.isWithinCircle=function(t,n){var r=(this||e).d3,i=r.mouse(t),a=r.select(t),o=+a.attr("cx"),s=+a.attr("cy");return Math.sqrt(Math.pow(o-i[0],2)+Math.pow(s-i[1],2))<n};ChartInternal.prototype.isWithinStep=function(t,n){return Math.abs(n-(this||e).d3.mouse(t)[1])<30};ChartInternal.prototype.getCurrentWidth=function(){var t=this||e,n=t.config;return n.size_width?n.size_width:t.getParentWidth()};ChartInternal.prototype.getCurrentHeight=function(){var t=this||e,n=t.config,r=n.size_height?n.size_height:t.getParentHeight();return r>0?r:320/(t.hasType("gauge")&&!n.gauge_fullCircle?2:1)};ChartInternal.prototype.getCurrentPaddingTop=function(){var t=this||e,n=t.config,r=isValue(n.padding_top)?n.padding_top:0;t.title&&t.title.node()&&(r+=t.getTitlePadding());return r};ChartInternal.prototype.getCurrentPaddingBottom=function(){var t=(this||e).config;return isValue(t.padding_bottom)?t.padding_bottom:0};ChartInternal.prototype.getCurrentPaddingLeft=function(t){var n=this||e,r=n.config;return isValue(r.padding_left)?r.padding_left:r.axis_rotated?!r.axis_x_show||r.axis_x_inner?1:Math.max(ceil10(n.getAxisWidthByAxisId("x",t)),40):!r.axis_y_show||r.axis_y_inner?n.axis.getYAxisLabelPosition().isOuter?30:1:ceil10(n.getAxisWidthByAxisId("y",t))};ChartInternal.prototype.getCurrentPaddingRight=function(){var t=this||e,n=t.config,r=0,i=10,a=t.isLegendRight?t.getLegendWidth()+20:0;r=isValue(n.padding_right)?n.padding_right+1:n.axis_rotated?i+a:!n.axis_y2_show||n.axis_y2_inner?2+a+(t.axis.getY2AxisLabelPosition().isOuter?20:0):ceil10(t.getAxisWidthByAxisId("y2"))+a;t.colorScale&&t.colorScale.node()&&(r+=t.getColorScalePadding());return r};ChartInternal.prototype.getParentRectValue=function(t){var n=(this||e).selectChart.node(),r;while(n&&"BODY"!==n.tagName){try{r=n.getBoundingClientRect()[t]}catch(e){"width"===t&&(r=n.offsetWidth)}if(r)break;n=n.parentNode}return r};ChartInternal.prototype.getParentWidth=function(){return this.getParentRectValue("width")};ChartInternal.prototype.getParentHeight=function(){var t=(this||e).selectChart.style("height");return t.indexOf("px")>0?+t.replace("px",""):0};ChartInternal.prototype.getSvgLeft=function(t){var r=this||e,i=r.config,a=i.axis_rotated||!i.axis_rotated&&!i.axis_y_inner,o=i.axis_rotated?n.axisX:n.axisY,s=r.main.select("."+o).node(),l=s&&a?s.getBoundingClientRect():{right:0},c=r.selectChart.node().getBoundingClientRect(),d=r.hasArcType(),u=l.right-c.left-(d?0:r.getCurrentPaddingLeft(t));return u>0?u:0};ChartInternal.prototype.getAxisWidthByAxisId=function(t,n){var r=this||e,i=r.axis.getLabelPositionById(t);return r.axis.getMaxTickWidth(t,n)+(i.isInner?20:40)};ChartInternal.prototype.getHorizontalAxisHeight=function(t,n){var r=this||e,i=r.config,a=30;if("x"===t&&!(isDefined(n)&&n?i.subchart_axis_x_show:i.axis_x_show))return 8;if("x"===t&&i.axis_x_height)return i.axis_x_height;if("y"===t&&!i.axis_y_show)return!i.legend_show||r.isLegendRight||r.isLegendInset?1:10;if("y2"===t&&!i.axis_y2_show)return r.rotated_padding_top;"x"===t&&!i.axis_rotated&&i.axis_x_tick_rotate&&(a=30+r.axis.getMaxTickWidth(t)*Math.cos(Math.PI*(90-Math.abs(i.axis_x_tick_rotate))/180));"y"===t&&i.axis_rotated&&i.axis_y_tick_rotate&&(a=30+r.axis.getMaxTickWidth(t)*Math.cos(Math.PI*(90-Math.abs(i.axis_y_tick_rotate))/180));return a+(r.axis.getLabelPositionById(t).isInner?0:10)+("y2"===t?-10:0)};ChartInternal.prototype.initBrush=function(t){var r=this||e,i=r.d3;r.brush=(r.config.axis_rotated?i.brushY():i.brushX()).on("brush",(function(){var t=i.event.sourceEvent;t&&"zoom"===t.type||r.redrawForBrush()})).on("end",(function(){var t=i.event.sourceEvent;t&&"zoom"===t.type||r.brush.empty()&&t&&"end"!==t.type&&r.brush.clear()}));r.brush.updateExtent=function(){var t=(this||e).scale.range(),n;n=r.config.axis_rotated?[[0,t[0]],[r.width2,t[1]]]:[[t[0],0],[t[1],r.height2]];this.extent(n);return this||e};r.brush.updateScale=function(t){(this||e).scale=t;return this||e};r.brush.update=function(t){this.updateScale(t||r.subX).updateExtent();r.context.select("."+n.brush).call(this||e)};r.brush.clear=function(){r.context.select("."+n.brush).call(r.brush.move,null)};r.brush.selection=function(){return i.brushSelection(r.context.select("."+n.brush).node())};r.brush.selectionAsValue=function(t,i){var a,o;if(t){if(r.context){a=[this.scale(t[0]),this.scale(t[1])];o=r.context.select("."+n.brush);i&&(o=o.transition());r.brush.move(o,a)}return[]}a=r.brush.selection()||[0,0];return[(this||e).scale.invert(a[0]),(this||e).scale.invert(a[1])]};r.brush.empty=function(){var t=r.brush.selection();return!t||t[0]===t[1]};return r.brush.updateScale(t)};ChartInternal.prototype.initSubchart=function(){var t=this||e,r=t.config,i=t.context=t.svg.append("g").attr("transform",t.getTranslate("context"));i.style("visibility","visible");i.append("g").attr("clip-path",t.clipPathForSubchart).attr("class",n.chart);i.select("."+n.chart).append("g").attr("class",n.chartBars);i.select("."+n.chart).append("g").attr("class",n.chartLines);i.append("g").attr("clip-path",t.clipPath).attr("class",n.brush);t.axes.subx=i.append("g").attr("class",n.axisX).attr("transform",t.getTranslate("subx")).attr("clip-path",r.axis_rotated?"":t.clipPathForXAxis).style("visibility",r.subchart_axis_x_show?"visible":"hidden")};ChartInternal.prototype.initSubchartBrush=function(){var t=this||e;t.initBrush(t.subX).updateExtent();t.context.select("."+n.brush).call(t.brush)};ChartInternal.prototype.updateTargetsForSubchart=function(t){var r=this||e,i=r.context,a=r.config,o,s,l,c,d=r.classChartBar.bind(r),u=r.classBars.bind(r),h=r.classChartLine.bind(r),g=r.classLines.bind(r),p=r.classAreas.bind(r);c=i.select("."+n.chartBars).selectAll("."+n.chartBar).data(t);l=c.enter().append("g").style("opacity",0);l.merge(c).attr("class",d);l.append("g").attr("class",u);s=i.select("."+n.chartLines).selectAll("."+n.chartLine).data(t);o=s.enter().append("g").style("opacity",0);o.merge(s).attr("class",h);o.append("g").attr("class",g);o.append("g").attr("class",p);i.selectAll("."+n.brush+" rect").attr(a.axis_rotated?"width":"height",a.axis_rotated?r.width2:r.height2)};ChartInternal.prototype.updateBarForSubchart=function(t){var r=this||e;var i=r.context.selectAll("."+n.bars).selectAll("."+n.bar).data(r.barData.bind(r));var a=i.enter().append("path").attr("class",r.classBar.bind(r)).style("stroke","none").style("fill",r.color);i.exit().transition().duration(t).style("opacity",0).remove();r.contextBar=a.merge(i).style("opacity",r.initialOpacity.bind(r))};ChartInternal.prototype.redrawBarForSubchart=function(t,n,r){(n?(this||e).contextBar.transition(Math.random().toString()).duration(r):(this||e).contextBar).attr("d",t).style("opacity",1)};ChartInternal.prototype.updateLineForSubchart=function(t){var r=this||e;var i=r.context.selectAll("."+n.lines).selectAll("."+n.line).data(r.lineData.bind(r));var a=i.enter().append("path").attr("class",r.classLine.bind(r)).style("stroke",r.color);i.exit().transition().duration(t).style("opacity",0).remove();r.contextLine=a.merge(i).style("opacity",r.initialOpacity.bind(r))};ChartInternal.prototype.redrawLineForSubchart=function(t,n,r){(n?(this||e).contextLine.transition(Math.random().toString()).duration(r):(this||e).contextLine).attr("d",t).style("opacity",1)};ChartInternal.prototype.updateAreaForSubchart=function(t){var r=this||e,i=r.d3;var a=r.context.selectAll("."+n.areas).selectAll("."+n.area).data(r.lineData.bind(r));var o=a.enter().append("path").attr("class",r.classArea.bind(r)).style("fill",r.color).style("opacity",(function(){r.orgAreaOpacity=+i.select(this||e).style("opacity");return 0}));a.exit().transition().duration(t).style("opacity",0).remove();r.contextArea=o.merge(a).style("opacity",0)};ChartInternal.prototype.redrawAreaForSubchart=function(t,n,r){(n?(this||e).contextArea.transition(Math.random().toString()).duration(r):(this||e).contextArea).attr("d",t).style("fill",(this||e).color).style("opacity",(this||e).orgAreaOpacity)};ChartInternal.prototype.redrawSubchart=function(t,n,r,i,a,o,s){var l=this||e,c=l.d3,d,u,h;c.event&&"zoom"===c.event.type&&l.brush.selectionAsValue(l.x.orgDomain());if(t){l.brush.empty()||l.brush.selectionAsValue(l.x.orgDomain());d=l.generateDrawArea(a,true);u=l.generateDrawBar(o,true);h=l.generateDrawLine(s,true);l.updateBarForSubchart(r);l.updateLineForSubchart(r);l.updateAreaForSubchart(r);l.redrawBarForSubchart(u,r,r);l.redrawLineForSubchart(h,r,r);l.redrawAreaForSubchart(d,r,r)}};ChartInternal.prototype.redrawForBrush=function(){var t=this||e,r=t.x,i=t.d3,a;t.redraw({withTransition:false,withY:t.config.zoom_rescale,withSubchart:false,withUpdateXDomain:true,withEventRect:false,withDimension:false});a=i.event.selection||t.brush.scale.range();t.main.select("."+n.eventRect).call(t.zoom.transform,i.zoomIdentity.scale(t.width/(a[1]-a[0])).translate(-a[0],0));t.config.subchart_onbrush.call(t.api,r.orgDomain())};ChartInternal.prototype.transformContext=function(t,r){var i=this||e,a;if(r&&r.axisSubX)a=r.axisSubX;else{a=i.context.select("."+n.axisX);t&&(a=a.transition())}i.context.attr("transform",i.getTranslate("context"));a.attr("transform",i.getTranslate("subx"))};ChartInternal.prototype.getDefaultSelection=function(){var t=this||e,n=t.config,r=isFunction(n.axis_x_selection)?n.axis_x_selection(t.getXDomain(t.data.targets)):n.axis_x_selection;t.isTimeSeries()&&(r=[t.parseDate(r[0]),t.parseDate(r[1])]);return r};ChartInternal.prototype.removeSubchart=function(){var t=this||e;t.brush=null;t.context.remove();t.context=null};ChartInternal.prototype.initText=function(){var t=this||e;t.main.select("."+n.chart).append("g").attr("class",n.chartTexts);t.mainText=t.d3.selectAll([])};ChartInternal.prototype.updateTargetsForText=function(t){var r=this||e,i=r.classChartText.bind(r),a=r.classTexts.bind(r),o=r.classFocus.bind(r);var s=r.main.select("."+n.chartTexts).selectAll("."+n.chartText).data(t);var l=s.enter().append("g").attr("class",i).style("opacity",0).style("pointer-events","none");l.append("g").attr("class",a);l.merge(s).attr("class",(function(t){return i(t)+o(t)}))};ChartInternal.prototype.updateText=function(t,r,i){var a=this||e,o=a.config,s=a.barOrLineData.bind(a),l=a.classText.bind(a);var c=a.main.selectAll("."+n.texts).selectAll("."+n.text).data(s);var d=c.enter().append("text").attr("class",l).attr("text-anchor",(function(t){return o.axis_rotated?t.value<0?"end":"start":"middle"})).style("stroke","none").attr("x",t).attr("y",r).style("fill",(function(t){return a.color(t)})).style("fill-opacity",0);a.mainText=d.merge(c).text((function(t,e,n){return a.dataLabelFormat(t.id)(t.value,t.id,e,n)}));c.exit().transition().duration(i).style("fill-opacity",0).remove()};ChartInternal.prototype.redrawText=function(t,n,r,i,a){return[(i?(this||e).mainText.transition(a):(this||e).mainText).attr("x",t).attr("y",n).style("fill",(this||e).color).style("fill-opacity",r?0:(this||e).opacityForText.bind(this||e))]};ChartInternal.prototype.getTextRect=function(t,n,r){var i=(this||e).d3.select("body").append("div").classed("c3",true),a=i.append("svg").style("visibility","hidden").style("position","fixed").style("top",0).style("left",0),o=(this||e).d3.select(r).style("font"),s;a.selectAll(".dummy").data([t]).enter().append("text").classed(n||"",true).style("font",o).text(t).each((function(){s=getBBox(this||e)}));i.remove();return s};ChartInternal.prototype.generateXYForText=function(t,n,r,i){var a=this||e,o=a.generateGetAreaPoints(t,false),s=a.generateGetBarPoints(n,false),l=a.generateGetLinePoints(r,false),c=i?a.getXForText:a.getYForText;return function(t,n){var r=a.isAreaType(t)?o:a.isBarType(t)?s:l;return c.call(a,r(t,n),t,this||e)}};ChartInternal.prototype.getXForText=function(t,n,r){var i=this||e,a=getBBox(r),o,s;if(i.config.axis_rotated){s=i.isBarType(n)?4:6;o=t[2][1]+s*(n.value<0?-1:1)}else o=i.hasType("bar")?(t[2][0]+t[0][0])/2:t[0][0];null===n.value&&(o>i.width?o=i.width-a.width:o<0&&(o=4));return o};ChartInternal.prototype.getYForText=function(t,n,r){var i=this||e,a=getBBox(r),o;if(i.config.axis_rotated)o=(t[0][0]+t[2][0]+.6*a.height)/2;else{o=t[2][1];if(n.value<0||0===n.value&&!i.hasPositiveValue){o+=a.height;i.isBarType(n)&&i.isSafari()?o-=3:!i.isBarType(n)&&i.isChrome()&&(o+=3)}else o+=i.isBarType(n)?-3:-6}null!==n.value||i.config.axis_rotated||(o<a.height?o=a.height:o>(this||e).height&&(o=(this||e).height-4));return o};ChartInternal.prototype.initTitle=function(){var t=this||e;t.title=t.svg.append("text").text(t.config.title_text).attr("class",t.CLASS.title)};ChartInternal.prototype.redrawTitle=function(){var t=this||e;t.title.attr("x",t.xForTitle.bind(t)).attr("y",t.yForTitle.bind(t))};ChartInternal.prototype.xForTitle=function(){var t=this||e,n=t.config,r=n.title_position||"left",i;i=r.indexOf("right")>=0?t.currentWidth-t.getTextRect(t.title.node().textContent,t.CLASS.title,t.title.node()).width-n.title_padding.right:r.indexOf("center")>=0?Math.max((t.currentWidth-t.getTextRect(t.title.node().textContent,t.CLASS.title,t.title.node()).width)/2,0):n.title_padding.left;return i};ChartInternal.prototype.yForTitle=function(){var t=this||e;return t.config.title_padding.top+t.getTextRect(t.title.node().textContent,t.CLASS.title,t.title.node()).height};ChartInternal.prototype.getTitlePadding=function(){var t=this||e;return t.yForTitle()+t.config.title_padding.bottom};function powerOfTen(t){return t/Math.pow(10,Math.ceil(Math.log(t)/Math.LN10-1e-12))===1}ChartInternal.prototype.drawColorScale=function(){var t=this||e,r=t.d3,i=t.config,a=t.data.targets[0],o,s,l,c,d,u,h,g;o=isNaN(i.stanford_scaleWidth)?20:i.stanford_scaleWidth;s=5;if(s<0||o<0)throw Error("Colorscale's barheight and barwidth must be greater than 0.");g=t.height-i.stanford_padding.bottom-i.stanford_padding.top;c=r.range(i.stanford_padding.bottom,g,s);h=r.scaleSequential(a.colors).domain([c[c.length-1],c[0]]);t.colorScale&&t.colorScale.remove();t.colorScale=t.svg.append("g").attr("width",50).attr("height",g).attr("class",n.colorScale);t.colorScale.append("g").attr("transform","translate(0, "+i.stanford_padding.top+")").selectAll("bars").data(c).enter().append("rect").attr("y",(function(t,e){return e*s})).attr("x",0).attr("width",o).attr("height",s).attr("fill",(function(t){return h(t)}));u=r.scaleLog().domain([a.minEpochs,a.maxEpochs]).range([c[0]+i.stanford_padding.top+c[c.length-1]+s-1,c[0]+i.stanford_padding.top]);d=r.axisRight(u);"pow10"===i.stanford_scaleFormat?d.tickValues([1,10,100,1e3,1e4,1e5,1e6,1e7]):isFunction(i.stanford_scaleFormat)?d.tickFormat(i.stanford_scaleFormat):d.tickFormat(r.format("d"));isFunction(i.stanford_scaleValues)&&d.tickValues(i.stanford_scaleValues(a.minEpochs,a.maxEpochs));l=t.colorScale.append("g").attr("class","legend axis").attr("transform","translate("+o+",0)").call(d);"pow10"===i.stanford_scaleFormat&&l.selectAll(".tick text").text(null).filter(powerOfTen).text(10).append("tspan").attr("dy","-.7em").text((function(t){return Math.round(Math.log(t)/Math.LN10)}));t.colorScale.attr("transform","translate("+(t.currentWidth-t.xForColorScale())+", 0)")};ChartInternal.prototype.xForColorScale=function(){var t=this||e;return t.config.stanford_padding.right+getBBox(t.colorScale.node()).width};ChartInternal.prototype.getColorScalePadding=function(){var t=this||e;return t.xForColorScale()+t.config.stanford_padding.left+20};ChartInternal.prototype.isStanfordGraphType=function(){var t=this||e;return"stanford"===t.config.data_type};ChartInternal.prototype.initStanfordData=function(){var t=this||e,n=t.d3,r=t.config,i=t.data.targets[0],a,o,s;i.values.sort(compareEpochs);a=i.values.map((function(t){return t.epochs}));s=isNaN(r.stanford_scaleMin)?n.min(a):r.stanford_scaleMin;o=isNaN(r.stanford_scaleMax)?n.max(a):r.stanford_scaleMax;if(s>o)throw Error("Number of minEpochs has to be smaller than maxEpochs");i.colors=isFunction(r.stanford_colors)?r.stanford_colors:n.interpolateHslLong(n.hsl(250,1,.5),n.hsl(0,1,.5));i.colorscale=n.scaleSequentialLog(i.colors).domain([s,o]);i.minEpochs=s;i.maxEpochs=o};ChartInternal.prototype.getStanfordPointColor=function(t){var n=this||e,r=n.data.targets[0];return r.colorscale(t.epochs)};ChartInternal.prototype.getCentroid=function(t){var e=getRegionArea(t);var n=0,r=0,i,a,o,s,l;for(i=0,a=t.length-1;i<t.length;a=i,i+=1){s=t[i];l=t[a];o=s.x*l.y-l.x*s.y;n+=(s.x+l.x)*o;r+=(s.y+l.y)*o}o=6*e;return{x:n/o,y:r/o}};ChartInternal.prototype.getStanfordTooltipTitle=function(t){var n=this||e,r=n.axis.getLabelText("x"),i=n.axis.getLabelText("y");return"\n      <tr><th>"+(r?sanitise(r):"x")+"</th><th class='value'>"+t.x+"</th></tr>\n      <tr><th>"+(i?sanitise(i):"y")+"</th><th class='value'>"+t.value+"</th></tr>\n    "};ChartInternal.prototype.countEpochsInRegion=function(t){var n=this||e,r=n.data.targets[0],i,a;i=r.values.reduce((function(t,e){return t+Number(e.epochs)}),0);a=r.values.reduce((function(e,n){return pointInRegion(n,t)?e+Number(n.epochs):e}),0);return{value:a,percentage:0!==a?(a/i*100).toFixed(1):0}};var getRegionArea=function(t){var e=0,n,r,i,a;for(n=0,r=t.length-1;n<t.length;r=n,n+=1){i=t[n];a=t[r];e+=i.x*a.y;e-=i.y*a.x}e/=2;return e};var pointInRegion=function(t,e){var n,r,i,a,o,s=t.x,l=t.value,c=false;for(var d=0,u=e.length-1;d<e.length;u=d++){n=e[d].x;r=e[d].y;a=e[u].x;i=e[u].y;o=r>l!==i>l&&s<(a-n)*(l-r)/(i-r)+n;o&&(c=!c)}return c};var compareEpochs=function(t,e){return t.epochs<e.epochs?-1:t.epochs>e.epochs?1:0};ChartInternal.prototype.initStanfordElements=function(){var t=this||e;t.stanfordElements=t.main.select("."+n.chart).append("g").attr("class",n.stanfordElements);t.stanfordElements.append("g").attr("class",n.stanfordLines);t.stanfordElements.append("g").attr("class",n.stanfordTexts);t.stanfordElements.append("g").attr("class",n.stanfordRegions)};ChartInternal.prototype.updateStanfordElements=function(t){var r=this||e,i=r.main,a=r.config,o,s,l,c,d,u,h=r.xvCustom.bind(r),g=r.yvCustom.bind(r),p=r.countEpochsInRegion.bind(r);o=i.select("."+n.stanfordLines).style("shape-rendering","geometricprecision").selectAll("."+n.stanfordLine).data(a.stanford_lines);s=o.enter().append("g").attr("class",(function(t){return n.stanfordLine+(t["class"]?" "+t["class"]:"")}));s.append("line").attr("x1",(function(t){return a.axis_rotated?g(t,"value_y1"):h(t,"value_x1")})).attr("x2",(function(t){return a.axis_rotated?g(t,"value_y2"):h(t,"value_x2")})).attr("y1",(function(t){return a.axis_rotated?h(t,"value_x1"):g(t,"value_y1")})).attr("y2",(function(t){return a.axis_rotated?h(t,"value_x2"):g(t,"value_y2")})).style("opacity",0);r.stanfordLines=s.merge(o);r.stanfordLines.select("line").transition().duration(t).attr("x1",(function(t){return a.axis_rotated?g(t,"value_y1"):h(t,"value_x1")})).attr("x2",(function(t){return a.axis_rotated?g(t,"value_y2"):h(t,"value_x2")})).attr("y1",(function(t){return a.axis_rotated?h(t,"value_x1"):g(t,"value_y1")})).attr("y2",(function(t){return a.axis_rotated?h(t,"value_x2"):g(t,"value_y2")})).style("opacity",1);o.exit().transition().duration(t).style("opacity",0).remove();d=i.select("."+n.stanfordTexts).selectAll("."+n.stanfordText).data(a.stanford_texts);u=d.enter().append("g").attr("class",(function(t){return n.stanfordText+(t["class"]?" "+t["class"]:"")}));u.append("text").attr("x",(function(t){return a.axis_rotated?g(t,"y"):h(t,"x")})).attr("y",(function(t){return a.axis_rotated?h(t,"x"):g(t,"y")})).style("opacity",0);r.stanfordTexts=u.merge(d);r.stanfordTexts.select("text").transition().duration(t).attr("x",(function(t){return a.axis_rotated?g(t,"y"):h(t,"x")})).attr("y",(function(t){return a.axis_rotated?h(t,"x"):g(t,"y")})).text((function(t){return t.content})).style("opacity",1);d.exit().transition().duration(t).style("opacity",0).remove();l=i.select("."+n.stanfordRegions).selectAll("."+n.stanfordRegion).data(a.stanford_regions);c=l.enter().append("g").attr("class",(function(t){return n.stanfordRegion+(t["class"]?" "+t["class"]:"")}));c.append("polygon").attr("points",(function(t){return t.points.map((function(t){return[a.axis_rotated?g(t,"y"):h(t,"x"),a.axis_rotated?h(t,"x"):g(t,"y")].join(",")})).join(" ")})).style("opacity",0);c.append("text").attr("x",(function(t){return r.getCentroid(t.points).x})).attr("y",(function(t){return r.getCentroid(t.points).y})).style("opacity",0);r.stanfordRegions=c.merge(l);r.stanfordRegions.select("polygon").transition().duration(t).attr("points",(function(t){return t.points.map((function(t){return[a.axis_rotated?g(t,"y"):h(t,"x"),a.axis_rotated?h(t,"x"):g(t,"y")].join(",")})).join(" ")})).style("opacity",(function(t){return t.opacity?t.opacity:.2}));r.stanfordRegions.select("text").transition().duration(t).attr("x",(function(t){return a.axis_rotated?g(r.getCentroid(t.points),"y"):h(r.getCentroid(t.points),"x")})).attr("y",(function(t){return a.axis_rotated?h(r.getCentroid(t.points),"x"):g(r.getCentroid(t.points),"y")})).text((function(t){if(t.text){var e,n,i;if(r.isStanfordGraphType()){i=p(t.points);e=i.value;n=i.percentage}return t.text(e,n)}return""})).attr("text-anchor","middle").attr("dominant-baseline","middle").style("opacity",1);l.exit().transition().duration(t).style("opacity",0).remove()};ChartInternal.prototype.initTooltip=function(){var t=this||e,r=t.config,i;t.tooltip=t.selectChart.style("position","relative").append("div").attr("class",n.tooltipContainer).style("position","absolute").style("pointer-events","none").style("display","none");if(r.tooltip_init_show){if(t.isTimeSeries()&&isString(r.tooltip_init_x)){r.tooltip_init_x=t.parseDate(r.tooltip_init_x);for(i=0;i<t.data.targets[0].values.length;i++)if(t.data.targets[0].values[i].x-r.tooltip_init_x===0)break;r.tooltip_init_x=i}t.tooltip.html(r.tooltip_contents.call(t,t.data.targets.map((function(e){return t.addName(e.values[r.tooltip_init_x])})),t.axis.getXAxisTickFormat(),t.getYFormat(t.hasArcType()),t.color));t.tooltip.style("top",r.tooltip_init_position.top).style("left",r.tooltip_init_position.left).style("display","block")}};ChartInternal.prototype.getTooltipSortFunction=function(){var t=this||e,n=t.config;if(0!==n.data_groups.length&&void 0===n.tooltip_order){var r=t.orderTargets(t.data.targets).map((function(t){return t.id}));(t.isOrderAsc()||t.isOrderDesc())&&(r=r.reverse());return function(t,e){return r.indexOf(t.id)-r.indexOf(e.id)}}var i=n.tooltip_order;void 0===i&&(i=n.data_order);var valueOf=function(t){return t?t.value:null};if(isString(i)&&"asc"===i.toLowerCase())return function(t,e){return valueOf(t)-valueOf(e)};if(isString(i)&&"desc"===i.toLowerCase())return function(t,e){return valueOf(e)-valueOf(t)};if(isFunction(i)){var a=i;void 0===n.tooltip_order&&(a=function(t,e){return i(t?{id:t.id,values:[t]}:null,e?{id:e.id,values:[e]}:null)});return a}return isArray(i)?function(t,e){return i.indexOf(t.id)-i.indexOf(e.id)}:void 0};ChartInternal.prototype.getTooltipContent=function(t,n,r,i){var a=this||e,o=a.config,s=o.tooltip_format_title||n,l=o.tooltip_format_name||function(t){return t},c,d,u,h,g,p;var x=o.tooltip_format_value;x||(x=a.isTargetNormalized(t.id)?function(t,e){return(100*e).toFixed(2)+"%"}:r);var _=this.getTooltipSortFunction();_&&t.sort(_);for(d=0;d<t.length;d++)if(t[d]&&(t[d].value||0===t[d].value)){if(a.isStanfordGraphType()){if(!c){u=a.getStanfordTooltipTitle(t[d]);c="<table class='"+a.CLASS.tooltip+"'>"+u}p=a.getStanfordPointColor(t[d]);g=sanitise(o.data_epochs);h=t[d].epochs}else{if(!c){u=sanitise(s?s(t[d].x,t[d].index):t[d].x);c="<table class='"+a.CLASS.tooltip+"'>"+(u||0===u?"<tr><th colspan='2'>"+u+"</th></tr>":"")}h=sanitise(x(t[d].value,t[d].ratio,t[d].id,t[d].index,t));if(void 0!==h){if(null===t[d].name)continue;g=sanitise(l(t[d].name,t[d].ratio,t[d].id,t[d].index));p=a.levelColor?a.levelColor(t[d].value):i(t[d].id)}}if(void 0!==h){c+="<tr class='"+a.CLASS.tooltipName+"-"+a.getTargetSelectorSuffix(t[d].id)+"'>";c+="<td class='name'><span style='background-color:"+p+"'></span>"+g+"</td>";c+="<td class='value'>"+h+"</td>";c+="</tr>"}}return c+"</table>"};ChartInternal.prototype.tooltipPosition=function(t,n,r,i){var a=this||e,o=a.config,s=a.d3;var l,c,d,u,h;var g=a.hasArcType(),p=s.mouse(i);if(g){c=(a.width-(a.isLegendRight?a.getLegendWidth():0))/2+p[0];u=(a.hasType("gauge")?a.height:a.height/2)+p[1]+20}else{l=a.getSvgLeft(true);if(o.axis_rotated){c=l+p[0]+100;d=c+n;h=a.currentWidth-a.getCurrentPaddingRight();u=a.x(t[0].x)+20}else{c=l+a.getCurrentPaddingLeft(true)+a.x(t[0].x)+20;d=c+n;h=l+a.currentWidth-a.getCurrentPaddingRight();u=p[1]+15}d>h&&(c-=d-h+20);u+r>a.currentHeight&&(u-=r+30)}u<0&&(u=0);return{top:u,left:c}};ChartInternal.prototype.showTooltip=function(t,n){var r=this||e,i=r.config;var a,o,s;var l=r.hasArcType(),c=t.filter((function(t){return t&&isValue(t.value)})),d=i.tooltip_position||ChartInternal.prototype.tooltipPosition;if(0!==c.length&&i.tooltip_show){r.tooltip.html(i.tooltip_contents.call(r,t,r.axis.getXAxisTickFormat(),r.getYFormat(l),r.color)).style("display","block");a=r.tooltip.property("offsetWidth");o=r.tooltip.property("offsetHeight");s=d.call(this||e,c,a,o,n);r.tooltip.style("top",s.top+"px").style("left",s.left+"px")}else r.hideTooltip()};ChartInternal.prototype.hideTooltip=function(){(this||e).tooltip.style("display","none")};ChartInternal.prototype.setTargetType=function(t,n){var r=this||e,i=r.config;r.mapToTargetIds(t).forEach((function(t){r.withoutFadeIn[t]=n===i.data_types[t];i.data_types[t]=n}));t||(i.data_type=n)};ChartInternal.prototype.hasType=function(t,n){var r=this||e,i=r.config.data_types,a=false;n=n||r.data.targets;n&&n.length?n.forEach((function(e){var n=i[e.id];(n&&n.indexOf(t)>=0||!n&&"line"===t)&&(a=true)})):Object.keys(i).length?Object.keys(i).forEach((function(e){i[e]===t&&(a=true)})):a=r.config.data_type===t;return a};ChartInternal.prototype.hasArcType=function(t){return this.hasType("pie",t)||this.hasType("donut",t)||this.hasType("gauge",t)};ChartInternal.prototype.isLineType=function(t){var n=(this||e).config,r=isString(t)?t:t.id;return!n.data_types[r]||["line","spline","area","area-spline","step","area-step"].indexOf(n.data_types[r])>=0};ChartInternal.prototype.isStepType=function(t){var n=isString(t)?t:t.id;return["step","area-step"].indexOf((this||e).config.data_types[n])>=0};ChartInternal.prototype.isSplineType=function(t){var n=isString(t)?t:t.id;return["spline","area-spline"].indexOf((this||e).config.data_types[n])>=0};ChartInternal.prototype.isAreaType=function(t){var n=isString(t)?t:t.id;return["area","area-spline","area-step"].indexOf((this||e).config.data_types[n])>=0};ChartInternal.prototype.isBarType=function(t){var n=isString(t)?t:t.id;return"bar"===(this||e).config.data_types[n]};ChartInternal.prototype.isScatterType=function(t){var n=isString(t)?t:t.id;return"scatter"===(this||e).config.data_types[n]};ChartInternal.prototype.isStanfordType=function(t){var n=isString(t)?t:t.id;return"stanford"===(this||e).config.data_types[n]};ChartInternal.prototype.isPieType=function(t){var n=isString(t)?t:t.id;return"pie"===(this||e).config.data_types[n]};ChartInternal.prototype.isGaugeType=function(t){var n=isString(t)?t:t.id;return"gauge"===(this||e).config.data_types[n]};ChartInternal.prototype.isDonutType=function(t){var n=isString(t)?t:t.id;return"donut"===(this||e).config.data_types[n]};ChartInternal.prototype.isArcType=function(t){return this.isPieType(t)||this.isDonutType(t)||this.isGaugeType(t)};ChartInternal.prototype.lineData=function(t){return this.isLineType(t)?[t]:[]};ChartInternal.prototype.arcData=function(t){return this.isArcType(t.data)?[t]:[]};ChartInternal.prototype.barData=function(t){return this.isBarType(t)?t.values:[]};ChartInternal.prototype.lineOrScatterOrStanfordData=function(t){return this.isLineType(t)||this.isScatterType(t)||this.isStanfordType(t)?t.values:[]};ChartInternal.prototype.barOrLineData=function(t){return this.isBarType(t)||this.isLineType(t)?t.values:[]};ChartInternal.prototype.isSafari=function(){var t=window.navigator.userAgent;return t.indexOf("Safari")>=0&&t.indexOf("Chrome")<0};ChartInternal.prototype.isChrome=function(){var t=window.navigator.userAgent;return t.indexOf("Chrome")>=0};ChartInternal.prototype.initZoom=function(){var t=this||e,n=t.d3,r=t.config,i;t.zoom=n.zoom().on("start",(function(){if("scroll"===r.zoom_type){var e=n.event.sourceEvent;if(!e||"brush"!==e.type){i=e;r.zoom_onzoomstart.call(t.api,e)}}})).on("zoom",(function(){if("scroll"===r.zoom_type){var e=n.event.sourceEvent;if(!e||"brush"!==e.type){t.redrawForZoom();r.zoom_onzoom.call(t.api,t.x.orgDomain())}}})).on("end",(function(){if("scroll"===r.zoom_type){var e=n.event.sourceEvent;e&&"brush"===e.type||e&&i.clientX===e.clientX&&i.clientY===e.clientY||r.zoom_onzoomend.call(t.api,t.x.orgDomain())}}));t.zoom.updateDomain=function(){n.event&&n.event.transform&&(r.axis_rotated&&"scroll"===r.zoom_type&&"mousemove"===n.event.sourceEvent.type?t.x.domain(n.event.transform.rescaleY(t.subX).domain()):t.x.domain(n.event.transform.rescaleX(t.subX).domain()));return this||e};t.zoom.updateExtent=function(){this.scaleExtent([1,Infinity]).translateExtent([[0,0],[t.width,t.height]]).extent([[0,0],[t.width,t.height]]);return this||e};t.zoom.update=function(){return this.updateExtent().updateDomain()};return t.zoom.updateExtent()};ChartInternal.prototype.zoomTransform=function(t){var n=this||e,r=[n.x(t[0]),n.x(t[1])];return n.d3.zoomIdentity.scale(n.width/(r[1]-r[0])).translate(-r[0],0)};ChartInternal.prototype.initDragZoom=function(){var t=this||e;var r=t.d3;var i=t.config;var a=t.context=t.svg;var o=t.margin.left+20.5;var s=t.margin.top+.5;if("drag"===i.zoom_type&&i.zoom_enabled){var getZoomedDomain=function(e){return e&&e.map((function(e){return t.x.invert(e)}))};var l=t.dragZoomBrush=r.brushX().on("start",(function(){t.api.unzoom();t.svg.select("."+n.dragZoom).classed("disabled",false);i.zoom_onzoomstart.call(t.api,r.event.sourceEvent)})).on("brush",(function(){i.zoom_onzoom.call(t.api,getZoomedDomain(r.event.selection))})).on("end",(function(){if(null!=r.event.selection){var e=getZoomedDomain(r.event.selection);i.zoom_disableDefaultBehavior||t.api.zoom(e);t.svg.select("."+n.dragZoom).classed("disabled",true);i.zoom_onzoomend.call(t.api,e)}}));a.append("g").classed(n.dragZoom,true).attr("clip-path",t.clipPath).attr("transform","translate("+o+","+s+")").call(l)}};ChartInternal.prototype.getZoomDomain=function(){var t=this||e,n=t.config,r=t.d3,i=r.min([t.orgXDomain[0],n.zoom_x_min]),a=r.max([t.orgXDomain[1],n.zoom_x_max]);return[i,a]};ChartInternal.prototype.redrawForZoom=function(){var t=this||e,n=t.d3,r=t.config,i=t.zoom,a=t.x;if(r.zoom_enabled&&0!==t.filterTargetsToShow(t.data.targets).length){i.update();if(!r.zoom_disableDefaultBehavior){t.isCategorized()&&a.orgDomain()[0]===t.orgXDomain[0]&&a.domain([t.orgXDomain[0]-1e-10,a.orgDomain()[1]]);t.redraw({withTransition:false,withY:r.zoom_rescale,withSubchart:false,withEventRect:false,withDimension:false});n.event.sourceEvent&&"mousemove"===n.event.sourceEvent.type&&(t.cancelClick=true)}}};return a}));var r=n;export default r;

